//----------------------------------------------------------
// Copyright (C) Microsoft Corporation. All rights reserved.
//----------------------------------------------------------
// MicrosoftAjax.js
Function.__typeName="Function";Function.__class=true;Function.createCallback=function(b,a){return function(){var e=arguments.length;if(e>0){var d=[];for(var c=0;c<e;c++)d[c]=arguments[c];d[e]=a;return b.apply(this,d)}return b.call(this,a)}};Function.createDelegate=function(a,b){return function(){return b.apply(a,arguments)}};Function.emptyFunction=Function.emptyMethod=function(){};Function.validateParameters=function(c,b,a){return Function._validateParams(c,b,a)};Function._validateParams=function(g,e,c){var a,d=e.length;c=c||typeof c==="undefined";a=Function._validateParameterCount(g,e,c);if(a){a.popStackFrame();return a}for(var b=0,i=g.length;b<i;b++){var f=e[Math.min(b,d-1)],h=f.name;if(f.parameterArray)h+="["+(b-d+1)+"]";else if(!c&&b>=d)break;a=Function._validateParameter(g[b],f,h);if(a){a.popStackFrame();return a}}return null};Function._validateParameterCount=function(j,d,i){var a,c,b=d.length,e=j.length;if(e<b){var f=b;for(a=0;a<b;a++){var g=d[a];if(g.optional||g.parameterArray)f--}if(e<f)c=true}else if(i&&e>b){c=true;for(a=0;a<b;a++)if(d[a].parameterArray){c=false;break}}if(c){var h=Error.parameterCount();h.popStackFrame();return h}return null};Function._validateParameter=function(c,a,h){var b,g=a.type,l=!!a.integer,k=!!a.domElement,m=!!a.mayBeNull;b=Function._validateParameterType(c,g,l,k,m,h);if(b){b.popStackFrame();return b}var e=a.elementType,f=!!a.elementMayBeNull;if(g===Array&&typeof c!=="undefined"&&c!==null&&(e||!f)){var j=!!a.elementInteger,i=!!a.elementDomElement;for(var d=0;d<c.length;d++){var n=c[d];b=Function._validateParameterType(n,e,j,i,f,h+"["+d+"]");if(b){b.popStackFrame();return b}}}return null};Function._validateParameterType=function(b,c,k,j,h,d){var a,g;if(typeof b==="undefined")if(h)return null;else{a=Error.argumentUndefined(d);a.popStackFrame();return a}if(b===null)if(h)return null;else{a=Error.argumentNull(d);a.popStackFrame();return a}if(c&&c.__enum){if(typeof b!=="number"){a=Error.argumentType(d,Object.getType(b),c);a.popStackFrame();return a}if(b%1===0){var e=c.prototype;if(!c.__flags||b===0){for(g in e)if(e[g]===b)return null}else{var i=b;for(g in e){var f=e[g];if(f===0)continue;if((f&b)===f)i-=f;if(i===0)return null}}}a=Error.argumentOutOfRange(d,b,String.format(Sys.Res.enumInvalidValue,b,c.getName()));a.popStackFrame();return a}if(j&&(!Sys._isDomElement(b)||b.nodeType===3)){a=Error.argument(d,Sys.Res.argumentDomElement);a.popStackFrame();return a}if(c&&!Sys._isInstanceOfType(c,b)){a=Error.argumentType(d,Object.getType(b),c);a.popStackFrame();return a}if(c===Number&&k)if(b%1!==0){a=Error.argumentOutOfRange(d,b,Sys.Res.argumentInteger);a.popStackFrame();return a}return null};Error.__typeName="Error";Error.__class=true;Error.create=function(d,b){var a=new Error(d);a.message=d;if(b)for(var c in b)a[c]=b[c];a.popStackFrame();return a};Error.argument=function(a,c){var b="Sys.ArgumentException: "+(c?c:Sys.Res.argument);if(a)b+="\n"+String.format(Sys.Res.paramName,a);var d=Error.create(b,{name:"Sys.ArgumentException",paramName:a});d.popStackFrame();return d};Error.argumentNull=function(a,c){var b="Sys.ArgumentNullException: "+(c?c:Sys.Res.argumentNull);if(a)b+="\n"+String.format(Sys.Res.paramName,a);var d=Error.create(b,{name:"Sys.ArgumentNullException",paramName:a});d.popStackFrame();return d};Error.argumentOutOfRange=function(c,a,d){var b="Sys.ArgumentOutOfRangeException: "+(d?d:Sys.Res.argumentOutOfRange);if(c)b+="\n"+String.format(Sys.Res.paramName,c);if(typeof a!=="undefined"&&a!==null)b+="\n"+String.format(Sys.Res.actualValue,a);var e=Error.create(b,{name:"Sys.ArgumentOutOfRangeException",paramName:c,actualValue:a});e.popStackFrame();return e};Error.argumentType=function(d,c,b,e){var a="Sys.ArgumentTypeException: ";if(e)a+=e;else if(c&&b)a+=String.format(Sys.Res.argumentTypeWithTypes,c.getName(),b.getName());else a+=Sys.Res.argumentType;if(d)a+="\n"+String.format(Sys.Res.paramName,d);var f=Error.create(a,{name:"Sys.ArgumentTypeException",paramName:d,actualType:c,expectedType:b});f.popStackFrame();return f};Error.argumentUndefined=function(a,c){var b="Sys.ArgumentUndefinedException: "+(c?c:Sys.Res.argumentUndefined);if(a)b+="\n"+String.format(Sys.Res.paramName,a);var d=Error.create(b,{name:"Sys.ArgumentUndefinedException",paramName:a});d.popStackFrame();return d};Error.format=function(a){var c="Sys.FormatException: "+(a?a:Sys.Res.format),b=Error.create(c,{name:"Sys.FormatException"});b.popStackFrame();return b};Error.invalidOperation=function(a){var c="Sys.InvalidOperationException: "+(a?a:Sys.Res.invalidOperation),b=Error.create(c,{name:"Sys.InvalidOperationException"});b.popStackFrame();return b};Error.notImplemented=function(a){var c="Sys.NotImplementedException: "+(a?a:Sys.Res.notImplemented),b=Error.create(c,{name:"Sys.NotImplementedException"});b.popStackFrame();return b};Error.parameterCount=function(a){var c="Sys.ParameterCountException: "+(a?a:Sys.Res.parameterCount),b=Error.create(c,{name:"Sys.ParameterCountException"});b.popStackFrame();return b};Error.prototype.popStackFrame=function(){if(typeof this.stack==="undefined"||this.stack===null||typeof this.fileName==="undefined"||this.fileName===null||typeof this.lineNumber==="undefined"||this.lineNumber===null)return;var a=this.stack.split("\n"),c=a[0],e=this.fileName+":"+this.lineNumber;while(typeof c!=="undefined"&&c!==null&&c.indexOf(e)===-1){a.shift();c=a[0]}var d=a[1];if(typeof d==="undefined"||d===null)return;var b=d.match(/@(.*):(\d+)$/);if(typeof b==="undefined"||b===null)return;this.fileName=b[1];this.lineNumber=parseInt(b[2]);a.shift();this.stack=a.join("\n")};Object.__typeName="Object";Object.__class=true;Object.getType=function(b){var a=b.constructor;if(!a||typeof a!=="function"||!a.__typeName||a.__typeName==="Object")return Object;return a};Object.getTypeName=function(a){return Object.getType(a).getName()};String.__typeName="String";String.__class=true;String.prototype.endsWith=function(a){return this.substr(this.length-a.length)===a};String.prototype.startsWith=function(a){return this.substr(0,a.length)===a};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trimEnd=function(){return this.replace(/\s+$/,"")};String.prototype.trimStart=function(){return this.replace(/^\s+/,"")};String.format=function(){return String._toFormattedString(false,arguments)};String._toFormattedString=function(l,j){var c="",e=j[0];for(var a=0;true;){var f=e.indexOf("{",a),d=e.indexOf("}",a);if(f<0&&d<0){c+=e.slice(a);break}if(d>0&&(d<f||f<0)){c+=e.slice(a,d+1);a=d+2;continue}c+=e.slice(a,f);a=f+1;if(e.charAt(a)==="{"){c+="{";a++;continue}if(d<0)break;var h=e.substring(a,d),g=h.indexOf(":"),k=parseInt(g<0?h:h.substring(0,g),10)+1,i=g<0?"":h.substring(g+1),b=j[k];if(typeof b==="undefined"||b===null)b="";if(b.toFormattedString)c+=b.toFormattedString(i);else if(l&&b.localeFormat)c+=b.localeFormat(i);else if(b.format)c+=b.format(i);else c+=b.toString();a=d+1}return c};Boolean.__typeName="Boolean";Boolean.__class=true;Boolean.parse=function(b){var a=b.trim().toLowerCase();if(a==="false")return false;if(a==="true")return true};Date.__typeName="Date";Date.__class=true;Number.__typeName="Number";Number.__class=true;RegExp.__typeName="RegExp";RegExp.__class=true;if(!window)this.window=this;window.Type=Function;Type.prototype.callBaseMethod=function(a,d,b){var c=Sys._getBaseMethod(this,a,d);if(!b)return c.apply(a);else return c.apply(a,b)};Type.prototype.getBaseMethod=function(a,b){return Sys._getBaseMethod(this,a,b)};Type.prototype.getBaseType=function(){return typeof this.__baseType==="undefined"?null:this.__baseType};Type.prototype.getInterfaces=function(){var a=[],b=this;while(b){var c=b.__interfaces;if(c)for(var d=0,f=c.length;d<f;d++){var e=c[d];if(!Array.contains(a,e))a[a.length]=e}b=b.__baseType}return a};Type.prototype.getName=function(){return typeof this.__typeName==="undefined"?"":this.__typeName};Type.prototype.implementsInterface=function(d){this.resolveInheritance();var c=d.getName(),a=this.__interfaceCache;if(a){var e=a[c];if(typeof e!=="undefined")return e}else a=this.__interfaceCache={};var b=this;while(b){var f=b.__interfaces;if(f)if(Array.indexOf(f,d)!==-1)return a[c]=true;b=b.__baseType}return a[c]=false};Type.prototype.inheritsFrom=function(b){this.resolveInheritance();var a=this.__baseType;while(a){if(a===b)return true;a=a.__baseType}return false};Type.prototype.initializeBase=function(a,b){this.resolveInheritance();if(this.__baseType)if(!b)this.__baseType.apply(a);else this.__baseType.apply(a,b);return a};Type.prototype.isImplementedBy=function(a){if(typeof a==="undefined"||a===null)return false;var b=Object.getType(a);return !!(b.implementsInterface&&b.implementsInterface(this))};Type.prototype.isInstanceOfType=function(a){return Sys._isInstanceOfType(this,a)};Type.prototype.registerClass=function(c,b,d){this.prototype.constructor=this;this.__typeName=c;this.__class=true;if(b){this.__baseType=b;this.__basePrototypePending=true}Sys.__upperCaseTypes[c.toUpperCase()]=this;if(d){this.__interfaces=[];for(var a=2,f=arguments.length;a<f;a++){var e=arguments[a];this.__interfaces.push(e)}}return this};Type.prototype.registerInterface=function(a){Sys.__upperCaseTypes[a.toUpperCase()]=this;this.prototype.constructor=this;this.__typeName=a;this.__interface=true;return this};Type.prototype.resolveInheritance=function(){if(this.__basePrototypePending){var b=this.__baseType;b.resolveInheritance();for(var a in b.prototype){var c=b.prototype[a];if(!this.prototype[a])this.prototype[a]=c}delete this.__basePrototypePending}};Type.getRootNamespaces=function(){return Array.clone(Sys.__rootNamespaces)};Type.isClass=function(a){if(typeof a==="undefined"||a===null)return false;return !!a.__class};Type.isInterface=function(a){if(typeof a==="undefined"||a===null)return false;return !!a.__interface};Type.isNamespace=function(a){if(typeof a==="undefined"||a===null)return false;return !!a.__namespace};Type.parse=function(typeName,ns){var fn;if(ns){fn=Sys.__upperCaseTypes[ns.getName().toUpperCase()+"."+typeName.toUpperCase()];return fn||null}if(!typeName)return null;if(!Type.__htClasses)Type.__htClasses={};fn=Type.__htClasses[typeName];if(!fn){fn=eval(typeName);Type.__htClasses[typeName]=fn}return fn};Type.registerNamespace=function(e){var d=window,c=e.split(".");for(var b=0;b<c.length;b++){var f=c[b],a=d[f];if(!a)a=d[f]={};if(!a.__namespace){if(b===0&&e!=="Sys")Sys.__rootNamespaces[Sys.__rootNamespaces.length]=a;a.__namespace=true;a.__typeName=c.slice(0,b+1).join(".");a.getName=function(){return this.__typeName}}d=a}};Type._checkDependency=function(c,a){var d=Type._registerScript._scripts,b=d?!!d[c]:false;if(typeof a!=="undefined"&&!b)throw Error.invalidOperation(String.format(Sys.Res.requiredScriptReferenceNotIncluded,a,c));return b};Type._registerScript=function(a,c){var b=Type._registerScript._scripts;if(!b)Type._registerScript._scripts=b={};if(b[a])throw Error.invalidOperation(String.format(Sys.Res.scriptAlreadyLoaded,a));b[a]=true;if(c)for(var d=0,f=c.length;d<f;d++){var e=c[d];if(!Type._checkDependency(e))throw Error.invalidOperation(String.format(Sys.Res.scriptDependencyNotFound,a,e))}};Type.registerNamespace("Sys");Sys.__upperCaseTypes={};Sys.__rootNamespaces=[Sys];Sys._isInstanceOfType=function(c,b){if(typeof b==="undefined"||b===null)return false;if(b instanceof c)return true;var a=Object.getType(b);return !!(a===c)||a.inheritsFrom&&a.inheritsFrom(c)||a.implementsInterface&&a.implementsInterface(c)};Sys._getBaseMethod=function(d,e,c){var b=d.getBaseType();if(b){var a=b.prototype[c];return a instanceof Function?a:null}return null};Sys._isDomElement=function(a){var c=false;if(typeof a.nodeType!=="number"){var b=a.ownerDocument||a.document||a;if(b!=a){var d=b.defaultView||b.parentWindow;c=d!=a}else c=typeof b.body==="undefined"}return !c};Array.__typeName="Array";Array.__class=true;Array.add=Array.enqueue=function(a,b){a[a.length]=b};Array.addRange=function(a,b){a.push.apply(a,b)};Array.clear=function(a){a.length=0};Array.clone=function(a){if(a.length===1)return [a[0]];else return Array.apply(null,a)};Array.contains=function(a,b){return Sys._indexOf(a,b)>=0};Array.dequeue=function(a){return a.shift()};Array.forEach=function(b,e,d){for(var a=0,f=b.length;a<f;a++){var c=b[a];if(typeof c!=="undefined")e.call(d,c,a,b)}};Array.indexOf=function(a,c,b){return Sys._indexOf(a,c,b)};Array.insert=function(a,b,c){a.splice(b,0,c)};Array.parse=function(value){if(!value)return [];return eval(value)};Array.remove=function(b,c){var a=Sys._indexOf(b,c);if(a>=0)b.splice(a,1);return a>=0};Array.removeAt=function(a,b){a.splice(b,1)};Sys._indexOf=function(d,e,a){if(typeof e==="undefined")return -1;var c=d.length;if(c!==0){a=a-0;if(isNaN(a))a=0;else{if(isFinite(a))a=a-a%1;if(a<0)a=Math.max(0,c+a)}for(var b=a;b<c;b++)if(typeof d[b]!=="undefined"&&d[b]===e)return b}return -1};Type._registerScript._scripts={"MicrosoftAjaxCore.js":true,"MicrosoftAjaxGlobalization.js":true,"MicrosoftAjaxSerialization.js":true,"MicrosoftAjaxComponentModel.js":true,"MicrosoftAjaxHistory.js":true,"MicrosoftAjaxNetwork.js":true,"MicrosoftAjaxWebServices.js":true};Sys.IDisposable=function(){};Sys.IDisposable.prototype={};Sys.IDisposable.registerInterface("Sys.IDisposable");Sys.StringBuilder=function(a){this._parts=typeof a!=="undefined"&&a!==null&&a!==""?[a.toString()]:[];this._value={};this._len=0};Sys.StringBuilder.prototype={append:function(a){this._parts[this._parts.length]=a},appendLine:function(a){this._parts[this._parts.length]=typeof a==="undefined"||a===null||a===""?"\r\n":a+"\r\n"},clear:function(){this._parts=[];this._value={};this._len=0},isEmpty:function(){if(this._parts.length===0)return true;return this.toString()===""},toString:function(a){a=a||"";var b=this._parts;if(this._len!==b.length){this._value={};this._len=b.length}var d=this._value;if(typeof d[a]==="undefined"){if(a!=="")for(var c=0;c<b.length;)if(typeof b[c]==="undefined"||b[c]===""||b[c]===null)b.splice(c,1);else c++;d[a]=this._parts.join(a)}return d[a]}};Sys.StringBuilder.registerClass("Sys.StringBuilder");Sys.Browser={};Sys.Browser.InternetExplorer={};Sys.Browser.Firefox={};Sys.Browser.Safari={};Sys.Browser.Opera={};Sys.Browser.agent=null;Sys.Browser.hasDebuggerStatement=false;Sys.Browser.name=navigator.appName;Sys.Browser.version=parseFloat(navigator.appVersion);Sys.Browser.documentMode=0;if(navigator.userAgent.indexOf(" MSIE ")>-1){Sys.Browser.agent=Sys.Browser.InternetExplorer;Sys.Browser.version=parseFloat(navigator.userAgent.match(/MSIE (\d+\.\d+)/)[1]);if(Sys.Browser.version>=8)if(document.documentMode>=7)Sys.Browser.documentMode=document.documentMode;Sys.Browser.hasDebuggerStatement=true}else if(navigator.userAgent.indexOf(" Firefox/")>-1){Sys.Browser.agent=Sys.Browser.Firefox;Sys.Browser.version=parseFloat(navigator.userAgent.match(/Firefox\/(\d+\.\d+)/)[1]);Sys.Browser.name="Firefox";Sys.Browser.hasDebuggerStatement=true}else if(navigator.userAgent.indexOf(" AppleWebKit/")>-1){Sys.Browser.agent=Sys.Browser.Safari;Sys.Browser.version=parseFloat(navigator.userAgent.match(/AppleWebKit\/(\d+(\.\d+)?)/)[1]);Sys.Browser.name="Safari"}else if(navigator.userAgent.indexOf("Opera/")>-1)Sys.Browser.agent=Sys.Browser.Opera;Sys.EventArgs=function(){};Sys.EventArgs.registerClass("Sys.EventArgs");Sys.EventArgs.Empty=new Sys.EventArgs;Sys.CancelEventArgs=function(){Sys.CancelEventArgs.initializeBase(this);this._cancel=false};Sys.CancelEventArgs.prototype={get_cancel:function(){return this._cancel},set_cancel:function(a){this._cancel=a}};Sys.CancelEventArgs.registerClass("Sys.CancelEventArgs",Sys.EventArgs);Type.registerNamespace("Sys.UI");Sys._Debug=function(){};Sys._Debug.prototype={_appendConsole:function(a){if(typeof Debug!=="undefined"&&Debug.writeln)Debug.writeln(a);if(window.console&&window.console.log)window.console.log(a);if(window.opera)window.opera.postError(a);if(window.debugService)window.debugService.trace(a)},_appendTrace:function(b){var a=document.getElementById("TraceConsole");if(a&&a.tagName.toUpperCase()==="TEXTAREA")a.value+=b+"\n"},assert:function(c,a,b){if(!c){a=b&&this.assert.caller?String.format(Sys.Res.assertFailedCaller,a,this.assert.caller):String.format(Sys.Res.assertFailed,a);if(confirm(String.format(Sys.Res.breakIntoDebugger,a)))this.fail(a)}},clearTrace:function(){var a=document.getElementById("TraceConsole");if(a&&a.tagName.toUpperCase()==="TEXTAREA")a.value=""},fail:function(message){this._appendConsole(message);if(Sys.Browser.hasDebuggerStatement)eval("debugger")},trace:function(a){this._appendConsole(a);this._appendTrace(a)},traceDump:function(a,b){var c=this._traceDump(a,b,true)},_traceDump:function(a,c,f,b,d){c=c?c:"traceDump";b=b?b:"";if(a===null){this.trace(b+c+": null");return}switch(typeof a){case "undefined":this.trace(b+c+": Undefined");break;case "number":case "string":case "boolean":this.trace(b+c+": "+a);break;default:if(Date.isInstanceOfType(a)||RegExp.isInstanceOfType(a)){this.trace(b+c+": "+a.toString());break}if(!d)d=[];else if(Array.contains(d,a)){this.trace(b+c+": ...");return}Array.add(d,a);if(a==window||a===document||window.HTMLElement&&a instanceof HTMLElement||typeof a.nodeName==="string"){var k=a.tagName?a.tagName:"DomElement";if(a.id)k+=" - "+a.id;this.trace(b+c+" {"+k+"}")}else{var i=Object.getTypeName(a);this.trace(b+c+(typeof i==="string"?" {"+i+"}":""));if(b===""||f){b+="    ";var e,j,l,g,h;if(Array.isInstanceOfType(a)){j=a.length;for(e=0;e<j;e++)this._traceDump(a[e],"["+e+"]",f,b,d)}else for(g in a){h=a[g];if(!Function.isInstanceOfType(h))this._traceDump(h,g,f,b,d)}}}Array.remove(d,a)}}};Sys._Debug.registerClass("Sys._Debug");Sys.Debug=new Sys._Debug;Sys.Debug.isDebug=false;function Sys$Enum$parse(c,e){var a,b,i;if(e){a=this.__lowerCaseValues;if(!a){this.__lowerCaseValues=a={};var g=this.prototype;for(var f in g)a[f.toLowerCase()]=g[f]}}else a=this.prototype;if(!this.__flags){i=e?c.toLowerCase():c;b=a[i.trim()];if(typeof b!=="number")throw Error.argument("value",String.format(Sys.Res.enumInvalidValue,c,this.__typeName));return b}else{var h=(e?c.toLowerCase():c).split(","),j=0;for(var d=h.length-1;d>=0;d--){var k=h[d].trim();b=a[k];if(typeof b!=="number")throw Error.argument("value",String.format(Sys.Res.enumInvalidValue,c.split(",")[d].trim(),this.__typeName));j|=b}return j}}function Sys$Enum$toString(c){if(typeof c==="undefined"||c===null)return this.__string;var d=this.prototype,a;if(!this.__flags||c===0){for(a in d)if(d[a]===c)return a}else{var b=this.__sortedValues;if(!b){b=[];for(a in d)b[b.length]={key:a,value:d[a]};b.sort(function(a,b){return a.value-b.value});this.__sortedValues=b}var e=[],g=c;for(a=b.length-1;a>=0;a--){var h=b[a],f=h.value;if(f===0)continue;if((f&c)===f){e[e.length]=h.key;g-=f;if(g===0)break}}if(e.length&&g===0)return e.reverse().join(", ")}return ""}Type.prototype.registerEnum=function(b,c){Sys.__upperCaseTypes[b.toUpperCase()]=this;for(var a in this.prototype)this[a]=this.prototype[a];this.__typeName=b;this.parse=Sys$Enum$parse;this.__string=this.toString();this.toString=Sys$Enum$toString;this.__flags=c;this.__enum=true};Type.isEnum=function(a){if(typeof a==="undefined"||a===null)return false;return !!a.__enum};Type.isFlags=function(a){if(typeof a==="undefined"||a===null)return false;return !!a.__flags};Sys.CollectionChange=function(e,a,c,b,d){this.action=e;if(a)if(!(a instanceof Array))a=[a];this.newItems=a||null;if(typeof c!=="number")c=-1;this.newStartingIndex=c;if(b)if(!(b instanceof Array))b=[b];this.oldItems=b||null;if(typeof d!=="number")d=-1;this.oldStartingIndex=d};Sys.CollectionChange.registerClass("Sys.CollectionChange");Sys.NotifyCollectionChangedAction=function(){throw Error.notImplemented()};Sys.NotifyCollectionChangedAction.prototype={add:0,remove:1,reset:2};Sys.NotifyCollectionChangedAction.registerEnum("Sys.NotifyCollectionChangedAction");Sys.NotifyCollectionChangedEventArgs=function(a){this._changes=a;Sys.NotifyCollectionChangedEventArgs.initializeBase(this)};Sys.NotifyCollectionChangedEventArgs.prototype={get_changes:function(){return this._changes||[]}};Sys.NotifyCollectionChangedEventArgs.registerClass("Sys.NotifyCollectionChangedEventArgs",Sys.EventArgs);Sys.Observer=function(){};Sys.Observer.registerClass("Sys.Observer");Sys.Observer.makeObservable=function(a){var c=a instanceof Array,b=Sys.Observer;if(a.setValue===b._observeMethods.setValue)return a;b._addMethods(a,b._observeMethods);if(c)b._addMethods(a,b._arrayMethods);return a};Sys.Observer._addMethods=function(c,b){for(var a in b)c[a]=b[a]};Sys.Observer._addEventHandler=function(c,a,b){Sys.Observer._getContext(c,true).events._addHandler(a,b)};Sys.Observer.addEventHandler=function(c,a,b){Sys.Observer._addEventHandler(c,a,b)};Sys.Observer._removeEventHandler=function(c,a,b){Sys.Observer._getContext(c,true).events._removeHandler(a,b)};Sys.Observer.removeEventHandler=function(c,a,b){Sys.Observer._removeEventHandler(c,a,b)};Sys.Observer.raiseEvent=function(b,e,d){var c=Sys.Observer._getContext(b);if(!c)return;var a=c.events.getHandler(e);if(a)a(b,d)};Sys.Observer.addPropertyChanged=function(b,a){Sys.Observer._addEventHandler(b,"propertyChanged",a)};Sys.Observer.removePropertyChanged=function(b,a){Sys.Observer._removeEventHandler(b,"propertyChanged",a)};Sys.Observer.beginUpdate=function(a){Sys.Observer._getContext(a,true).updating=true};Sys.Observer.endUpdate=function(b){var a=Sys.Observer._getContext(b);if(!a||!a.updating)return;a.updating=false;var d=a.dirty;a.dirty=false;if(d){if(b instanceof Array){var c=a.changes;a.changes=null;Sys.Observer.raiseCollectionChanged(b,c)}Sys.Observer.raisePropertyChanged(b,"")}};Sys.Observer.isUpdating=function(b){var a=Sys.Observer._getContext(b);return a?a.updating:false};Sys.Observer._setValue=function(a,j,g){var b,f,k=a,d=j.split(".");for(var i=0,m=d.length-1;i<m;i++){var l=d[i];b=a["get_"+l];if(typeof b==="function")a=b.call(a);else a=a[l];var n=typeof a;if(a===null||n==="undefined")throw Error.invalidOperation(String.format(Sys.Res.nullReferenceInPath,j))}var e,c=d[m];b=a["get_"+c];f=a["set_"+c];if(typeof b==="function")e=b.call(a);else e=a[c];if(typeof f==="function")f.call(a,g);else a[c]=g;if(e!==g){var h=Sys.Observer._getContext(k);if(h&&h.updating){h.dirty=true;return}Sys.Observer.raisePropertyChanged(k,d[0])}};Sys.Observer.setValue=function(b,a,c){Sys.Observer._setValue(b,a,c)};Sys.Observer.raisePropertyChanged=function(b,a){Sys.Observer.raiseEvent(b,"propertyChanged",new Sys.PropertyChangedEventArgs(a))};Sys.Observer.addCollectionChanged=function(b,a){Sys.Observer._addEventHandler(b,"collectionChanged",a)};Sys.Observer.removeCollectionChanged=function(b,a){Sys.Observer._removeEventHandler(b,"collectionChanged",a)};Sys.Observer._collectionChange=function(d,c){var a=Sys.Observer._getContext(d);if(a&&a.updating){a.dirty=true;var b=a.changes;if(!b)a.changes=b=[c];else b.push(c)}else{Sys.Observer.raiseCollectionChanged(d,[c]);Sys.Observer.raisePropertyChanged(d,"length")}};Sys.Observer.add=function(a,b){var c=new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.add,[b],a.length);Array.add(a,b);Sys.Observer._collectionChange(a,c)};Sys.Observer.addRange=function(a,b){var c=new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.add,b,a.length);Array.addRange(a,b);Sys.Observer._collectionChange(a,c)};Sys.Observer.clear=function(a){var b=Array.clone(a);Array.clear(a);Sys.Observer._collectionChange(a,new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.reset,null,-1,b,0))};Sys.Observer.insert=function(a,b,c){Array.insert(a,b,c);Sys.Observer._collectionChange(a,new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.add,[c],b))};Sys.Observer.remove=function(a,b){var c=Array.indexOf(a,b);if(c!==-1){Array.remove(a,b);Sys.Observer._collectionChange(a,new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.remove,null,-1,[b],c));return true}return false};Sys.Observer.removeAt=function(b,a){if(a>-1&&a<b.length){var c=b[a];Array.removeAt(b,a);Sys.Observer._collectionChange(b,new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.remove,null,-1,[c],a))}};Sys.Observer.raiseCollectionChanged=function(b,a){Sys.Observer.raiseEvent(b,"collectionChanged",new Sys.NotifyCollectionChangedEventArgs(a))};Sys.Observer._observeMethods={add_propertyChanged:function(a){Sys.Observer._addEventHandler(this,"propertyChanged",a)},remove_propertyChanged:function(a){Sys.Observer._removeEventHandler(this,"propertyChanged",a)},addEventHandler:function(a,b){Sys.Observer._addEventHandler(this,a,b)},removeEventHandler:function(a,b){Sys.Observer._removeEventHandler(this,a,b)},get_isUpdating:function(){return Sys.Observer.isUpdating(this)},beginUpdate:function(){Sys.Observer.beginUpdate(this)},endUpdate:function(){Sys.Observer.endUpdate(this)},setValue:function(b,a){Sys.Observer._setValue(this,b,a)},raiseEvent:function(b,a){Sys.Observer.raiseEvent(this,b,a)},raisePropertyChanged:function(a){Sys.Observer.raiseEvent(this,"propertyChanged",new Sys.PropertyChangedEventArgs(a))}};Sys.Observer._arrayMethods={add_collectionChanged:function(a){Sys.Observer._addEventHandler(this,"collectionChanged",a)},remove_collectionChanged:function(a){Sys.Observer._removeEventHandler(this,"collectionChanged",a)},add:function(a){Sys.Observer.add(this,a)},addRange:function(a){Sys.Observer.addRange(this,a)},clear:function(){Sys.Observer.clear(this)},insert:function(a,b){Sys.Observer.insert(this,a,b)},remove:function(a){return Sys.Observer.remove(this,a)},removeAt:function(a){Sys.Observer.removeAt(this,a)},raiseCollectionChanged:function(a){Sys.Observer.raiseEvent(this,"collectionChanged",new Sys.NotifyCollectionChangedEventArgs(a))}};Sys.Observer._getContext=function(b,c){var a=b._observerContext;if(a)return a();if(c)return (b._observerContext=Sys.Observer._createContext())();return null};Sys.Observer._createContext=function(){var a={events:new Sys.EventHandlerList};return function(){return a}};Date._appendPreOrPostMatch=function(e,b){var d=0,a=false;for(var c=0,g=e.length;c<g;c++){var f=e.charAt(c);switch(f){case "'":if(a)b.append("'");else d++;a=false;break;case "\\":if(a)b.append("\\");a=!a;break;default:b.append(f);a=false}}return d};Date._expandFormat=function(a,b){if(!b)b="F";var c=b.length;if(c===1)switch(b){case "d":return a.ShortDatePattern;case "D":return a.LongDatePattern;case "t":return a.ShortTimePattern;case "T":return a.LongTimePattern;case "f":return a.LongDatePattern+" "+a.ShortTimePattern;case "F":return a.FullDateTimePattern;case "M":case "m":return a.MonthDayPattern;case "s":return a.SortableDateTimePattern;case "Y":case "y":return a.YearMonthPattern;default:throw Error.format(Sys.Res.formatInvalidString)}else if(c===2&&b.charAt(0)==="%")b=b.charAt(1);return b};Date._expandYear=function(c,a){var d=new Date,e=Date._getEra(d);if(a<100){var b=Date._getEraYear(d,c,e);a+=b-b%100;if(a>c.Calendar.TwoDigitYearMax)a-=100}return a};Date._getEra=function(e,c){if(!c)return 0;var b,d=e.getTime();for(var a=0,f=c.length;a<f;a+=4){b=c[a+2];if(b===null||d>=b)return a}return 0};Date._getEraYear=function(d,b,e,c){var a=d.getFullYear();if(!c&&b.eras)a-=b.eras[e+3];return a};Date._getParseRegExp=function(b,e){if(!b._parseRegExp)b._parseRegExp={};else if(b._parseRegExp[e])return b._parseRegExp[e];var c=Date._expandFormat(b,e);c=c.replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");var a=new Sys.StringBuilder("^"),j=[],f=0,i=0,h=Date._getTokenRegExp(),d;while((d=h.exec(c))!==null){var l=c.slice(f,d.index);f=h.lastIndex;i+=Date._appendPreOrPostMatch(l,a);if(i%2===1){a.append(d[0]);continue}switch(d[0]){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":a.append("(\\D+)");break;case "tt":case "t":a.append("(\\D*)");break;case "yyyy":a.append("(\\d{4})");break;case "fff":a.append("(\\d{3})");break;case "ff":a.append("(\\d{2})");break;case "f":a.append("(\\d)");break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":a.append("(\\d\\d?)");break;case "zzz":a.append("([+-]?\\d\\d?:\\d{2})");break;case "zz":case "z":a.append("([+-]?\\d\\d?)");break;case "/":a.append("(\\"+b.DateSeparator+")")}Array.add(j,d[0])}Date._appendPreOrPostMatch(c.slice(f),a);a.append("$");var k=a.toString().replace(/\s+/g,"\\s+"),g={"regExp":k,"groups":j};b._parseRegExp[e]=g;return g};Date._getTokenRegExp=function(){return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};Date.parseLocale=function(a){return Date._parse(a,Sys.CultureInfo.CurrentCulture,arguments)};Date.parseInvariant=function(a){return Date._parse(a,Sys.CultureInfo.InvariantCulture,arguments)};Date._parse=function(h,d,i){var a,c,b,f,e,g=false;for(a=1,c=i.length;a<c;a++){f=i[a];if(f){g=true;b=Date._parseExact(h,f,d);if(b)return b}}if(!g){e=d._getDateTimeFormats();for(a=0,c=e.length;a<c;a++){b=Date._parseExact(h,e[a],d);if(b)return b}}return null};Date._parseExact=function(w,D,k){w=w.trim();var g=k.dateTimeFormat,A=Date._getParseRegExp(g,D),C=(new RegExp(A.regExp)).exec(w);if(C===null)return null;var B=A.groups,x=null,e=null,c=null,j=null,i=null,d=0,h,p=0,q=0,f=0,l=null,v=false;for(var s=0,E=B.length;s<E;s++){var a=C[s+1];if(a)switch(B[s]){case "dd":case "d":j=parseInt(a,10);if(j<1||j>31)return null;break;case "MMMM":c=k._getMonthIndex(a);if(c<0||c>11)return null;break;case "MMM":c=k._getAbbrMonthIndex(a);if(c<0||c>11)return null;break;case "M":case "MM":c=parseInt(a,10)-1;if(c<0||c>11)return null;break;case "y":case "yy":e=Date._expandYear(g,parseInt(a,10));if(e<0||e>9999)return null;break;case "yyyy":e=parseInt(a,10);if(e<0||e>9999)return null;break;case "h":case "hh":d=parseInt(a,10);if(d===12)d=0;if(d<0||d>11)return null;break;case "H":case "HH":d=parseInt(a,10);if(d<0||d>23)return null;break;case "m":case "mm":p=parseInt(a,10);if(p<0||p>59)return null;break;case "s":case "ss":q=parseInt(a,10);if(q<0||q>59)return null;break;case "tt":case "t":var z=a.toUpperCase();v=z===g.PMDesignator.toUpperCase();if(!v&&z!==g.AMDesignator.toUpperCase())return null;break;case "f":f=parseInt(a,10)*100;if(f<0||f>999)return null;break;case "ff":f=parseInt(a,10)*10;if(f<0||f>999)return null;break;case "fff":f=parseInt(a,10);if(f<0||f>999)return null;break;case "dddd":i=k._getDayIndex(a);if(i<0||i>6)return null;break;case "ddd":i=k._getAbbrDayIndex(a);if(i<0||i>6)return null;break;case "zzz":var u=a.split(/:/);if(u.length!==2)return null;h=parseInt(u[0],10);if(h<-12||h>13)return null;var m=parseInt(u[1],10);if(m<0||m>59)return null;l=h*60+(a.startsWith("-")?-m:m);break;case "z":case "zz":h=parseInt(a,10);if(h<-12||h>13)return null;l=h*60;break;case "g":case "gg":var o=a;if(!o||!g.eras)return null;o=o.toLowerCase().trim();for(var r=0,F=g.eras.length;r<F;r+=4)if(o===g.eras[r+1].toLowerCase()){x=r;break}if(x===null)return null}}var b=new Date,t,n=g.Calendar.convert;if(n)t=n.fromGregorian(b)[0];else t=b.getFullYear();if(e===null)e=t;else if(g.eras)e+=g.eras[(x||0)+3];if(c===null)c=0;if(j===null)j=1;if(n){b=n.toGregorian(e,c,j);if(b===null)return null}else{b.setFullYear(e,c,j);if(b.getDate()!==j)return null;if(i!==null&&b.getDay()!==i)return null}if(v&&d<12)d+=12;b.setHours(d,p,q,f);if(l!==null){var y=b.getMinutes()-(l+b.getTimezoneOffset());b.setHours(b.getHours()+parseInt(y/60,10),y%60)}return b};Date.prototype.format=function(a){return this._toFormattedString(a,Sys.CultureInfo.InvariantCulture)};Date.prototype.localeFormat=function(a){return this._toFormattedString(a,Sys.CultureInfo.CurrentCulture)};Date.prototype._toFormattedString=function(e,j){var b=j.dateTimeFormat,n=b.Calendar.convert;if(!e||!e.length||e==="i")if(j&&j.name.length)if(n)return this._toFormattedString(b.FullDateTimePattern,j);else{var r=new Date(this.getTime()),x=Date._getEra(this,b.eras);r.setFullYear(Date._getEraYear(this,b,x));return r.toLocaleString()}else return this.toString();var l=b.eras,k=e==="s";e=Date._expandFormat(b,e);var a=new Sys.StringBuilder,c;function d(a){if(a<10)return "0"+a;return a.toString()}function m(a){if(a<10)return "00"+a;if(a<100)return "0"+a;return a.toString()}function v(a){if(a<10)return "000"+a;else if(a<100)return "00"+a;else if(a<1000)return "0"+a;return a.toString()}var h,p,t=/([^d]|^)(d|dd)([^d]|$)/g;function s(){if(h||p)return h;h=t.test(e);p=true;return h}var q=0,o=Date._getTokenRegExp(),f;if(!k&&n)f=n.fromGregorian(this);for(;true;){var w=o.lastIndex,i=o.exec(e),u=e.slice(w,i?i.index:e.length);q+=Date._appendPreOrPostMatch(u,a);if(!i)break;if(q%2===1){a.append(i[0]);continue}function g(a,b){if(f)return f[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate()}}switch(i[0]){case "dddd":a.append(b.DayNames[this.getDay()]);break;case "ddd":a.append(b.AbbreviatedDayNames[this.getDay()]);break;case "dd":h=true;a.append(d(g(this,2)));break;case "d":h=true;a.append(g(this,2));break;case "MMMM":a.append(b.MonthGenitiveNames&&s()?b.MonthGenitiveNames[g(this,1)]:b.MonthNames[g(this,1)]);break;case "MMM":a.append(b.AbbreviatedMonthGenitiveNames&&s()?b.AbbreviatedMonthGenitiveNames[g(this,1)]:b.AbbreviatedMonthNames[g(this,1)]);break;case "MM":a.append(d(g(this,1)+1));break;case "M":a.append(g(this,1)+1);break;case "yyyy":a.append(v(f?f[0]:Date._getEraYear(this,b,Date._getEra(this,l),k)));break;case "yy":a.append(d((f?f[0]:Date._getEraYear(this,b,Date._getEra(this,l),k))%100));break;case "y":a.append((f?f[0]:Date._getEraYear(this,b,Date._getEra(this,l),k))%100);break;case "hh":c=this.getHours()%12;if(c===0)c=12;a.append(d(c));break;case "h":c=this.getHours()%12;if(c===0)c=12;a.append(c);break;case "HH":a.append(d(this.getHours()));break;case "H":a.append(this.getHours());break;case "mm":a.append(d(this.getMinutes()));break;case "m":a.append(this.getMinutes());break;case "ss":a.append(d(this.getSeconds()));break;case "s":a.append(this.getSeconds());break;case "tt":a.append(this.getHours()<12?b.AMDesignator:b.PMDesignator);break;case "t":a.append((this.getHours()<12?b.AMDesignator:b.PMDesignator).charAt(0));break;case "f":a.append(m(this.getMilliseconds()).charAt(0));break;case "ff":a.append(m(this.getMilliseconds()).substr(0,2));break;case "fff":a.append(m(this.getMilliseconds()));break;case "z":c=this.getTimezoneOffset()/60;a.append((c<=0?"+":"-")+Math.floor(Math.abs(c)));break;case "zz":c=this.getTimezoneOffset()/60;a.append((c<=0?"+":"-")+d(Math.floor(Math.abs(c))));break;case "zzz":c=this.getTimezoneOffset()/60;a.append((c<=0?"+":"-")+d(Math.floor(Math.abs(c)))+":"+d(Math.abs(this.getTimezoneOffset()%60)));break;case "g":case "gg":if(b.eras)a.append(b.eras[Date._getEra(this,l)+1]);break;case "/":a.append(b.DateSeparator)}}return a.toString()};String.localeFormat=function(){return String._toFormattedString(true,arguments)};Number.parseLocale=function(a){return Number._parse(a,Sys.CultureInfo.CurrentCulture)};Number.parseInvariant=function(a){return Number._parse(a,Sys.CultureInfo.InvariantCulture)};Number._parse=function(b,o){b=b.trim();if(b.match(/^[+-]?infinity$/i))return parseFloat(b);if(b.match(/^0x[a-f0-9]+$/i))return parseInt(b);var a=o.numberFormat,g=Number._parseNumberNegativePattern(b,a,a.NumberNegativePattern),h=g[0],e=g[1];if(h===""&&a.NumberNegativePattern!==1){g=Number._parseNumberNegativePattern(b,a,1);h=g[0];e=g[1]}if(h==="")h="+";var j,d,f=e.indexOf("e");if(f<0)f=e.indexOf("E");if(f<0){d=e;j=null}else{d=e.substr(0,f);j=e.substr(f+1)}var c,k,m=d.indexOf(a.NumberDecimalSeparator);if(m<0){c=d;k=null}else{c=d.substr(0,m);k=d.substr(m+a.NumberDecimalSeparator.length)}c=c.split(a.NumberGroupSeparator).join("");var n=a.NumberGroupSeparator.replace(/\u00A0/g," ");if(a.NumberGroupSeparator!==n)c=c.split(n).join("");var l=h+c;if(k!==null)l+="."+k;if(j!==null){var i=Number._parseNumberNegativePattern(j,a,1);if(i[0]==="")i[0]="+";l+="e"+i[0]+i[1]}if(l.match(/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/))return parseFloat(l);return Number.NaN};Number._parseNumberNegativePattern=function(a,d,e){var b=d.NegativeSign,c=d.PositiveSign;switch(e){case 4:b=" "+b;c=" "+c;case 3:if(a.endsWith(b))return ["-",a.substr(0,a.length-b.length)];else if(a.endsWith(c))return ["+",a.substr(0,a.length-c.length)];break;case 2:b+=" ";c+=" ";case 1:if(a.startsWith(b))return ["-",a.substr(b.length)];else if(a.startsWith(c))return ["+",a.substr(c.length)];break;case 0:if(a.startsWith("(")&&a.endsWith(")"))return ["-",a.substr(1,a.length-2)]}return ["",a]};Number.prototype.format=function(a){return this._toFormattedString(a,Sys.CultureInfo.InvariantCulture)};Number.prototype.localeFormat=function(a){return this._toFormattedString(a,Sys.CultureInfo.CurrentCulture)};Number.prototype._toFormattedString=function(e,j){if(!e||e.length===0||e==="i")if(j&&j.name.length>0)return this.toLocaleString();else return this.toString();var o=["n %","n%","%n"],n=["-n %","-n%","-%n"],p=["(n)","-n","- n","n-","n -"],m=["$n","n$","$ n","n $"],l=["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"];function g(a,c,d){for(var b=a.length;b<c;b++)a=d?"0"+a:a+"0";return a}function i(j,i,l,n,p){var h=l[0],k=1,o=Math.pow(10,i),m=Math.round(j*o)/o;if(!isFinite(m))m=j;j=m;var b=j.toString(),a="",c,e=b.split(/e/i);b=e[0];c=e.length>1?parseInt(e[1]):0;e=b.split(".");b=e[0];a=e.length>1?e[1]:"";var q;if(c>0){a=g(a,c,false);b+=a.slice(0,c);a=a.substr(c)}else if(c<0){c=-c;b=g(b,c+1,true);a=b.slice(-c,b.length)+a;b=b.slice(0,-c)}if(i>0){if(a.length>i)a=a.slice(0,i);else a=g(a,i,false);a=p+a}else a="";var d=b.length-1,f="";while(d>=0){if(h===0||h>d)if(f.length>0)return b.slice(0,d+1)+n+f+a;else return b.slice(0,d+1)+a;if(f.length>0)f=b.slice(d-h+1,d+1)+n+f;else f=b.slice(d-h+1,d+1);d-=h;if(k<l.length){h=l[k];k++}}return b.slice(0,d+1)+n+f+a}var a=j.numberFormat,d=Math.abs(this);if(!e)e="D";var b=-1;if(e.length>1)b=parseInt(e.slice(1),10);var c;switch(e.charAt(0)){case "d":case "D":c="n";if(b!==-1)d=g(""+d,b,true);if(this<0)d=-d;break;case "c":case "C":if(this<0)c=l[a.CurrencyNegativePattern];else c=m[a.CurrencyPositivePattern];if(b===-1)b=a.CurrencyDecimalDigits;d=i(Math.abs(this),b,a.CurrencyGroupSizes,a.CurrencyGroupSeparator,a.CurrencyDecimalSeparator);break;case "n":case "N":if(this<0)c=p[a.NumberNegativePattern];else c="n";if(b===-1)b=a.NumberDecimalDigits;d=i(Math.abs(this),b,a.NumberGroupSizes,a.NumberGroupSeparator,a.NumberDecimalSeparator);break;case "p":case "P":if(this<0)c=n[a.PercentNegativePattern];else c=o[a.PercentPositivePattern];if(b===-1)b=a.PercentDecimalDigits;d=i(Math.abs(this)*100,b,a.PercentGroupSizes,a.PercentGroupSeparator,a.PercentDecimalSeparator);break;default:throw Error.format(Sys.Res.formatBadFormatSpecifier)}var k=/n|\$|-|%/g,f="";for(;true;){var q=k.lastIndex,h=k.exec(c);f+=c.slice(q,h?h.index:c.length);if(!h)break;switch(h[0]){case "n":f+=d;break;case "$":f+=a.CurrencySymbol;break;case "-":if(/[1-9]/.test(d))f+=a.NegativeSign;break;case "%":f+=a.PercentSymbol}}return f};Sys.CultureInfo=function(c,b,a){this.name=c;this.numberFormat=b;this.dateTimeFormat=a};Sys.CultureInfo.prototype={_getDateTimeFormats:function(){if(!this._dateTimeFormats){var a=this.dateTimeFormat;this._dateTimeFormats=[a.MonthDayPattern,a.YearMonthPattern,a.ShortDatePattern,a.ShortTimePattern,a.LongDatePattern,a.LongTimePattern,a.FullDateTimePattern,a.RFC1123Pattern,a.SortableDateTimePattern,a.UniversalSortableDateTimePattern]}return this._dateTimeFormats},_getIndex:function(c,d,e){var b=this._toUpper(c),a=Array.indexOf(d,b);if(a===-1)a=Array.indexOf(e,b);return a},_getMonthIndex:function(a){if(!this._upperMonths){this._upperMonths=this._toUpperArray(this.dateTimeFormat.MonthNames);this._upperMonthsGenitive=this._toUpperArray(this.dateTimeFormat.MonthGenitiveNames)}return this._getIndex(a,this._upperMonths,this._upperMonthsGenitive)},_getAbbrMonthIndex:function(a){if(!this._upperAbbrMonths){this._upperAbbrMonths=this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames);this._upperAbbrMonthsGenitive=this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthGenitiveNames)}return this._getIndex(a,this._upperAbbrMonths,this._upperAbbrMonthsGenitive)},_getDayIndex:function(a){if(!this._upperDays)this._upperDays=this._toUpperArray(this.dateTimeFormat.DayNames);return Array.indexOf(this._upperDays,this._toUpper(a))},_getAbbrDayIndex:function(a){if(!this._upperAbbrDays)this._upperAbbrDays=this._toUpperArray(this.dateTimeFormat.AbbreviatedDayNames);return Array.indexOf(this._upperAbbrDays,this._toUpper(a))},_toUpperArray:function(c){var b=[];for(var a=0,d=c.length;a<d;a++)b[a]=this._toUpper(c[a]);return b},_toUpper:function(a){return a.split("\u00a0").join(" ").toUpperCase()}};Sys.CultureInfo.registerClass("Sys.CultureInfo");Sys.CultureInfo._parse=function(a){var b=a.dateTimeFormat;if(b&&!b.eras)b.eras=a.eras;return new Sys.CultureInfo(a.name,a.numberFormat,b)};Sys.CultureInfo.InvariantCulture=Sys.CultureInfo._parse({"name":"","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":".","IsReadOnly":true,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":",","CurrencySymbol":"\u00a4","NaNSymbol":"NaN","CurrencyNegativePattern":0,"NumberNegativePattern":1,"PercentPositivePattern":0,"PercentNegativePattern":0,"NegativeInfinitySymbol":"-Infinity","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":".","NumberGroupSeparator":",","CurrencyPositivePattern":0,"PositiveInfinitySymbol":"Infinity","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":".","PercentGroupSeparator":",","PercentSymbol":"%","PerMilleSymbol":"\u2030","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"AM","Calendar":{"MinSupportedDateTime":"@-62135568000000@","MaxSupportedDateTime":"@253402300799999@","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":true},"DateSeparator":"/","FirstDayOfWeek":0,"CalendarWeekRule":0,"FullDateTimePattern":"dddd, dd MMMM yyyy HH:mm:ss","LongDatePattern":"dddd, dd MMMM yyyy","LongTimePattern":"HH:mm:ss","MonthDayPattern":"MMMM dd","PMDesignator":"PM","RFC1123Pattern":"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'","ShortDatePattern":"MM/dd/yyyy","ShortTimePattern":"HH:mm","SortableDateTimePattern":"yyyy'-'MM'-'dd'T'HH':'mm':'ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy'-'MM'-'dd HH':'mm':'ss'Z'","YearMonthPattern":"yyyy MMMM","AbbreviatedDayNames":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"ShortestDayNames":["Su","Mo","Tu","We","Th","Fr","Sa"],"DayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"AbbreviatedMonthNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"IsReadOnly":true,"NativeCalendarName":"Gregorian Calendar","AbbreviatedMonthGenitiveNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthGenitiveNames":["January","February","March","April","May","June","July","August","September","October","November","December",""]},"eras":[1,"A.D.",null,0]});if(typeof __cultureInfo==="object"){Sys.CultureInfo.CurrentCulture=Sys.CultureInfo._parse(__cultureInfo);delete __cultureInfo}else Sys.CultureInfo.CurrentCulture=Sys.CultureInfo._parse({"name":"en-US","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":".","IsReadOnly":false,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":",","CurrencySymbol":"$","NaNSymbol":"NaN","CurrencyNegativePattern":0,"NumberNegativePattern":1,"PercentPositivePattern":0,"PercentNegativePattern":0,"NegativeInfinitySymbol":"-Infinity","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":".","NumberGroupSeparator":",","CurrencyPositivePattern":0,"PositiveInfinitySymbol":"Infinity","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":".","PercentGroupSeparator":",","PercentSymbol":"%","PerMilleSymbol":"\u2030","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"AM","Calendar":{"MinSupportedDateTime":"@-62135568000000@","MaxSupportedDateTime":"@253402300799999@","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":false},"DateSeparator":"/","FirstDayOfWeek":0,"CalendarWeekRule":0,"FullDateTimePattern":"dddd, MMMM dd, yyyy h:mm:ss tt","LongDatePattern":"dddd, MMMM dd, yyyy","LongTimePattern":"h:mm:ss tt","MonthDayPattern":"MMMM dd","PMDesignator":"PM","RFC1123Pattern":"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'","ShortDatePattern":"M/d/yyyy","ShortTimePattern":"h:mm tt","SortableDateTimePattern":"yyyy'-'MM'-'dd'T'HH':'mm':'ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy'-'MM'-'dd HH':'mm':'ss'Z'","YearMonthPattern":"MMMM, yyyy","AbbreviatedDayNames":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"ShortestDayNames":["Su","Mo","Tu","We","Th","Fr","Sa"],"DayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"AbbreviatedMonthNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"IsReadOnly":false,"NativeCalendarName":"Gregorian Calendar","AbbreviatedMonthGenitiveNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthGenitiveNames":["January","February","March","April","May","June","July","August","September","October","November","December",""]},"eras":[1,"A.D.",null,0]});Type.registerNamespace("Sys.Serialization");Sys.Serialization.JavaScriptSerializer=function(){};Sys.Serialization.JavaScriptSerializer.registerClass("Sys.Serialization.JavaScriptSerializer");Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs=[];Sys.Serialization.JavaScriptSerializer._charsToEscape=[];Sys.Serialization.JavaScriptSerializer._dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g");Sys.Serialization.JavaScriptSerializer._escapeChars={};Sys.Serialization.JavaScriptSerializer._escapeRegEx=new RegExp('["\\\\\\x00-\\x1F]',"i");Sys.Serialization.JavaScriptSerializer._escapeRegExGlobal=new RegExp('["\\\\\\x00-\\x1F]',"g");Sys.Serialization.JavaScriptSerializer._jsonRegEx=new RegExp("[^,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]","g");Sys.Serialization.JavaScriptSerializer._jsonStringRegEx=new RegExp('"(\\\\.|[^"\\\\])*"',"g");Sys.Serialization.JavaScriptSerializer._serverTypeFieldName="__type";Sys.Serialization.JavaScriptSerializer._init=function(){var c=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f"];Sys.Serialization.JavaScriptSerializer._charsToEscape[0]="\\";Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs["\\"]=new RegExp("\\\\","g");Sys.Serialization.JavaScriptSerializer._escapeChars["\\"]="\\\\";Sys.Serialization.JavaScriptSerializer._charsToEscape[1]='"';Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs['"']=new RegExp('"',"g");Sys.Serialization.JavaScriptSerializer._escapeChars['"']='\\"';for(var a=0;a<32;a++){var b=String.fromCharCode(a);Sys.Serialization.JavaScriptSerializer._charsToEscape[a+2]=b;Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs[b]=new RegExp(b,"g");Sys.Serialization.JavaScriptSerializer._escapeChars[b]=c[a]}};Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder=function(b,a){a.append(b.toString())};Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder=function(a,b){if(isFinite(a))b.append(String(a));else throw Error.invalidOperation(Sys.Res.cannotSerializeNonFiniteNumbers)};Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder=function(a,c){c.append('"');if(Sys.Serialization.JavaScriptSerializer._escapeRegEx.test(a)){if(Sys.Serialization.JavaScriptSerializer._charsToEscape.length===0)Sys.Serialization.JavaScriptSerializer._init();if(a.length<128)a=a.replace(Sys.Serialization.JavaScriptSerializer._escapeRegExGlobal,function(a){return Sys.Serialization.JavaScriptSerializer._escapeChars[a]});else for(var d=0;d<34;d++){var b=Sys.Serialization.JavaScriptSerializer._charsToEscape[d];if(a.indexOf(b)!==-1)if(Sys.Browser.agent===Sys.Browser.Opera||Sys.Browser.agent===Sys.Browser.FireFox)a=a.split(b).join(Sys.Serialization.JavaScriptSerializer._escapeChars[b]);else a=a.replace(Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs[b],Sys.Serialization.JavaScriptSerializer._escapeChars[b])}}c.append(a);c.append('"')};Sys.Serialization.JavaScriptSerializer._serializeWithBuilder=function(b,a,i,g){var c;switch(typeof b){case "object":if(b)if(Number.isInstanceOfType(b))Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(b,a);else if(Boolean.isInstanceOfType(b))Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(b,a);else if(String.isInstanceOfType(b))Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(b,a);else if(Array.isInstanceOfType(b)){a.append("[");for(c=0;c<b.length;++c){if(c>0)a.append(",");Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(b[c],a,false,g)}a.append("]")}else{if(Date.isInstanceOfType(b)){a.append('"\\/Date(');a.append(b.getTime());a.append(')\\/"');break}var d=[],f=0;for(var e in b){if(e.startsWith("$"))continue;if(e===Sys.Serialization.JavaScriptSerializer._serverTypeFieldName&&f!==0){d[f++]=d[0];d[0]=e}else d[f++]=e}if(i)d.sort();a.append("{");var j=false;for(c=0;c<f;c++){var h=b[d[c]];if(typeof h!=="undefined"&&typeof h!=="function"){if(j)a.append(",");else j=true;Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(d[c],a,i,g);a.append(":");Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(h,a,i,g)}}a.append("}")}else a.append("null");break;case "number":Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(b,a);break;case "string":Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(b,a);break;case "boolean":Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(b,a);break;default:a.append("null")}};Sys.Serialization.JavaScriptSerializer.serialize=function(b){var a=new Sys.StringBuilder;Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(b,a,false);return a.toString()};Sys.Serialization.JavaScriptSerializer.deserialize=function(data,secure){if(data.length===0)throw Error.argument("data",Sys.Res.cannotDeserializeEmptyString);try{var exp=data.replace(Sys.Serialization.JavaScriptSerializer._dateRegEx,"$1new Date($2)");if(secure&&Sys.Serialization.JavaScriptSerializer._jsonRegEx.test(exp.replace(Sys.Serialization.JavaScriptSerializer._jsonStringRegEx,"")))throw null;return eval("("+exp+")")}catch(a){throw Error.argument("data",Sys.Res.cannotDeserializeInvalidJson)}};Type.registerNamespace("Sys.UI");Sys.EventHandlerList=function(){this._list={}};Sys.EventHandlerList.prototype={_addHandler:function(b,a){Array.add(this._getEvent(b,true),a)},addHandler:function(b,a){this._addHandler(b,a)},_removeHandler:function(c,b){var a=this._getEvent(c);if(!a)return;Array.remove(a,b)},removeHandler:function(b,a){this._removeHandler(b,a)},getHandler:function(b){var a=this._getEvent(b);if(!a||a.length===0)return null;a=Array.clone(a);return function(c,d){for(var b=0,e=a.length;b<e;b++)a[b](c,d)}},_getEvent:function(a,b){if(!this._list[a]){if(!b)return null;this._list[a]=[]}return this._list[a]}};Sys.EventHandlerList.registerClass("Sys.EventHandlerList");Sys.CommandEventArgs=function(c,a,b){Sys.CommandEventArgs.initializeBase(this);this._commandName=c;this._commandArgument=a;this._commandSource=b};Sys.CommandEventArgs.prototype={_commandName:null,_commandArgument:null,_commandSource:null,get_commandName:function(){return this._commandName},get_commandArgument:function(){return this._commandArgument},get_commandSource:function(){return this._commandSource}};Sys.CommandEventArgs.registerClass("Sys.CommandEventArgs",Sys.CancelEventArgs);Sys.INotifyPropertyChange=function(){};Sys.INotifyPropertyChange.prototype={};Sys.INotifyPropertyChange.registerInterface("Sys.INotifyPropertyChange");Sys.PropertyChangedEventArgs=function(a){Sys.PropertyChangedEventArgs.initializeBase(this);this._propertyName=a};Sys.PropertyChangedEventArgs.prototype={get_propertyName:function(){return this._propertyName}};Sys.PropertyChangedEventArgs.registerClass("Sys.PropertyChangedEventArgs",Sys.EventArgs);Sys.INotifyDisposing=function(){};Sys.INotifyDisposing.prototype={};Sys.INotifyDisposing.registerInterface("Sys.INotifyDisposing");Sys.Component=function(){if(Sys.Application)Sys.Application.registerDisposableObject(this)};Sys.Component.prototype={_id:null,_initialized:false,_updating:false,get_events:function(){if(!this._events)this._events=new Sys.EventHandlerList;return this._events},get_id:function(){return this._id},set_id:function(a){this._id=a},get_isInitialized:function(){return this._initialized},get_isUpdating:function(){return this._updating},add_disposing:function(a){this.get_events().addHandler("disposing",a)},remove_disposing:function(a){this.get_events().removeHandler("disposing",a)},add_propertyChanged:function(a){this.get_events().addHandler("propertyChanged",a)},remove_propertyChanged:function(a){this.get_events().removeHandler("propertyChanged",a)},beginUpdate:function(){this._updating=true},dispose:function(){if(this._events){var a=this._events.getHandler("disposing");if(a)a(this,Sys.EventArgs.Empty)}delete this._events;Sys.Application.unregisterDisposableObject(this);Sys.Application.removeComponent(this)},endUpdate:function(){this._updating=false;if(!this._initialized)this.initialize();this.updated()},initialize:function(){this._initialized=true},raisePropertyChanged:function(b){if(!this._events)return;var a=this._events.getHandler("propertyChanged");if(a)a(this,new Sys.PropertyChangedEventArgs(b))},updated:function(){}};Sys.Component.registerClass("Sys.Component",null,Sys.IDisposable,Sys.INotifyPropertyChange,Sys.INotifyDisposing);function Sys$Component$_setProperties(a,i){var d,j=Object.getType(a),e=j===Object||j===Sys.UI.DomElement,h=Sys.Component.isInstanceOfType(a)&&!a.get_isUpdating();if(h)a.beginUpdate();for(var c in i){var b=i[c],f=e?null:a["get_"+c];if(e||typeof f!=="function"){var k=a[c];if(!b||typeof b!=="object"||e&&!k)a[c]=b;else Sys$Component$_setProperties(k,b)}else{var l=a["set_"+c];if(typeof l==="function")l.apply(a,[b]);else if(b instanceof Array){d=f.apply(a);for(var g=0,m=d.length,n=b.length;g<n;g++,m++)d[m]=b[g]}else if(typeof b==="object"&&Object.getType(b)===Object){d=f.apply(a);Sys$Component$_setProperties(d,b)}}}if(h)a.endUpdate()}function Sys$Component$_setReferences(c,b){for(var a in b){var e=c["set_"+a],d=$find(b[a]);e.apply(c,[d])}}var $create=Sys.Component.create=function(h,f,d,c,g){var a=g?new h(g):new h,b=Sys.Application,i=b.get_isCreatingComponents();a.beginUpdate();if(f)Sys$Component$_setProperties(a,f);if(d)for(var e in d)a["add_"+e](d[e]);if(a.get_id())b.addComponent(a);if(i){b._createdComponents[b._createdComponents.length]=a;if(c)b._addComponentToSecondPass(a,c);else a.endUpdate()}else{if(c)Sys$Component$_setReferences(a,c);a.endUpdate()}return a};Sys.UI.MouseButton=function(){throw Error.notImplemented()};Sys.UI.MouseButton.prototype={leftButton:0,middleButton:1,rightButton:2};Sys.UI.MouseButton.registerEnum("Sys.UI.MouseButton");Sys.UI.Key=function(){throw Error.notImplemented()};Sys.UI.Key.prototype={backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:127};Sys.UI.Key.registerEnum("Sys.UI.Key");Sys.UI.Point=function(a,b){this.rawX=a;this.rawY=b;this.x=Math.round(a);this.y=Math.round(b)};Sys.UI.Point.registerClass("Sys.UI.Point");Sys.UI.Bounds=function(c,d,b,a){this.x=c;this.y=d;this.height=a;this.width=b};Sys.UI.Bounds.registerClass("Sys.UI.Bounds");Sys.UI.DomEvent=function(e){var a=e,b=this.type=a.type.toLowerCase();this.rawEvent=a;this.altKey=a.altKey;if(typeof a.button!=="undefined")this.button=typeof a.which!=="undefined"?a.button:a.button===4?Sys.UI.MouseButton.middleButton:a.button===2?Sys.UI.MouseButton.rightButton:Sys.UI.MouseButton.leftButton;if(b==="keypress")this.charCode=a.charCode||a.keyCode;else if(a.keyCode&&a.keyCode===46)this.keyCode=127;else this.keyCode=a.keyCode;this.clientX=a.clientX;this.clientY=a.clientY;this.ctrlKey=a.ctrlKey;this.target=a.target?a.target:a.srcElement;if(!b.startsWith("key"))if(typeof a.offsetX!=="undefined"&&typeof a.offsetY!=="undefined"){this.offsetX=a.offsetX;this.offsetY=a.offsetY}else if(this.target&&this.target.nodeType!==3&&typeof a.clientX==="number"){var c=Sys.UI.DomElement.getLocation(this.target),d=Sys.UI.DomElement._getWindow(this.target);this.offsetX=(d.pageXOffset||0)+a.clientX-c.x;this.offsetY=(d.pageYOffset||0)+a.clientY-c.y}this.screenX=a.screenX;this.screenY=a.screenY;this.shiftKey=a.shiftKey};Sys.UI.DomEvent.prototype={preventDefault:function(){if(this.rawEvent.preventDefault)this.rawEvent.preventDefault();else if(window.event)this.rawEvent.returnValue=false},stopPropagation:function(){if(this.rawEvent.stopPropagation)this.rawEvent.stopPropagation();else if(window.event)this.rawEvent.cancelBubble=true}};Sys.UI.DomEvent.registerClass("Sys.UI.DomEvent");var $addHandler=Sys.UI.DomEvent.addHandler=function(a,d,e,g){if(!a._events)a._events={};var c=a._events[d];if(!c)a._events[d]=c=[];var b;if(a.addEventListener){b=function(b){return e.call(a,new Sys.UI.DomEvent(b))};a.addEventListener(d,b,false)}else if(a.attachEvent){b=function(){var b={};try{b=Sys.UI.DomElement._getWindow(a).event}catch(c){}return e.call(a,new Sys.UI.DomEvent(b))};a.attachEvent("on"+d,b)}c[c.length]={handler:e,browserHandler:b,autoRemove:g};if(g){var f=a.dispose;if(f!==Sys.UI.DomEvent._disposeHandlers){a.dispose=Sys.UI.DomEvent._disposeHandlers;if(typeof f!=="undefined")a._chainDispose=f}}},$addHandlers=Sys.UI.DomEvent.addHandlers=function(f,d,c,e){for(var b in d){var a=d[b];if(c)a=Function.createDelegate(c,a);$addHandler(f,b,a,e||false)}},$clearHandlers=Sys.UI.DomEvent.clearHandlers=function(a){Sys.UI.DomEvent._clearHandlers(a,false)};Sys.UI.DomEvent._clearHandlers=function(a,g){if(a._events){var e=a._events;for(var b in e){var d=e[b];for(var c=d.length-1;c>=0;c--){var f=d[c];if(!g||f.autoRemove)$removeHandler(a,b,f.handler)}}a._events=null}};Sys.UI.DomEvent._disposeHandlers=function(){Sys.UI.DomEvent._clearHandlers(this,true);var b=this._chainDispose,a=typeof b;if(a!=="undefined"){this.dispose=b;this._chainDispose=null;if(a==="function")this.dispose()}};var $removeHandler=Sys.UI.DomEvent.removeHandler=function(b,a,c){Sys.UI.DomEvent._removeHandler(b,a,c)};Sys.UI.DomEvent._removeHandler=function(a,e,f){var d=null,c=a._events[e];for(var b=0,g=c.length;b<g;b++)if(c[b].handler===f){d=c[b].browserHandler;break}if(a.removeEventListener)a.removeEventListener(e,d,false);else if(a.detachEvent)a.detachEvent("on"+e,d);c.splice(b,1)};Sys.UI.DomElement=function(){};Sys.UI.DomElement.registerClass("Sys.UI.DomElement");Sys.UI.DomElement.addCssClass=function(a,b){if(!Sys.UI.DomElement.containsCssClass(a,b))if(a.className==="")a.className=b;else a.className+=" "+b};Sys.UI.DomElement.containsCssClass=function(b,a){return Array.contains(b.className.split(" "),a)};Sys.UI.DomElement.getBounds=function(a){var b=Sys.UI.DomElement.getLocation(a);return new Sys.UI.Bounds(b.x,b.y,a.offsetWidth||0,a.offsetHeight||0)};var $get=Sys.UI.DomElement.getElementById=function(f,e){if(!e)return document.getElementById(f);if(e.getElementById)return e.getElementById(f);var c=[],d=e.childNodes;for(var b=0;b<d.length;b++){var a=d[b];if(a.nodeType==1)c[c.length]=a}while(c.length){a=c.shift();if(a.id==f)return a;d=a.childNodes;for(b=0;b<d.length;b++){a=d[b];if(a.nodeType==1)c[c.length]=a}}return null};if(document.documentElement.getBoundingClientRect)Sys.UI.DomElement.getLocation=function(a){if(a.self||a.nodeType===9||a===document.documentElement||a.parentNode===a.ownerDocument.documentElement)return new Sys.UI.Point(0,0);var f=a.getBoundingClientRect();if(!f)return new Sys.UI.Point(0,0);var e=a.ownerDocument.documentElement,h=a.ownerDocument.body,l,c=Math.round(f.left)+(e.scrollLeft||h.scrollLeft),d=Math.round(f.top)+(e.scrollTop||h.scrollTop);if(Sys.Browser.agent===Sys.Browser.InternetExplorer){try{var g=a.ownerDocument.parentWindow.frameElement||null;if(g){var i=g.frameBorder==="0"||g.frameBorder==="no"?2:0;c+=i;d+=i}}catch(m){}if(Sys.Browser.version===7&&!document.documentMode){var j=document.body,k=j.getBoundingClientRect(),b=(k.right-k.left)/j.clientWidth;b=Math.round(b*100);b=(b-b%5)/100;if(!isNaN(b)&&b!==1){c=Math.round(c/b);d=Math.round(d/b)}}if((document.documentMode||0)<8){c-=e.clientLeft;d-=e.clientTop}}return new Sys.UI.Point(c,d)};else if(Sys.Browser.agent===Sys.Browser.Safari)Sys.UI.DomElement.getLocation=function(c){if(c.window&&c.window===c||c.nodeType===9)return new Sys.UI.Point(0,0);var d=0,e=0,a,j=null,g=null,b;for(a=c;a;j=a,(g=b,a=a.offsetParent)){b=Sys.UI.DomElement._getCurrentStyle(a);var f=a.tagName?a.tagName.toUpperCase():null;if((a.offsetLeft||a.offsetTop)&&(f!=="BODY"||(!g||g.position!=="absolute"))){d+=a.offsetLeft;e+=a.offsetTop}if(j&&Sys.Browser.version>=3){d+=parseInt(b.borderLeftWidth);e+=parseInt(b.borderTopWidth)}}b=Sys.UI.DomElement._getCurrentStyle(c);var h=b?b.position:null;if(!h||h!=="absolute")for(a=c.parentNode;a;a=a.parentNode){f=a.tagName?a.tagName.toUpperCase():null;if(f!=="BODY"&&f!=="HTML"&&(a.scrollLeft||a.scrollTop)){d-=a.scrollLeft||0;e-=a.scrollTop||0}b=Sys.UI.DomElement._getCurrentStyle(a);var i=b?b.position:null;if(i&&i==="absolute")break}return new Sys.UI.Point(d,e)};else Sys.UI.DomElement.getLocation=function(d){if(d.window&&d.window===d||d.nodeType===9)return new Sys.UI.Point(0,0);var e=0,f=0,a,i=null,g=null,b=null;for(a=d;a;i=a,(g=b,a=a.offsetParent)){var c=a.tagName?a.tagName.toUpperCase():null;b=Sys.UI.DomElement._getCurrentStyle(a);if((a.offsetLeft||a.offsetTop)&&!(c==="BODY"&&(!g||g.position!=="absolute"))){e+=a.offsetLeft;f+=a.offsetTop}if(i!==null&&b){if(c!=="TABLE"&&c!=="TD"&&c!=="HTML"){e+=parseInt(b.borderLeftWidth)||0;f+=parseInt(b.borderTopWidth)||0}if(c==="TABLE"&&(b.position==="relative"||b.position==="absolute")){e+=parseInt(b.marginLeft)||0;f+=parseInt(b.marginTop)||0}}}b=Sys.UI.DomElement._getCurrentStyle(d);var h=b?b.position:null;if(!h||h!=="absolute")for(a=d.parentNode;a;a=a.parentNode){c=a.tagName?a.tagName.toUpperCase():null;if(c!=="BODY"&&c!=="HTML"&&(a.scrollLeft||a.scrollTop)){e-=a.scrollLeft||0;f-=a.scrollTop||0;b=Sys.UI.DomElement._getCurrentStyle(a);if(b){e+=parseInt(b.borderLeftWidth)||0;f+=parseInt(b.borderTopWidth)||0}}}return new Sys.UI.Point(e,f)};Sys.UI.DomElement.isDomElement=function(a){return Sys._isDomElement(a)};Sys.UI.DomElement.removeCssClass=function(d,c){var a=" "+d.className+" ",b=a.indexOf(" "+c+" ");if(b>=0)d.className=(a.substr(0,b)+" "+a.substring(b+c.length+1,a.length)).trim()};Sys.UI.DomElement.resolveElement=function(b,c){var a=b;if(!a)return null;if(typeof a==="string")a=Sys.UI.DomElement.getElementById(a,c);return a};Sys.UI.DomElement.raiseBubbleEvent=function(c,d){var b=c;while(b){var a=b.control;if(a&&a.onBubbleEvent&&a.raiseBubbleEvent){Sys.UI.DomElement._raiseBubbleEventFromControl(a,c,d);return}b=b.parentNode}};Sys.UI.DomElement._raiseBubbleEventFromControl=function(a,b,c){if(!a.onBubbleEvent(b,c))a._raiseBubbleEvent(b,c)};Sys.UI.DomElement.setLocation=function(b,c,d){var a=b.style;a.position="absolute";a.left=c+"px";a.top=d+"px"};Sys.UI.DomElement.toggleCssClass=function(b,a){if(Sys.UI.DomElement.containsCssClass(b,a))Sys.UI.DomElement.removeCssClass(b,a);else Sys.UI.DomElement.addCssClass(b,a)};Sys.UI.DomElement.getVisibilityMode=function(a){return a._visibilityMode===Sys.UI.VisibilityMode.hide?Sys.UI.VisibilityMode.hide:Sys.UI.VisibilityMode.collapse};Sys.UI.DomElement.setVisibilityMode=function(a,b){Sys.UI.DomElement._ensureOldDisplayMode(a);if(a._visibilityMode!==b){a._visibilityMode=b;if(Sys.UI.DomElement.getVisible(a)===false)if(a._visibilityMode===Sys.UI.VisibilityMode.hide)a.style.display=a._oldDisplayMode;else a.style.display="none";a._visibilityMode=b}};Sys.UI.DomElement.getVisible=function(b){var a=b.currentStyle||Sys.UI.DomElement._getCurrentStyle(b);if(!a)return true;return a.visibility!=="hidden"&&a.display!=="none"};Sys.UI.DomElement.setVisible=function(a,b){if(b!==Sys.UI.DomElement.getVisible(a)){Sys.UI.DomElement._ensureOldDisplayMode(a);a.style.visibility=b?"visible":"hidden";if(b||a._visibilityMode===Sys.UI.VisibilityMode.hide)a.style.display=a._oldDisplayMode;else a.style.display="none"}};Sys.UI.DomElement._ensureOldDisplayMode=function(a){if(!a._oldDisplayMode){var b=a.currentStyle||Sys.UI.DomElement._getCurrentStyle(a);a._oldDisplayMode=b?b.display:null;if(!a._oldDisplayMode||a._oldDisplayMode==="none")switch(a.tagName.toUpperCase()){case "DIV":case "P":case "ADDRESS":case "BLOCKQUOTE":case "BODY":case "COL":case "COLGROUP":case "DD":case "DL":case "DT":case "FIELDSET":case "FORM":case "H1":case "H2":case "H3":case "H4":case "H5":case "H6":case "HR":case "IFRAME":case "LEGEND":case "OL":case "PRE":case "TABLE":case "TD":case "TH":case "TR":case "UL":a._oldDisplayMode="block";break;case "LI":a._oldDisplayMode="list-item";break;default:a._oldDisplayMode="inline"}}};Sys.UI.DomElement._getWindow=function(a){var b=a.ownerDocument||a.document||a;return b.defaultView||b.parentWindow};Sys.UI.DomElement._getCurrentStyle=function(a){if(a.nodeType===3)return null;var c=Sys.UI.DomElement._getWindow(a);if(a.documentElement)a=a.documentElement;var b=c&&a!==c&&c.getComputedStyle?c.getComputedStyle(a,null):a.currentStyle||a.style;if(!b&&Sys.Browser.agent===Sys.Browser.Safari&&a.style){var g=a.style.display,f=a.style.position;a.style.position="absolute";a.style.display="block";var e=c.getComputedStyle(a,null);a.style.display=g;a.style.position=f;b={};for(var d in e)b[d]=e[d];b.display="none"}return b};Sys.IContainer=function(){};Sys.IContainer.prototype={};Sys.IContainer.registerInterface("Sys.IContainer");Sys.ApplicationLoadEventArgs=function(b,a){Sys.ApplicationLoadEventArgs.initializeBase(this);this._components=b;this._isPartialLoad=a};Sys.ApplicationLoadEventArgs.prototype={get_components:function(){return this._components},get_isPartialLoad:function(){return this._isPartialLoad}};Sys.ApplicationLoadEventArgs.registerClass("Sys.ApplicationLoadEventArgs",Sys.EventArgs);Sys._Application=function(){Sys._Application.initializeBase(this);this._disposableObjects=[];this._components={};this._createdComponents=[];this._secondPassComponents=[];this._unloadHandlerDelegate=Function.createDelegate(this,this._unloadHandler);Sys.UI.DomEvent.addHandler(window,"unload",this._unloadHandlerDelegate);this._domReady()};Sys._Application.prototype={_creatingComponents:false,_disposing:false,_deleteCount:0,get_isCreatingComponents:function(){return this._creatingComponents},get_isDisposing:function(){return this._disposing},add_init:function(a){if(this._initialized)a(this,Sys.EventArgs.Empty);else this.get_events().addHandler("init",a)},remove_init:function(a){this.get_events().removeHandler("init",a)},add_load:function(a){this.get_events().addHandler("load",a)},remove_load:function(a){this.get_events().removeHandler("load",a)},add_unload:function(a){this.get_events().addHandler("unload",a)},remove_unload:function(a){this.get_events().removeHandler("unload",a)},addComponent:function(a){this._components[a.get_id()]=a},beginCreateComponents:function(){this._creatingComponents=true},dispose:function(){if(!this._disposing){this._disposing=true;if(this._timerCookie){window.clearTimeout(this._timerCookie);delete this._timerCookie}if(this._endRequestHandler){Sys.WebForms.PageRequestManager.getInstance().remove_endRequest(this._endRequestHandler);delete this._endRequestHandler}if(this._beginRequestHandler){Sys.WebForms.PageRequestManager.getInstance().remove_beginRequest(this._beginRequestHandler);delete this._beginRequestHandler}if(window.pageUnload)window.pageUnload(this,Sys.EventArgs.Empty);var c=this.get_events().getHandler("unload");if(c)c(this,Sys.EventArgs.Empty);var b=Array.clone(this._disposableObjects);for(var a=0,f=b.length;a<f;a++){var d=b[a];if(typeof d!=="undefined")d.dispose()}Array.clear(this._disposableObjects);Sys.UI.DomEvent.removeHandler(window,"unload",this._unloadHandlerDelegate);if(Sys._ScriptLoader){var e=Sys._ScriptLoader.getInstance();if(e)e.dispose()}Sys._Application.callBaseMethod(this,"dispose")}},disposeElement:function(c,j){if(c.nodeType===1){var b,h=c.getElementsByTagName("*"),g=h.length,i=new Array(g);for(b=0;b<g;b++)i[b]=h[b];for(b=g-1;b>=0;b--){var d=i[b],f=d.dispose;if(f&&typeof f==="function")d.dispose();else{var e=d.control;if(e&&typeof e.dispose==="function")e.dispose()}var a=d._behaviors;if(a)this._disposeComponents(a);a=d._components;if(a){this._disposeComponents(a);d._components=null}}if(!j){var f=c.dispose;if(f&&typeof f==="function")c.dispose();else{var e=c.control;if(e&&typeof e.dispose==="function")e.dispose()}var a=c._behaviors;if(a)this._disposeComponents(a);a=c._components;if(a){this._disposeComponents(a);c._components=null}}}},endCreateComponents:function(){var b=this._secondPassComponents;for(var a=0,d=b.length;a<d;a++){var c=b[a].component;Sys$Component$_setReferences(c,b[a].references);c.endUpdate()}this._secondPassComponents=[];this._creatingComponents=false},findComponent:function(b,a){return a?Sys.IContainer.isInstanceOfType(a)?a.findComponent(b):a[b]||null:Sys.Application._components[b]||null},getComponents:function(){var a=[],b=this._components;for(var c in b)a[a.length]=b[c];return a},initialize:function(){if(!this.get_isInitialized()&&!this._disposing){Sys._Application.callBaseMethod(this,"initialize");this._raiseInit();if(this.get_stateString){if(Sys.WebForms&&Sys.WebForms.PageRequestManager){this._beginRequestHandler=Function.createDelegate(this,this._onPageRequestManagerBeginRequest);Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(this._beginRequestHandler);this._endRequestHandler=Function.createDelegate(this,this._onPageRequestManagerEndRequest);Sys.WebForms.PageRequestManager.getInstance().add_endRequest(this._endRequestHandler)}var a=this.get_stateString();if(a!==this._currentEntry)this._navigate(a);else this._ensureHistory()}this.raiseLoad()}},notifyScriptLoaded:function(){},registerDisposableObject:function(b){if(!this._disposing){var a=this._disposableObjects,c=a.length;a[c]=b;b.__msdisposeindex=c}},raiseLoad:function(){var b=this.get_events().getHandler("load"),a=new Sys.ApplicationLoadEventArgs(Array.clone(this._createdComponents),!!this._loaded);this._loaded=true;if(b)b(this,a);if(window.pageLoad)window.pageLoad(this,a);this._createdComponents=[]},removeComponent:function(b){var a=b.get_id();if(a)delete this._components[a]},unregisterDisposableObject:function(a){if(!this._disposing){var e=a.__msdisposeindex;if(typeof e==="number"){var b=this._disposableObjects;delete b[e];delete a.__msdisposeindex;if(++this._deleteCount>1000){var c=[];for(var d=0,f=b.length;d<f;d++){a=b[d];if(typeof a!=="undefined"){a.__msdisposeindex=c.length;c.push(a)}}this._disposableObjects=c;this._deleteCount=0}}}},_addComponentToSecondPass:function(b,a){this._secondPassComponents[this._secondPassComponents.length]={component:b,references:a}},_disposeComponents:function(a){if(a)for(var b=a.length-1;b>=0;b--){var c=a[b];if(typeof c.dispose==="function")c.dispose()}},_domReady:function(){var a,g,f=this;function b(){f.initialize()}var c=function(){Sys.UI.DomEvent.removeHandler(window,"load",c);b()};Sys.UI.DomEvent.addHandler(window,"load",c);if(document.addEventListener)try{document.addEventListener("DOMContentLoaded",a=function(){document.removeEventListener("DOMContentLoaded",a,false);b()},false)}catch(h){}else if(document.attachEvent)if(window==window.top&&document.documentElement.doScroll){var e,d=document.createElement("div");a=function(){try{d.doScroll("left")}catch(c){e=window.setTimeout(a,0);return}d=null;b()};a()}else document.attachEvent("onreadystatechange",a=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",a);b()}})},_raiseInit:function(){var a=this.get_events().getHandler("init");if(a){this.beginCreateComponents();a(this,Sys.EventArgs.Empty);this.endCreateComponents()}},_unloadHandler:function(){this.dispose()}};Sys._Application.registerClass("Sys._Application",Sys.Component,Sys.IContainer);Sys.Application=new Sys._Application;var $find=Sys.Application.findComponent;Sys.UI.Behavior=function(b){Sys.UI.Behavior.initializeBase(this);this._element=b;var a=b._behaviors;if(!a)b._behaviors=[this];else a[a.length]=this};Sys.UI.Behavior.prototype={_name:null,get_element:function(){return this._element},get_id:function(){var a=Sys.UI.Behavior.callBaseMethod(this,"get_id");if(a)return a;if(!this._element||!this._element.id)return "";return this._element.id+"$"+this.get_name()},get_name:function(){if(this._name)return this._name;var a=Object.getTypeName(this),b=a.lastIndexOf(".");if(b!==-1)a=a.substr(b+1);if(!this.get_isInitialized())this._name=a;return a},set_name:function(a){this._name=a},initialize:function(){Sys.UI.Behavior.callBaseMethod(this,"initialize");var a=this.get_name();if(a)this._element[a]=this},dispose:function(){Sys.UI.Behavior.callBaseMethod(this,"dispose");var a=this._element;if(a){var c=this.get_name();if(c)a[c]=null;var b=a._behaviors;Array.remove(b,this);if(b.length===0)a._behaviors=null;delete this._element}}};Sys.UI.Behavior.registerClass("Sys.UI.Behavior",Sys.Component);Sys.UI.Behavior.getBehaviorByName=function(b,c){var a=b[c];return a&&Sys.UI.Behavior.isInstanceOfType(a)?a:null};Sys.UI.Behavior.getBehaviors=function(a){if(!a._behaviors)return [];return Array.clone(a._behaviors)};Sys.UI.Behavior.getBehaviorsByType=function(d,e){var a=d._behaviors,c=[];if(a)for(var b=0,f=a.length;b<f;b++)if(e.isInstanceOfType(a[b]))c[c.length]=a[b];return c};Sys.UI.VisibilityMode=function(){throw Error.notImplemented()};Sys.UI.VisibilityMode.prototype={hide:0,collapse:1};Sys.UI.VisibilityMode.registerEnum("Sys.UI.VisibilityMode");Sys.UI.Control=function(a){Sys.UI.Control.initializeBase(this);this._element=a;a.control=this;var b=this.get_role();if(b)a.setAttribute("role",b)};Sys.UI.Control.prototype={_parent:null,_visibilityMode:Sys.UI.VisibilityMode.hide,get_element:function(){return this._element},get_id:function(){if(!this._element)return "";return this._element.id},set_id:function(){throw Error.invalidOperation(Sys.Res.cantSetId)},get_parent:function(){if(this._parent)return this._parent;if(!this._element)return null;var a=this._element.parentNode;while(a){if(a.control)return a.control;a=a.parentNode}return null},set_parent:function(a){this._parent=a},get_role:function(){return null},get_visibilityMode:function(){return Sys.UI.DomElement.getVisibilityMode(this._element)},set_visibilityMode:function(a){Sys.UI.DomElement.setVisibilityMode(this._element,a)},get_visible:function(){return Sys.UI.DomElement.getVisible(this._element)},set_visible:function(a){Sys.UI.DomElement.setVisible(this._element,a)},addCssClass:function(a){Sys.UI.DomElement.addCssClass(this._element,a)},dispose:function(){Sys.UI.Control.callBaseMethod(this,"dispose");if(this._element){this._element.control=null;delete this._element}if(this._parent)delete this._parent},onBubbleEvent:function(){return false},raiseBubbleEvent:function(a,b){this._raiseBubbleEvent(a,b)},_raiseBubbleEvent:function(b,c){var a=this.get_parent();while(a){if(a.onBubbleEvent(b,c))return;a=a.get_parent()}},removeCssClass:function(a){Sys.UI.DomElement.removeCssClass(this._element,a)},toggleCssClass:function(a){Sys.UI.DomElement.toggleCssClass(this._element,a)}};Sys.UI.Control.registerClass("Sys.UI.Control",Sys.Component);Sys.HistoryEventArgs=function(a){Sys.HistoryEventArgs.initializeBase(this);this._state=a};Sys.HistoryEventArgs.prototype={get_state:function(){return this._state}};Sys.HistoryEventArgs.registerClass("Sys.HistoryEventArgs",Sys.EventArgs);Sys.Application._appLoadHandler=null;Sys.Application._beginRequestHandler=null;Sys.Application._clientId=null;Sys.Application._currentEntry="";Sys.Application._endRequestHandler=null;Sys.Application._history=null;Sys.Application._enableHistory=false;Sys.Application._historyFrame=null;Sys.Application._historyInitialized=false;Sys.Application._historyPointIsNew=false;Sys.Application._ignoreTimer=false;Sys.Application._initialState=null;Sys.Application._state={};Sys.Application._timerCookie=0;Sys.Application._timerHandler=null;Sys.Application._uniqueId=null;Sys._Application.prototype.get_stateString=function(){var a=null;if(Sys.Browser.agent===Sys.Browser.Firefox){var c=window.location.href,b=c.indexOf("#");if(b!==-1)a=c.substring(b+1);else a="";return a}else a=window.location.hash;if(a.length>0&&a.charAt(0)==="#")a=a.substring(1);return a};Sys._Application.prototype.get_enableHistory=function(){return this._enableHistory};Sys._Application.prototype.set_enableHistory=function(a){this._enableHistory=a};Sys._Application.prototype.add_navigate=function(a){this.get_events().addHandler("navigate",a)};Sys._Application.prototype.remove_navigate=function(a){this.get_events().removeHandler("navigate",a)};Sys._Application.prototype.addHistoryPoint=function(c,f){this._ensureHistory();var b=this._state;for(var a in c){var d=c[a];if(d===null){if(typeof b[a]!=="undefined")delete b[a]}else b[a]=d}var e=this._serializeState(b);this._historyPointIsNew=true;this._setState(e,f);this._raiseNavigate()};Sys._Application.prototype.setServerId=function(a,b){this._clientId=a;this._uniqueId=b};Sys._Application.prototype.setServerState=function(a){this._ensureHistory();this._state.__s=a;this._updateHiddenField(a)};Sys._Application.prototype._deserializeState=function(a){var e={};a=a||"";var b=a.indexOf("&&");if(b!==-1&&b+2<a.length){e.__s=a.substr(b+2);a=a.substr(0,b)}var g=a.split("&");for(var f=0,j=g.length;f<j;f++){var d=g[f],c=d.indexOf("=");if(c!==-1&&c+1<d.length){var i=d.substr(0,c),h=d.substr(c+1);e[i]=decodeURIComponent(h)}}return e};Sys._Application.prototype._enableHistoryInScriptManager=function(){this._enableHistory=true};Sys._Application.prototype._ensureHistory=function(){if(!this._historyInitialized&&this._enableHistory){if(Sys.Browser.agent===Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode<8)){this._historyFrame=document.getElementById("__historyFrame");this._ignoreIFrame=true}this._timerHandler=Function.createDelegate(this,this._onIdle);this._timerCookie=window.setTimeout(this._timerHandler,100);try{this._initialState=this._deserializeState(this.get_stateString())}catch(a){}this._historyInitialized=true}};Sys._Application.prototype._navigate=function(c){this._ensureHistory();var b=this._deserializeState(c);if(this._uniqueId){var d=this._state.__s||"",a=b.__s||"";if(a!==d){this._updateHiddenField(a);__doPostBack(this._uniqueId,a);this._state=b;return}}this._setState(c);this._state=b;this._raiseNavigate()};Sys._Application.prototype._onIdle=function(){delete this._timerCookie;var a=this.get_stateString();if(a!==this._currentEntry){if(!this._ignoreTimer){this._historyPointIsNew=false;this._navigate(a)}}else this._ignoreTimer=false;this._timerCookie=window.setTimeout(this._timerHandler,100)};Sys._Application.prototype._onIFrameLoad=function(a){if(!document.documentMode||document.documentMode<8){this._ensureHistory();if(!this._ignoreIFrame){this._historyPointIsNew=false;this._navigate(a)}this._ignoreIFrame=false}};Sys._Application.prototype._onPageRequestManagerBeginRequest=function(){this._ignoreTimer=true;this._originalTitle=document.title};Sys._Application.prototype._onPageRequestManagerEndRequest=function(g,f){var d=f.get_dataItems()[this._clientId],c=this._originalTitle;this._originalTitle=null;var b=document.getElementById("__EVENTTARGET");if(b&&b.value===this._uniqueId)b.value="";if(typeof d!=="undefined"){this.setServerState(d);this._historyPointIsNew=true}else this._ignoreTimer=false;var a=this._serializeState(this._state);if(a!==this._currentEntry){this._ignoreTimer=true;if(typeof c==="string"){if(Sys.Browser.agent!==Sys.Browser.InternetExplorer||Sys.Browser.version>7){var e=document.title;document.title=c;this._setState(a);document.title=e}else this._setState(a);this._raiseNavigate()}else{this._setState(a);this._raiseNavigate()}}};Sys._Application.prototype._raiseNavigate=function(){var d=this._historyPointIsNew,c=this.get_events().getHandler("navigate"),b={};for(var a in this._state)if(a!=="__s")b[a]=this._state[a];var e=new Sys.HistoryEventArgs(b);if(c)c(this,e);if(!d){var f;try{if(Sys.Browser.agent===Sys.Browser.Firefox&&window.location.hash&&(!window.frameElement||window.top.location.hash))Sys.Browser.version<3.5?window.history.go(0):(location.hash=this.get_stateString())}catch(g){}}};Sys._Application.prototype._serializeState=function(d){var b=[];for(var a in d){var e=d[a];if(a==="__s")var c=e;else b[b.length]=a+"="+encodeURIComponent(e)}return b.join("&")+(c?"&&"+c:"")};Sys._Application.prototype._setState=function(a,b){if(this._enableHistory){a=a||"";if(a!==this._currentEntry){if(window.theForm){var d=window.theForm.action,e=d.indexOf("#");window.theForm.action=(e!==-1?d.substring(0,e):d)+"#"+a}if(this._historyFrame&&this._historyPointIsNew){var f=document.createElement("div");f.appendChild(document.createTextNode(b||document.title));var g=f.innerHTML;this._ignoreIFrame=true;var c=this._historyFrame.contentWindow.document;c.open("javascript:'<html></html>'");c.write("<html><head><title>"+g+"</title><scri"+'pt type="text/javascript">parent.Sys.Application._onIFrameLoad('+Sys.Serialization.JavaScriptSerializer.serialize(a)+");</scri"+"pt></head><body></body></html>");c.close()}this._ignoreTimer=false;this._currentEntry=a;if(this._historyFrame||this._historyPointIsNew){var h=this.get_stateString();if(a!==h){window.location.hash=a;this._currentEntry=this.get_stateString();if(typeof b!=="undefined"&&b!==null)document.title=b}}this._historyPointIsNew=false}}};Sys._Application.prototype._updateHiddenField=function(b){if(this._clientId){var a=document.getElementById(this._clientId);if(a)a.value=b}};if(!window.XMLHttpRequest)window.XMLHttpRequest=function(){var b=["Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"];for(var a=0,c=b.length;a<c;a++)try{return new ActiveXObject(b[a])}catch(d){}return null};Type.registerNamespace("Sys.Net");Sys.Net.WebRequestExecutor=function(){this._webRequest=null;this._resultObject=null};Sys.Net.WebRequestExecutor.prototype={get_webRequest:function(){return this._webRequest},_set_webRequest:function(a){this._webRequest=a},get_started:function(){throw Error.notImplemented()},get_responseAvailable:function(){throw Error.notImplemented()},get_timedOut:function(){throw Error.notImplemented()},get_aborted:function(){throw Error.notImplemented()},get_responseData:function(){throw Error.notImplemented()},get_statusCode:function(){throw Error.notImplemented()},get_statusText:function(){throw Error.notImplemented()},get_xml:function(){throw Error.notImplemented()},get_object:function(){if(!this._resultObject)this._resultObject=Sys.Serialization.JavaScriptSerializer.deserialize(this.get_responseData());return this._resultObject},executeRequest:function(){throw Error.notImplemented()},abort:function(){throw Error.notImplemented()},getResponseHeader:function(){throw Error.notImplemented()},getAllResponseHeaders:function(){throw Error.notImplemented()}};Sys.Net.WebRequestExecutor.registerClass("Sys.Net.WebRequestExecutor");Sys.Net.XMLDOM=function(d){if(!window.DOMParser){var c=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument"];for(var b=0,f=c.length;b<f;b++)try{var a=new ActiveXObject(c[b]);a.async=false;a.loadXML(d);a.setProperty("SelectionLanguage","XPath");return a}catch(g){}}else try{var e=new window.DOMParser;return e.parseFromString(d,"text/xml")}catch(g){}return null};Sys.Net.XMLHttpExecutor=function(){Sys.Net.XMLHttpExecutor.initializeBase(this);var a=this;this._xmlHttpRequest=null;this._webRequest=null;this._responseAvailable=false;this._timedOut=false;this._timer=null;this._aborted=false;this._started=false;this._onReadyStateChange=function(){if(a._xmlHttpRequest.readyState===4){try{if(typeof a._xmlHttpRequest.status==="undefined"||a._xmlHttpRequest.status===0)return}catch(b){return}a._clearTimer();a._responseAvailable=true;try{a._webRequest.completed(Sys.EventArgs.Empty)}finally{if(a._xmlHttpRequest!=null){a._xmlHttpRequest.onreadystatechange=Function.emptyMethod;a._xmlHttpRequest=null}}}};this._clearTimer=function(){if(a._timer!=null){window.clearTimeout(a._timer);a._timer=null}};this._onTimeout=function(){if(!a._responseAvailable){a._clearTimer();a._timedOut=true;a._xmlHttpRequest.onreadystatechange=Function.emptyMethod;a._xmlHttpRequest.abort();a._webRequest.completed(Sys.EventArgs.Empty);a._xmlHttpRequest=null}}};Sys.Net.XMLHttpExecutor.prototype={get_timedOut:function(){return this._timedOut},get_started:function(){return this._started},get_responseAvailable:function(){return this._responseAvailable},get_aborted:function(){return this._aborted},executeRequest:function(){this._webRequest=this.get_webRequest();var c=this._webRequest.get_body(),a=this._webRequest.get_headers();this._xmlHttpRequest=new XMLHttpRequest;this._xmlHttpRequest.onreadystatechange=this._onReadyStateChange;var e=this._webRequest.get_httpVerb();this._xmlHttpRequest.open(e,this._webRequest.getResolvedUrl(),true);this._xmlHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest");if(a)for(var b in a){var f=a[b];if(typeof f!=="function")this._xmlHttpRequest.setRequestHeader(b,f)}if(e.toLowerCase()==="post"){if(a===null||!a["Content-Type"])this._xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(!c)c=""}var d=this._webRequest.get_timeout();if(d>0)this._timer=window.setTimeout(Function.createDelegate(this,this._onTimeout),d);this._xmlHttpRequest.send(c);this._started=true},getResponseHeader:function(b){var a;try{a=this._xmlHttpRequest.getResponseHeader(b)}catch(c){}if(!a)a="";return a},getAllResponseHeaders:function(){return this._xmlHttpRequest.getAllResponseHeaders()},get_responseData:function(){return this._xmlHttpRequest.responseText},get_statusCode:function(){var a=0;try{a=this._xmlHttpRequest.status}catch(b){}return a},get_statusText:function(){return this._xmlHttpRequest.statusText},get_xml:function(){var a=this._xmlHttpRequest.responseXML;if(!a||!a.documentElement){a=Sys.Net.XMLDOM(this._xmlHttpRequest.responseText);if(!a||!a.documentElement)return null}else if(navigator.userAgent.indexOf("MSIE")!==-1&&typeof a.setProperty!="undefined")a.setProperty("SelectionLanguage","XPath");if(a.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml"&&a.documentElement.tagName==="parsererror")return null;if(a.documentElement.firstChild&&a.documentElement.firstChild.tagName==="parsererror")return null;return a},abort:function(){if(this._aborted||this._responseAvailable||this._timedOut)return;this._aborted=true;this._clearTimer();if(this._xmlHttpRequest&&!this._responseAvailable){this._xmlHttpRequest.onreadystatechange=Function.emptyMethod;this._xmlHttpRequest.abort();this._xmlHttpRequest=null;this._webRequest.completed(Sys.EventArgs.Empty)}}};Sys.Net.XMLHttpExecutor.registerClass("Sys.Net.XMLHttpExecutor",Sys.Net.WebRequestExecutor);Sys.Net._WebRequestManager=function(){this._defaultTimeout=0;this._defaultExecutorType="Sys.Net.XMLHttpExecutor"};Sys.Net._WebRequestManager.prototype={add_invokingRequest:function(a){this._get_eventHandlerList().addHandler("invokingRequest",a)},remove_invokingRequest:function(a){this._get_eventHandlerList().removeHandler("invokingRequest",a)},add_completedRequest:function(a){this._get_eventHandlerList().addHandler("completedRequest",a)},remove_completedRequest:function(a){this._get_eventHandlerList().removeHandler("completedRequest",a)},_get_eventHandlerList:function(){if(!this._events)this._events=new Sys.EventHandlerList;return this._events},get_defaultTimeout:function(){return this._defaultTimeout},set_defaultTimeout:function(a){this._defaultTimeout=a},get_defaultExecutorType:function(){return this._defaultExecutorType},set_defaultExecutorType:function(a){this._defaultExecutorType=a},executeRequest:function(webRequest){var executor=webRequest.get_executor();if(!executor){var failed=false;try{var executorType=eval(this._defaultExecutorType);executor=new executorType}catch(a){failed=true}webRequest.set_executor(executor)}if(executor.get_aborted())return;var evArgs=new Sys.Net.NetworkRequestEventArgs(webRequest),handler=this._get_eventHandlerList().getHandler("invokingRequest");if(handler)handler(this,evArgs);if(!evArgs.get_cancel())executor.executeRequest()}};Sys.Net._WebRequestManager.registerClass("Sys.Net._WebRequestManager");Sys.Net.WebRequestManager=new Sys.Net._WebRequestManager;Sys.Net.NetworkRequestEventArgs=function(a){Sys.Net.NetworkRequestEventArgs.initializeBase(this);this._webRequest=a};Sys.Net.NetworkRequestEventArgs.prototype={get_webRequest:function(){return this._webRequest}};Sys.Net.NetworkRequestEventArgs.registerClass("Sys.Net.NetworkRequestEventArgs",Sys.CancelEventArgs);Sys.Net.WebRequest=function(){this._url="";this._headers={};this._body=null;this._userContext=null;this._httpVerb=null;this._executor=null;this._invokeCalled=false;this._timeout=0};Sys.Net.WebRequest.prototype={add_completed:function(a){this._get_eventHandlerList().addHandler("completed",a)},remove_completed:function(a){this._get_eventHandlerList().removeHandler("completed",a)},completed:function(b){var a=Sys.Net.WebRequestManager._get_eventHandlerList().getHandler("completedRequest");if(a)a(this._executor,b);a=this._get_eventHandlerList().getHandler("completed");if(a)a(this._executor,b)},_get_eventHandlerList:function(){if(!this._events)this._events=new Sys.EventHandlerList;return this._events},get_url:function(){return this._url},set_url:function(a){this._url=a},get_headers:function(){return this._headers},get_httpVerb:function(){if(this._httpVerb===null){if(this._body===null)return "GET";return "POST"}return this._httpVerb},set_httpVerb:function(a){this._httpVerb=a},get_body:function(){return this._body},set_body:function(a){this._body=a},get_userContext:function(){return this._userContext},set_userContext:function(a){this._userContext=a},get_executor:function(){return this._executor},set_executor:function(a){this._executor=a;this._executor._set_webRequest(this)},get_timeout:function(){if(this._timeout===0)return Sys.Net.WebRequestManager.get_defaultTimeout();return this._timeout},set_timeout:function(a){this._timeout=a},getResolvedUrl:function(){return Sys.Net.WebRequest._resolveUrl(this._url)},invoke:function(){Sys.Net.WebRequestManager.executeRequest(this);this._invokeCalled=true}};Sys.Net.WebRequest._resolveUrl=function(b,a){if(b&&b.indexOf("://")!==-1)return b;if(!a||a.length===0){var d=document.getElementsByTagName("base")[0];if(d&&d.href&&d.href.length>0)a=d.href;else a=document.URL}var c=a.indexOf("?");if(c!==-1)a=a.substr(0,c);c=a.indexOf("#");if(c!==-1)a=a.substr(0,c);a=a.substr(0,a.lastIndexOf("/")+1);if(!b||b.length===0)return a;if(b.charAt(0)==="/"){var e=a.indexOf("://"),g=a.indexOf("/",e+3);return a.substr(0,g)+b}else{var f=a.lastIndexOf("/");return a.substr(0,f+1)+b}};Sys.Net.WebRequest._createQueryString=function(c,b,f){b=b||encodeURIComponent;var h=0,e,g,d,a=new Sys.StringBuilder;if(c)for(d in c){e=c[d];if(typeof e==="function")continue;g=Sys.Serialization.JavaScriptSerializer.serialize(e);if(h++)a.append("&");a.append(d);a.append("=");a.append(b(g))}if(f){if(h)a.append("&");a.append(f)}return a.toString()};Sys.Net.WebRequest._createUrl=function(a,b,c){if(!b&&!c)return a;var d=Sys.Net.WebRequest._createQueryString(b,null,c);return d.length?a+(a&&a.indexOf("?")>=0?"&":"?")+d:a};Sys.Net.WebRequest.registerClass("Sys.Net.WebRequest");Sys._ScriptLoaderTask=function(b,a){this._scriptElement=b;this._completedCallback=a};Sys._ScriptLoaderTask.prototype={get_scriptElement:function(){return this._scriptElement},dispose:function(){if(this._disposed)return;this._disposed=true;this._removeScriptElementHandlers();Sys._ScriptLoaderTask._clearScript(this._scriptElement);this._scriptElement=null},execute:function(){if(this._ensureReadyStateLoaded())this._executeInternal()},_executeInternal:function(){this._addScriptElementHandlers();document.getElementsByTagName("head")[0].appendChild(this._scriptElement)},_ensureReadyStateLoaded:function(){if(this._useReadyState()&&this._scriptElement.readyState!=="loaded"&&this._scriptElement.readyState!=="complete"){this._scriptDownloadDelegate=Function.createDelegate(this,this._executeInternal);$addHandler(this._scriptElement,"readystatechange",this._scriptDownloadDelegate);return false}return true},_addScriptElementHandlers:function(){if(this._scriptDownloadDelegate){$removeHandler(this._scriptElement,"readystatechange",this._scriptDownloadDelegate);this._scriptDownloadDelegate=null}this._scriptLoadDelegate=Function.createDelegate(this,this._scriptLoadHandler);if(this._useReadyState())$addHandler(this._scriptElement,"readystatechange",this._scriptLoadDelegate);else $addHandler(this._scriptElement,"load",this._scriptLoadDelegate);if(this._scriptElement.addEventListener){this._scriptErrorDelegate=Function.createDelegate(this,this._scriptErrorHandler);this._scriptElement.addEventListener("error",this._scriptErrorDelegate,false)}},_removeScriptElementHandlers:function(){if(this._scriptLoadDelegate){var a=this.get_scriptElement();if(this._scriptDownloadDelegate){$removeHandler(this._scriptElement,"readystatechange",this._scriptDownloadDelegate);this._scriptDownloadDelegate=null}if(this._useReadyState()&&this._scriptLoadDelegate)$removeHandler(a,"readystatechange",this._scriptLoadDelegate);else $removeHandler(a,"load",this._scriptLoadDelegate);if(this._scriptErrorDelegate){this._scriptElement.removeEventListener("error",this._scriptErrorDelegate,false);this._scriptErrorDelegate=null}this._scriptLoadDelegate=null}},_scriptErrorHandler:function(){if(this._disposed)return;this._completedCallback(this.get_scriptElement(),false)},_scriptLoadHandler:function(){if(this._disposed)return;var a=this.get_scriptElement();if(this._useReadyState()&&a.readyState!=="complete")return;this._completedCallback(a,true)},_useReadyState:function(){return Sys.Browser.agent===Sys.Browser.InternetExplorer&&(Sys.Browser.version<9||(document.documentMode||0)<9)}};Sys._ScriptLoaderTask.registerClass("Sys._ScriptLoaderTask",null,Sys.IDisposable);Sys._ScriptLoaderTask._clearScript=function(a){if(!Sys.Debug.isDebug&&a.parentNode)a.parentNode.removeChild(a)};Type.registerNamespace("Sys.Net");Sys.Net.WebServiceProxy=function(){};Sys.Net.WebServiceProxy.prototype={get_timeout:function(){return this._timeout||0},set_timeout:function(a){if(a<0)throw Error.argumentOutOfRange("value",a,Sys.Res.invalidTimeout);this._timeout=a},get_defaultUserContext:function(){return typeof this._userContext==="undefined"?null:this._userContext},set_defaultUserContext:function(a){this._userContext=a},get_defaultSucceededCallback:function(){return this._succeeded||null},set_defaultSucceededCallback:function(a){this._succeeded=a},get_defaultFailedCallback:function(){return this._failed||null},set_defaultFailedCallback:function(a){this._failed=a},get_enableJsonp:function(){return !!this._jsonp},set_enableJsonp:function(a){this._jsonp=a},get_path:function(){return this._path||null},set_path:function(a){this._path=a},get_jsonpCallbackParameter:function(){return this._callbackParameter||"callback"},set_jsonpCallbackParameter:function(a){this._callbackParameter=a},_invoke:function(d,e,g,f,c,b,a){c=c||this.get_defaultSucceededCallback();b=b||this.get_defaultFailedCallback();if(a===null||typeof a==="undefined")a=this.get_defaultUserContext();return Sys.Net.WebServiceProxy.invoke(d,e,g,f,c,b,a,this.get_timeout(),this.get_enableJsonp(),this.get_jsonpCallbackParameter())}};Sys.Net.WebServiceProxy.registerClass("Sys.Net.WebServiceProxy");Sys.Net.WebServiceProxy.invoke=function(q,a,m,l,j,b,g,e,w,p){var i=w!==false?Sys.Net.WebServiceProxy._xdomain.exec(q):null,c,n=i&&i.length===3&&(i[1]!==location.protocol||i[2]!==location.host);m=n||m;if(n){p=p||"callback";c="_jsonp"+Sys._jsonp++}if(!l)l={};var r=l;if(!m||!r)r={};var s,h,f=null,k,o=null,u=Sys.Net.WebRequest._createUrl(a?q+"/"+encodeURIComponent(a):q,r,n?p+"=Sys."+c:null);if(n){s=document.createElement("script");s.src=u;k=new Sys._ScriptLoaderTask(s,function(d,b){if(!b||c)t({Message:String.format(Sys.Res.webServiceFailedNoMsg,a)},-1)});function v(){if(f===null)return;f=null;h=new Sys.Net.WebServiceError(true,String.format(Sys.Res.webServiceTimedOut,a));k.dispose();delete Sys[c];if(b)b(h,g,a)}function t(d,e){if(f!==null){window.clearTimeout(f);f=null}k.dispose();delete Sys[c];c=null;if(typeof e!=="undefined"&&e!==200){if(b){h=new Sys.Net.WebServiceError(false,d.Message||String.format(Sys.Res.webServiceFailedNoMsg,a),d.StackTrace||null,d.ExceptionType||null,d);h._statusCode=e;b(h,g,a)}}else if(j)j(d,g,a)}Sys[c]=t;e=e||Sys.Net.WebRequestManager.get_defaultTimeout();if(e>0)f=window.setTimeout(v,e);k.execute();return null}var d=new Sys.Net.WebRequest;d.set_url(u);d.get_headers()["Content-Type"]="application/json; charset=utf-8";if(!m){o=Sys.Serialization.JavaScriptSerializer.serialize(l);if(o==="{}")o=""}d.set_body(o);d.add_completed(x);if(e&&e>0)d.set_timeout(e);d.invoke();function x(d){if(d.get_responseAvailable()){var f=d.get_statusCode(),c=null;try{var e=d.getResponseHeader("Content-Type");if(e.startsWith("application/json"))c=d.get_object();else if(e.startsWith("text/xml"))c=d.get_xml();else c=d.get_responseData()}catch(m){}var k=d.getResponseHeader("jsonerror"),h=k==="true";if(h){if(c)c=new Sys.Net.WebServiceError(false,c.Message,c.StackTrace,c.ExceptionType,c)}else if(e.startsWith("application/json"))c=!c||typeof c.d==="undefined"?c:c.d;if(f<200||f>=300||h){if(b){if(!c||!h)c=new Sys.Net.WebServiceError(false,String.format(Sys.Res.webServiceFailedNoMsg,a));c._statusCode=f;b(c,g,a)}}else if(j)j(c,g,a)}else{var i;if(d.get_timedOut())i=String.format(Sys.Res.webServiceTimedOut,a);else i=String.format(Sys.Res.webServiceFailedNoMsg,a);if(b)b(new Sys.Net.WebServiceError(d.get_timedOut(),i,"",""),g,a)}}return d};Sys.Net.WebServiceProxy._generateTypedConstructor=function(a){return function(b){if(b)for(var c in b)this[c]=b[c];this.__type=a}};Sys._jsonp=0;Sys.Net.WebServiceProxy._xdomain=/^\s*([a-zA-Z0-9\+\-\.]+\:)\/\/([^?#\/]+)/;Sys.Net.WebServiceError=function(d,e,c,a,b){this._timedOut=d;this._message=e;this._stackTrace=c;this._exceptionType=a;this._errorObject=b;this._statusCode=-1};Sys.Net.WebServiceError.prototype={get_timedOut:function(){return this._timedOut},get_statusCode:function(){return this._statusCode},get_message:function(){return this._message},get_stackTrace:function(){return this._stackTrace||""},get_exceptionType:function(){return this._exceptionType||""},get_errorObject:function(){return this._errorObject||null}};Sys.Net.WebServiceError.registerClass("Sys.Net.WebServiceError");
Type.registerNamespace('Sys');Sys.Res={"argumentInteger":"Value must be an integer.","invokeCalledTwice":"Cannot call invoke more than once.","webServiceFailed":"The server method \u0027{0}\u0027 failed with the following error: {1}","argumentType":"Object cannot be converted to the required type.","argumentNull":"Value cannot be null.","scriptAlreadyLoaded":"The script \u0027{0}\u0027 has been referenced multiple times. If referencing Microsoft AJAX scripts explicitly, set the MicrosoftAjaxMode property of the ScriptManager to Explicit.","scriptDependencyNotFound":"The script \u0027{0}\u0027 failed to load because it is dependent on script \u0027{1}\u0027.","formatBadFormatSpecifier":"Format specifier was invalid.","requiredScriptReferenceNotIncluded":"\u0027{0}\u0027 requires that you have included a script reference to \u0027{1}\u0027.","webServiceFailedNoMsg":"The server method \u0027{0}\u0027 failed.","argumentDomElement":"Value must be a DOM element.","invalidExecutorType":"Could not create a valid Sys.Net.WebRequestExecutor from: {0}.","cannotCallBeforeResponse":"Cannot call {0} when responseAvailable is false.","actualValue":"Actual value was {0}.","enumInvalidValue":"\u0027{0}\u0027 is not a valid value for enum {1}.","scriptLoadFailed":"The script \u0027{0}\u0027 could not be loaded.","parameterCount":"Parameter count mismatch.","cannotDeserializeEmptyString":"Cannot deserialize empty string.","formatInvalidString":"Input string was not in a correct format.","invalidTimeout":"Value must be greater than or equal to zero.","cannotAbortBeforeStart":"Cannot abort when executor has not started.","argument":"Value does not fall within the expected range.","cannotDeserializeInvalidJson":"Cannot deserialize. The data does not correspond to valid JSON.","invalidHttpVerb":"httpVerb cannot be set to an empty or null string.","nullWebRequest":"Cannot call executeRequest with a null webRequest.","eventHandlerInvalid":"Handler was not added through the Sys.UI.DomEvent.addHandler method.","cannotSerializeNonFiniteNumbers":"Cannot serialize non finite numbers.","argumentUndefined":"Value cannot be undefined.","webServiceInvalidReturnType":"The server method \u0027{0}\u0027 returned an invalid type. Expected type: {1}","servicePathNotSet":"The path to the web service has not been set.","argumentTypeWithTypes":"Object of type \u0027{0}\u0027 cannot be converted to type \u0027{1}\u0027.","cannotCallOnceStarted":"Cannot call {0} once started.","badBaseUrl1":"Base URL does not contain ://.","badBaseUrl2":"Base URL does not contain another /.","badBaseUrl3":"Cannot find last / in base URL.","setExecutorAfterActive":"Cannot set executor after it has become active.","paramName":"Parameter name: {0}","nullReferenceInPath":"Null reference while evaluating data path: \u0027{0}\u0027.","cannotCallOutsideHandler":"Cannot call {0} outside of a completed event handler.","cannotSerializeObjectWithCycle":"Cannot serialize object with cyclic reference within child properties.","format":"One of the identified items was in an invalid format.","assertFailedCaller":"Assertion Failed: {0}\r\nat {1}","argumentOutOfRange":"Specified argument was out of the range of valid values.","webServiceTimedOut":"The server method \u0027{0}\u0027 timed out.","notImplemented":"The method or operation is not implemented.","assertFailed":"Assertion Failed: {0}","invalidOperation":"Operation is not valid due to the current state of the object.","breakIntoDebugger":"{0}\r\n\r\nBreak into debugger?"};
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function (s, H, f, w) {
    var K = f("html"), q = f(s), p = f(H), b = f.fancybox = function () { b.open.apply(this, arguments) }, J = navigator.userAgent.match(/msie/i), C = null, t = H.createTouch !== w, u = function (a) { return a && a.hasOwnProperty && a instanceof f }, r = function (a) { return a && "string" === f.type(a) }, F = function (a) { return r(a) && 0 < a.indexOf("%") }, m = function (a, d) { var e = parseInt(a, 10) || 0; d && F(a) && (e *= b.getViewport()[d] / 100); return Math.ceil(e) }, x = function (a, b) { return m(a, b) + "px" }; f.extend(b, {
        version: "2.1.5", defaults: {
            padding: 15, margin: 20,
            width: 800, height: 600, minWidth: 100, minHeight: 100, maxWidth: 9999, maxHeight: 9999, pixelRatio: 1, autoSize: !0, autoHeight: !1, autoWidth: !1, autoResize: !0, autoCenter: !t, fitToView: !0, aspectRatio: !1, topRatio: 0.5, leftRatio: 0.5, scrolling: "auto", wrapCSS: "", arrows: !0, closeBtn: !0, closeClick: !1, nextClick: !1, mouseWheel: !0, autoPlay: !1, playSpeed: 3E3, preload: 3, modal: !1, loop: !0, ajax: { dataType: "html", headers: { "X-fancyBox": !0 } }, iframe: { scrolling: "auto", preload: !0 }, swf: { wmode: "transparent", allowfullscreen: "true", allowscriptaccess: "always" },
            keys: { next: { 13: "left", 34: "up", 39: "left", 40: "up" }, prev: { 8: "right", 33: "down", 37: "right", 38: "down" }, close: [27], play: [32], toggle: [70] }, direction: { next: "left", prev: "right" }, scrollOutside: !0, index: 0, type: null, href: null, content: null, title: null, tpl: {
                wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>', image: '<img class="fancybox-image" src="{href}" alt="" />', iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' +
                (J ? ' allowtransparency="true"' : "") + "></iframe>", error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>', closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>', next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>', prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
            }, openEffect: "fade", openSpeed: 250, openEasing: "swing", openOpacity: !0,
            openMethod: "zoomIn", closeEffect: "fade", closeSpeed: 250, closeEasing: "swing", closeOpacity: !0, closeMethod: "zoomOut", nextEffect: "elastic", nextSpeed: 250, nextEasing: "swing", nextMethod: "changeIn", prevEffect: "elastic", prevSpeed: 250, prevEasing: "swing", prevMethod: "changeOut", helpers: { overlay: !0, title: !0 }, onCancel: f.noop, beforeLoad: f.noop, afterLoad: f.noop, beforeShow: f.noop, afterShow: f.noop, beforeChange: f.noop, beforeClose: f.noop, afterClose: f.noop
        }, group: {}, opts: {}, previous: null, coming: null, current: null, isActive: !1,
        isOpen: !1, isOpened: !1, wrap: null, skin: null, outer: null, inner: null, player: { timer: null, isActive: !1 }, ajaxLoad: null, imgPreload: null, transitions: {}, helpers: {}, open: function (a, d) {
            if (a && (f.isPlainObject(d) || (d = {}), !1 !== b.close(!0))) return f.isArray(a) || (a = u(a) ? f(a).get() : [a]), f.each(a, function (e, c) {
                var l = {}, g, h, k, n, m; "object" === f.type(c) && (c.nodeType && (c = f(c)), u(c) ? (l = { href: c.data("fancybox-href") || c.attr("href"), title: f("<div/>").text(c.data("fancybox-title") || c.attr("title")).html(), isDom: !0, element: c },
                f.metadata && f.extend(!0, l, c.metadata())) : l = c); g = d.href || l.href || (r(c) ? c : null); h = d.title !== w ? d.title : l.title || ""; n = (k = d.content || l.content) ? "html" : d.type || l.type; !n && l.isDom && (n = c.data("fancybox-type"), n || (n = (n = c.prop("class").match(/fancybox\.(\w+)/)) ? n[1] : null)); r(g) && (n || (b.isImage(g) ? n = "image" : b.isSWF(g) ? n = "swf" : "#" === g.charAt(0) ? n = "inline" : r(c) && (n = "html", k = c)), "ajax" === n && (m = g.split(/\s+/, 2), g = m.shift(), m = m.shift())); k || ("inline" === n ? g ? k = f(r(g) ? g.replace(/.*(?=#[^\s]+$)/, "") : g) : l.isDom && (k = c) :
                "html" === n ? k = g : n || g || !l.isDom || (n = "inline", k = c)); f.extend(l, { href: g, type: n, content: k, title: h, selector: m }); a[e] = l
            }), b.opts = f.extend(!0, {}, b.defaults, d), d.keys !== w && (b.opts.keys = d.keys ? f.extend({}, b.defaults.keys, d.keys) : !1), b.group = a, b._start(b.opts.index)
        }, cancel: function () {
            var a = b.coming; a && !1 === b.trigger("onCancel") || (b.hideLoading(), a && (b.ajaxLoad && b.ajaxLoad.abort(), b.ajaxLoad = null, b.imgPreload && (b.imgPreload.onload = b.imgPreload.onerror = null), a.wrap && a.wrap.stop(!0, !0).trigger("onReset").remove(),
            b.coming = null, b.current || b._afterZoomOut(a)))
        }, close: function (a) { b.cancel(); !1 !== b.trigger("beforeClose") && (b.unbindEvents(), b.isActive && (b.isOpen && !0 !== a ? (b.isOpen = b.isOpened = !1, b.isClosing = !0, f(".fancybox-item, .fancybox-nav").remove(), b.wrap.stop(!0, !0).removeClass("fancybox-opened"), b.transitions[b.current.closeMethod]()) : (f(".fancybox-wrap").stop(!0).trigger("onReset").remove(), b._afterZoomOut()))) }, play: function (a) {
            var d = function () { clearTimeout(b.player.timer) }, e = function () {
                d(); b.current && b.player.isActive &&
                (b.player.timer = setTimeout(b.next, b.current.playSpeed))
            }, c = function () { d(); p.unbind(".player"); b.player.isActive = !1; b.trigger("onPlayEnd") }; !0 === a || !b.player.isActive && !1 !== a ? b.current && (b.current.loop || b.current.index < b.group.length - 1) && (b.player.isActive = !0, p.bind({ "onCancel.player beforeClose.player": c, "onUpdate.player": e, "beforeLoad.player": d }), e(), b.trigger("onPlayStart")) : c()
        }, next: function (a) { var d = b.current; d && (r(a) || (a = d.direction.next), b.jumpto(d.index + 1, a, "next")) }, prev: function (a) {
            var d =
            b.current; d && (r(a) || (a = d.direction.prev), b.jumpto(d.index - 1, a, "prev"))
        }, jumpto: function (a, d, e) { var c = b.current; c && (a = m(a), b.direction = d || c.direction[a >= c.index ? "next" : "prev"], b.router = e || "jumpto", c.loop && (0 > a && (a = c.group.length + a % c.group.length), a %= c.group.length), c.group[a] !== w && (b.cancel(), b._start(a))) }, reposition: function (a, d) { var e = b.current, c = e ? e.wrap : null, l; c && (l = b._getPosition(d), a && "scroll" === a.type ? (delete l.position, c.stop(!0, !0).animate(l, 200)) : (c.css(l), e.pos = f.extend({}, e.dim, l))) },
        update: function (a) { var d = a && a.originalEvent && a.originalEvent.type, e = !d || "orientationchange" === d; e && (clearTimeout(C), C = null); b.isOpen && !C && (C = setTimeout(function () { var c = b.current; c && !b.isClosing && (b.wrap.removeClass("fancybox-tmp"), (e || "load" === d || "resize" === d && c.autoResize) && b._setDimension(), "scroll" === d && c.canShrink || b.reposition(a), b.trigger("onUpdate"), C = null) }, e && !t ? 0 : 300)) }, toggle: function (a) {
            b.isOpen && (b.current.fitToView = "boolean" === f.type(a) ? a : !b.current.fitToView, t && (b.wrap.removeAttr("style").addClass("fancybox-tmp"),
            b.trigger("onUpdate")), b.update())
        }, hideLoading: function () { p.unbind(".loading"); f("#fancybox-loading").remove() }, showLoading: function () { var a, d; b.hideLoading(); a = f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body"); p.bind("keydown.loading", function (a) { 27 === (a.which || a.keyCode) && (a.preventDefault(), b.cancel()) }); b.defaults.fixed || (d = b.getViewport(), a.css({ position: "absolute", top: 0.5 * d.h + d.y, left: 0.5 * d.w + d.x })); b.trigger("onLoading") }, getViewport: function () {
            var a = b.current &&
            b.current.locked || !1, d = { x: q.scrollLeft(), y: q.scrollTop() }; a && a.length ? (d.w = a[0].clientWidth, d.h = a[0].clientHeight) : (d.w = t && s.innerWidth ? s.innerWidth : q.width(), d.h = t && s.innerHeight ? s.innerHeight : q.height()); return d
        }, unbindEvents: function () { b.wrap && u(b.wrap) && b.wrap.unbind(".fb"); p.unbind(".fb"); q.unbind(".fb") }, bindEvents: function () {
            var a = b.current, d; a && (q.bind("orientationchange.fb" + (t ? "" : " resize.fb") + (a.autoCenter && !a.locked ? " scroll.fb" : ""), b.update), (d = a.keys) && p.bind("keydown.fb", function (e) {
                var c =
                e.which || e.keyCode, l = e.target || e.srcElement; if (27 === c && b.coming) return !1; e.ctrlKey || e.altKey || e.shiftKey || e.metaKey || l && (l.type || f(l).is("[contenteditable]")) || f.each(d, function (d, l) { if (1 < a.group.length && l[c] !== w) return b[d](l[c]), e.preventDefault(), !1; if (-1 < f.inArray(c, l)) return b[d](), e.preventDefault(), !1 })
            }), f.fn.mousewheel && a.mouseWheel && b.wrap.bind("mousewheel.fb", function (d, c, l, g) {
                for (var h = f(d.target || null), k = !1; h.length && !(k || h.is(".fancybox-skin") || h.is(".fancybox-wrap")) ;) k = h[0] && !(h[0].style.overflow &&
                "hidden" === h[0].style.overflow) && (h[0].clientWidth && h[0].scrollWidth > h[0].clientWidth || h[0].clientHeight && h[0].scrollHeight > h[0].clientHeight), h = f(h).parent(); 0 !== c && !k && 1 < b.group.length && !a.canShrink && (0 < g || 0 < l ? b.prev(0 < g ? "down" : "left") : (0 > g || 0 > l) && b.next(0 > g ? "up" : "right"), d.preventDefault())
            }))
        }, trigger: function (a, d) {
            var e, c = d || b.coming || b.current; if (c) {
                f.isFunction(c[a]) && (e = c[a].apply(c, Array.prototype.slice.call(arguments, 1))); if (!1 === e) return !1; c.helpers && f.each(c.helpers, function (d, e) {
                    if (e &&
                    b.helpers[d] && f.isFunction(b.helpers[d][a])) b.helpers[d][a](f.extend(!0, {}, b.helpers[d].defaults, e), c)
                })
            } p.trigger(a)
        }, isImage: function (a) { return r(a) && a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i) }, isSWF: function (a) { return r(a) && a.match(/\.(swf)((\?|#).*)?$/i) }, _start: function (a) {
            var d = {}, e, c; a = m(a); e = b.group[a] || null; if (!e) return !1; d = f.extend(!0, {}, b.opts, e); e = d.margin; c = d.padding; "number" === f.type(e) && (d.margin = [e, e, e, e]); "number" === f.type(c) && (d.padding = [c, c,
            c, c]); d.modal && f.extend(!0, d, { closeBtn: !1, closeClick: !1, nextClick: !1, arrows: !1, mouseWheel: !1, keys: null, helpers: { overlay: { closeClick: !1 } } }); d.autoSize && (d.autoWidth = d.autoHeight = !0); "auto" === d.width && (d.autoWidth = !0); "auto" === d.height && (d.autoHeight = !0); d.group = b.group; d.index = a; b.coming = d; if (!1 === b.trigger("beforeLoad")) b.coming = null; else {
                c = d.type; e = d.href; if (!c) return b.coming = null, b.current && b.router && "jumpto" !== b.router ? (b.current.index = a, b[b.router](b.direction)) : !1; b.isActive = !0; if ("image" ===
                c || "swf" === c) d.autoHeight = d.autoWidth = !1, d.scrolling = "visible"; "image" === c && (d.aspectRatio = !0); "iframe" === c && t && (d.scrolling = "scroll"); d.wrap = f(d.tpl.wrap).addClass("fancybox-" + (t ? "mobile" : "desktop") + " fancybox-type-" + c + " fancybox-tmp " + d.wrapCSS).appendTo(d.parent || "body"); f.extend(d, { skin: f(".fancybox-skin", d.wrap), outer: f(".fancybox-outer", d.wrap), inner: f(".fancybox-inner", d.wrap) }); f.each(["Top", "Right", "Bottom", "Left"], function (a, b) { d.skin.css("padding" + b, x(d.padding[a])) }); b.trigger("onReady");
                if ("inline" === c || "html" === c) { if (!d.content || !d.content.length) return b._error("content") } else if (!e) return b._error("href"); "image" === c ? b._loadImage() : "ajax" === c ? b._loadAjax() : "iframe" === c ? b._loadIframe() : b._afterLoad()
            }
        }, _error: function (a) { f.extend(b.coming, { type: "html", autoWidth: !0, autoHeight: !0, minWidth: 0, minHeight: 0, scrolling: "no", hasError: a, content: b.coming.tpl.error }); b._afterLoad() }, _loadImage: function () {
            var a = b.imgPreload = new Image; a.onload = function () {
                this.onload = this.onerror = null; b.coming.width =
                this.width / b.opts.pixelRatio; b.coming.height = this.height / b.opts.pixelRatio; b._afterLoad()
            }; a.onerror = function () { this.onload = this.onerror = null; b._error("image") }; a.src = b.coming.href; !0 !== a.complete && b.showLoading()
        }, _loadAjax: function () { var a = b.coming; b.showLoading(); b.ajaxLoad = f.ajax(f.extend({}, a.ajax, { url: a.href, error: function (a, e) { b.coming && "abort" !== e ? b._error("ajax", a) : b.hideLoading() }, success: function (d, e) { "success" === e && (a.content = d, b._afterLoad()) } })) }, _loadIframe: function () {
            var a = b.coming,
            d = f(a.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", t ? "auto" : a.iframe.scrolling).attr("src", a.href); f(a.wrap).bind("onReset", function () { try { f(this).find("iframe").hide().attr("src", "//about:blank").end().empty() } catch (a) { } }); a.iframe.preload && (b.showLoading(), d.one("load", function () { f(this).data("ready", 1); t || f(this).bind("load.fb", b.update); f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(); b._afterLoad() })); a.content = d.appendTo(a.inner); a.iframe.preload ||
            b._afterLoad()
        }, _preloadImages: function () { var a = b.group, d = b.current, e = a.length, c = d.preload ? Math.min(d.preload, e - 1) : 0, f, g; for (g = 1; g <= c; g += 1) f = a[(d.index + g) % e], "image" === f.type && f.href && ((new Image).src = f.href) }, _afterLoad: function () {
            var a = b.coming, d = b.current, e, c, l, g, h; b.hideLoading(); if (a && !1 !== b.isActive) if (!1 === b.trigger("afterLoad", a, d)) a.wrap.stop(!0).trigger("onReset").remove(), b.coming = null; else {
                d && (b.trigger("beforeChange", d), d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());
                b.unbindEvents(); e = a.content; c = a.type; l = a.scrolling; f.extend(b, { wrap: a.wrap, skin: a.skin, outer: a.outer, inner: a.inner, current: a, previous: d }); g = a.href; switch (c) {
                    case "inline": case "ajax": case "html": a.selector ? e = f("<div>").html(e).find(a.selector) : u(e) && (e.data("fancybox-placeholder") || e.data("fancybox-placeholder", f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()), e = e.show().detach(), a.wrap.bind("onReset", function () {
                        f(this).find(e).length && e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",
                        !1)
                    })); break; case "image": e = a.tpl.image.replace(/\{href\}/g, g); break; case "swf": e = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + g + '"></param>', h = "", f.each(a.swf, function (a, b) { e += '<param name="' + a + '" value="' + b + '"></param>'; h += " " + a + '="' + b + '"' }), e += '<embed src="' + g + '" type="application/x-shockwave-flash" width="100%" height="100%"' + h + "></embed></object>"
                } u(e) && e.parent().is(a.inner) || a.inner.append(e); b.trigger("beforeShow");
                a.inner.css("overflow", "yes" === l ? "scroll" : "no" === l ? "hidden" : l); b._setDimension(); b.reposition(); b.isOpen = !1; b.coming = null; b.bindEvents(); if (!b.isOpened) f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(); else if (d.prevMethod) b.transitions[d.prevMethod](); b.transitions[b.isOpened ? a.nextMethod : a.openMethod](); b._preloadImages()
            }
        }, _setDimension: function () {
            var a = b.getViewport(), d = 0, e = !1, c = !1, e = b.wrap, l = b.skin, g = b.inner, h = b.current, c = h.width, k = h.height, n = h.minWidth, v = h.minHeight, p = h.maxWidth,
            q = h.maxHeight, t = h.scrolling, r = h.scrollOutside ? h.scrollbarWidth : 0, y = h.margin, z = m(y[1] + y[3]), s = m(y[0] + y[2]), w, A, u, D, B, G, C, E, I; e.add(l).add(g).width("auto").height("auto").removeClass("fancybox-tmp"); y = m(l.outerWidth(!0) - l.width()); w = m(l.outerHeight(!0) - l.height()); A = z + y; u = s + w; D = F(c) ? (a.w - A) * m(c) / 100 : c; B = F(k) ? (a.h - u) * m(k) / 100 : k; if ("iframe" === h.type) {
                if (I = h.content, h.autoHeight && 1 === I.data("ready")) try {
                    I[0].contentWindow.document.location && (g.width(D).height(9999), G = I.contents().find("body"), r && G.css("overflow-x",
                    "hidden"), B = G.outerHeight(!0))
                } catch (H) { }
            } else if (h.autoWidth || h.autoHeight) g.addClass("fancybox-tmp"), h.autoWidth || g.width(D), h.autoHeight || g.height(B), h.autoWidth && (D = g.width()), h.autoHeight && (B = g.height()), g.removeClass("fancybox-tmp"); c = m(D); k = m(B); E = D / B; n = m(F(n) ? m(n, "w") - A : n); p = m(F(p) ? m(p, "w") - A : p); v = m(F(v) ? m(v, "h") - u : v); q = m(F(q) ? m(q, "h") - u : q); G = p; C = q; h.fitToView && (p = Math.min(a.w - A, p), q = Math.min(a.h - u, q)); A = a.w - z; s = a.h - s; h.aspectRatio ? (c > p && (c = p, k = m(c / E)), k > q && (k = q, c = m(k * E)), c < n && (c = n, k = m(c /
            E)), k < v && (k = v, c = m(k * E))) : (c = Math.max(n, Math.min(c, p)), h.autoHeight && "iframe" !== h.type && (g.width(c), k = g.height()), k = Math.max(v, Math.min(k, q))); if (h.fitToView) if (g.width(c).height(k), e.width(c + y), a = e.width(), z = e.height(), h.aspectRatio) for (; (a > A || z > s) && c > n && k > v && !(19 < d++) ;) k = Math.max(v, Math.min(q, k - 10)), c = m(k * E), c < n && (c = n, k = m(c / E)), c > p && (c = p, k = m(c / E)), g.width(c).height(k), e.width(c + y), a = e.width(), z = e.height(); else c = Math.max(n, Math.min(c, c - (a - A))), k = Math.max(v, Math.min(k, k - (z - s))); r && "auto" === t && k < B &&
            c + y + r < A && (c += r); g.width(c).height(k); e.width(c + y); a = e.width(); z = e.height(); e = (a > A || z > s) && c > n && k > v; c = h.aspectRatio ? c < G && k < C && c < D && k < B : (c < G || k < C) && (c < D || k < B); f.extend(h, { dim: { width: x(a), height: x(z) }, origWidth: D, origHeight: B, canShrink: e, canExpand: c, wPadding: y, hPadding: w, wrapSpace: z - l.outerHeight(!0), skinSpace: l.height() - k }); !I && h.autoHeight && k > v && k < q && !c && g.height("auto")
        }, _getPosition: function (a) {
            var d = b.current, e = b.getViewport(), c = d.margin, f = b.wrap.width() + c[1] + c[3], g = b.wrap.height() + c[0] + c[2], c = {
                position: "absolute",
                top: c[0], left: c[3]
            }; d.autoCenter && d.fixed && !a && g <= e.h && f <= e.w ? c.position = "fixed" : d.locked || (c.top += e.y, c.left += e.x); c.top = x(Math.max(c.top, c.top + (e.h - g) * d.topRatio)); c.left = x(Math.max(c.left, c.left + (e.w - f) * d.leftRatio)); return c
        }, _afterZoomIn: function () {
            var a = b.current; a && ((b.isOpen = b.isOpened = !0, b.wrap.css("overflow", "visible").addClass("fancybox-opened"), b.update(), (a.closeClick || a.nextClick && 1 < b.group.length) && b.inner.css("cursor", "pointer").bind("click.fb", function (d) {
                f(d.target).is("a") || f(d.target).parent().is("a") ||
                (d.preventDefault(), b[a.closeClick ? "close" : "next"]())
            }), a.closeBtn && f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb", function (a) { a.preventDefault(); b.close() }), a.arrows && 1 < b.group.length && ((a.loop || 0 < a.index) && f(a.tpl.prev).appendTo(b.outer).bind("click.fb", b.prev), (a.loop || a.index < b.group.length - 1) && f(a.tpl.next).appendTo(b.outer).bind("click.fb", b.next)), b.trigger("afterShow"), a.loop || a.index !== a.group.length - 1) ? b.opts.autoPlay && !b.player.isActive && (b.opts.autoPlay = !1, b.play(!0)) : b.play(!1))
        },
        _afterZoomOut: function (a) { a = a || b.current; f(".fancybox-wrap").trigger("onReset").remove(); f.extend(b, { group: {}, opts: {}, router: !1, current: null, isActive: !1, isOpened: !1, isOpen: !1, isClosing: !1, wrap: null, skin: null, outer: null, inner: null }); b.trigger("afterClose", a) }
    }); b.transitions = {
        getOrigPosition: function () {
            var a = b.current, d = a.element, e = a.orig, c = {}, f = 50, g = 50, h = a.hPadding, k = a.wPadding, n = b.getViewport(); !e && a.isDom && d.is(":visible") && (e = d.find("img:first"), e.length || (e = d)); u(e) ? (c = e.offset(), e.is("img") &&
            (f = e.outerWidth(), g = e.outerHeight())) : (c.top = n.y + (n.h - g) * a.topRatio, c.left = n.x + (n.w - f) * a.leftRatio); if ("fixed" === b.wrap.css("position") || a.locked) c.top -= n.y, c.left -= n.x; return c = { top: x(c.top - h * a.topRatio), left: x(c.left - k * a.leftRatio), width: x(f + k), height: x(g + h) }
        }, step: function (a, d) {
            var e, c, f = d.prop; c = b.current; var g = c.wrapSpace, h = c.skinSpace; if ("width" === f || "height" === f) e = d.end === d.start ? 1 : (a - d.start) / (d.end - d.start), b.isClosing && (e = 1 - e), c = "width" === f ? c.wPadding : c.hPadding, c = a - c, b.skin[f](m("width" ===
            f ? c : c - g * e)), b.inner[f](m("width" === f ? c : c - g * e - h * e))
        }, zoomIn: function () { var a = b.current, d = a.pos, e = a.openEffect, c = "elastic" === e, l = f.extend({ opacity: 1 }, d); delete l.position; c ? (d = this.getOrigPosition(), a.openOpacity && (d.opacity = 0.1)) : "fade" === e && (d.opacity = 0.1); b.wrap.css(d).animate(l, { duration: "none" === e ? 0 : a.openSpeed, easing: a.openEasing, step: c ? this.step : null, complete: b._afterZoomIn }) }, zoomOut: function () {
            var a = b.current, d = a.closeEffect, e = "elastic" === d, c = { opacity: 0.1 }; e && (c = this.getOrigPosition(), a.closeOpacity &&
            (c.opacity = 0.1)); b.wrap.animate(c, { duration: "none" === d ? 0 : a.closeSpeed, easing: a.closeEasing, step: e ? this.step : null, complete: b._afterZoomOut })
        }, changeIn: function () { var a = b.current, d = a.nextEffect, e = a.pos, c = { opacity: 1 }, f = b.direction, g; e.opacity = 0.1; "elastic" === d && (g = "down" === f || "up" === f ? "top" : "left", "down" === f || "right" === f ? (e[g] = x(m(e[g]) - 200), c[g] = "+=200px") : (e[g] = x(m(e[g]) + 200), c[g] = "-=200px")); "none" === d ? b._afterZoomIn() : b.wrap.css(e).animate(c, { duration: a.nextSpeed, easing: a.nextEasing, complete: b._afterZoomIn }) },
        changeOut: function () { var a = b.previous, d = a.prevEffect, e = { opacity: 0.1 }, c = b.direction; "elastic" === d && (e["down" === c || "up" === c ? "top" : "left"] = ("up" === c || "left" === c ? "-" : "+") + "=200px"); a.wrap.animate(e, { duration: "none" === d ? 0 : a.prevSpeed, easing: a.prevEasing, complete: function () { f(this).trigger("onReset").remove() } }) }
    }; b.helpers.overlay = {
        defaults: { closeClick: !0, speedOut: 200, showEarly: !0, css: {}, locked: !t, fixed: !0 }, overlay: null, fixed: !1, el: f("html"), create: function (a) {
            var d; a = f.extend({}, this.defaults, a); this.overlay &&
            this.close(); d = b.coming ? b.coming.parent : a.parent; this.overlay = f('<div class="fancybox-overlay"></div>').appendTo(d && d.lenth ? d : "body"); this.fixed = !1; a.fixed && b.defaults.fixed && (this.overlay.addClass("fancybox-overlay-fixed"), this.fixed = !0)
        }, open: function (a) {
            var d = this; a = f.extend({}, this.defaults, a); this.overlay ? this.overlay.unbind(".overlay").width("auto").height("auto") : this.create(a); this.fixed || (q.bind("resize.overlay", f.proxy(this.update, this)), this.update()); a.closeClick && this.overlay.bind("click.overlay",
            function (a) { if (f(a.target).hasClass("fancybox-overlay")) return b.isActive ? b.close() : d.close(), !1 }); this.overlay.css(a.css).show()
        }, close: function () { q.unbind("resize.overlay"); this.el.hasClass("fancybox-lock") && (f(".fancybox-margin").removeClass("fancybox-margin"), this.el.removeClass("fancybox-lock"), q.scrollTop(this.scrollV).scrollLeft(this.scrollH)); f(".fancybox-overlay").remove().hide(); f.extend(this, { overlay: null, fixed: !1 }) }, update: function () {
            var a = "100%", b; this.overlay.width(a).height("100%");
            J ? (b = Math.max(H.documentElement.offsetWidth, H.body.offsetWidth), p.width() > b && (a = p.width())) : p.width() > q.width() && (a = p.width()); this.overlay.width(a).height(p.height())
        }, onReady: function (a, b) { var e = this.overlay; f(".fancybox-overlay").stop(!0, !0); e || this.create(a); a.locked && this.fixed && b.fixed && (b.locked = this.overlay.append(b.wrap), b.fixed = !1); !0 === a.showEarly && this.beforeShow.apply(this, arguments) }, beforeShow: function (a, b) {
            b.locked && !this.el.hasClass("fancybox-lock") && (!1 !== this.fixPosition && f("*").filter(function () {
                return "fixed" ===
                f(this).css("position") && !f(this).hasClass("fancybox-overlay") && !f(this).hasClass("fancybox-wrap")
            }).addClass("fancybox-margin"), this.el.addClass("fancybox-margin"), this.scrollV = q.scrollTop(), this.scrollH = q.scrollLeft(), this.el.addClass("fancybox-lock"), q.scrollTop(this.scrollV).scrollLeft(this.scrollH)); this.open(a)
        }, onUpdate: function () { this.fixed || this.update() }, afterClose: function (a) { this.overlay && !b.coming && this.overlay.fadeOut(a.speedOut, f.proxy(this.close, this)) }
    }; b.helpers.title = {
        defaults: {
            type: "float",
            position: "bottom"
        }, beforeShow: function (a) {
            var d = b.current, e = d.title, c = a.type; f.isFunction(e) && (e = e.call(d.element, d)); if (r(e) && "" !== f.trim(e)) {
                d = f('<div class="fancybox-title fancybox-title-' + c + '-wrap">' + e + "</div>"); switch (c) { case "inside": c = b.skin; break; case "outside": c = b.wrap; break; case "over": c = b.inner; break; default: c = b.skin, d.appendTo("body"), J && d.width(d.width()), d.wrapInner('<span class="child"></span>'), b.current.margin[2] += Math.abs(m(d.css("margin-bottom"))) } d["top" === a.position ? "prependTo" :
                "appendTo"](c)
            }
        }
    }; f.fn.fancybox = function (a) {
        var d, e = f(this), c = this.selector || "", l = function (g) { var h = f(this).blur(), k = d, l, m; g.ctrlKey || g.altKey || g.shiftKey || g.metaKey || h.is(".fancybox-wrap") || (l = a.groupAttr || "data-fancybox-group", m = h.attr(l), m || (l = "rel", m = h.get(0)[l]), m && "" !== m && "nofollow" !== m && (h = c.length ? f(c) : e, h = h.filter("[" + l + '="' + m + '"]'), k = h.index(this)), a.index = k, !1 !== b.open(h, a) && g.preventDefault()) }; a = a || {}; d = a.index || 0; c && !1 !== a.live ? p.undelegate(c, "click.fb-start").delegate(c + ":not('.fancybox-item, .fancybox-nav')",
        "click.fb-start", l) : e.unbind("click.fb-start").bind("click.fb-start", l); this.filter("[data-fancybox-start=1]").trigger("click"); return this
    }; p.ready(function () {
        var a, d; f.scrollbarWidth === w && (f.scrollbarWidth = function () { var a = f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"), b = a.children(), b = b.innerWidth() - b.height(99).innerWidth(); a.remove(); return b }); f.support.fixedPosition === w && (f.support.fixedPosition = function () {
            var a = f('<div style="position:fixed;top:20px;"></div>').appendTo("body"),
            b = 20 === a[0].offsetTop || 15 === a[0].offsetTop; a.remove(); return b
        }()); f.extend(b.defaults, { scrollbarWidth: f.scrollbarWidth(), fixed: f.support.fixedPosition, parent: f("body") }); a = f(s).width(); K.addClass("fancybox-lock-test"); d = f(s).width(); K.removeClass("fancybox-lock-test"); f("<style type='text/css'>.fancybox-margin{margin-right:" + (d - a) + "px;}</style>").appendTo("head")
    })
})(window, document, jQuery);
(function (g) { var e = { defaults: { container: "body", type: "info", title: "&nbsp;", cancel: true, icon: "info", content: "&nbsp;", align: "left", buttons: { ok: "Ok" }, active: null, width: "auto", maxHeight: 160, draggable: true, callback: g.noop, pie: "htc" }, types: { info: { title: "Info", icon: "info", buttons: { ok: "Ok" } }, confirm: { title: "Confirm", icon: "confirm", buttons: { yes: "Yes", no: "No" } }, warning: { title: "Warning", icon: "warning", buttons: { ok: "Ok" } }, error: { title: "Error", icon: "error", buttons: { ok: "Ok" } }, prompt: { title: "Prompt", icon: "prompt", buttons: { ok: "Ok", cancel: "Cancel" } }, success: { title: "Success", icon: "success", buttons: { ok: "Ok", cancel: "Cancel" } } } }; var d = {}; var h = false; var m = g([]); var b = g([]); function i() { var o = ["close.png", "info.png", "confirm.png", "warning.png", "error.png", "success.png"]; var p = window.devicePixelRatio && devicePixelRatio == 2; o = g.map(o, function (s) { return (p ? "x2" : "images") + "/" + s }); var q = g('link[href*="alert/themes/"]'); if (!q.length) { return } var r = q.attr("href"); r = r.substr(0, r.lastIndexOf("/") + 1); g.each(o, function (u, t) { var s = g("<img />").attr("src", r + t) }) } function n() { var p = {}; if (arguments.length) { if (g.isPlainObject(arguments[0])) { p = arguments[0] } else { var o = Array.prototype.slice.call(arguments); if (g.isFunction(o[o.length - 1])) { p.callback = o.pop() } if (g.isPlainObject(o[o.length - 1])) { p.buttons = o.pop() } if (o.length == 3) { p.type = o[0]; p.title = o[1]; p.content = o[2] } else { if (o.length == 2) { if (e.types[o[0]]) { p.type = o[0] } else { p.title = o[0] } p.content = o[1] } else { p.content = o[0] } } } } if (!e.types[p.type]) { p.type = e.defaults.type } p = g.extend({}, e.defaults, e.types[p.type], p); if (!p.active || !p.buttons[p.active]) { for (var q in p.buttons) { p.active = q; break } } if (typeof g.fn.draggable == "undefined") { p.draggable = false } p.title = g.trim(p.title) || e.types[p.type].title; if (p.type == "prompt") { p.content += ["<input", '    id="smartAlertPrompt"', p.content ? '    class="smartAlertMargin"' : "", '    type="text"', "/>"].join("") } return p } function c() { var p = []; g.each(d.buttons, function (s, r) { var q = s == d.active ? " smartAlertActive" : ""; p.push(["<div", '    class="smartAlertButton' + q + '"', '    data-id="' + s + '"', ">", r, "</div>"].join("")) }); var o = parseInt(g.browser.version); g(["<div", '    id="smartAlert"', '    data-type="' + d.type + '"', '    data-cancel="' + d.cancel + '"', '    data-icon="' + d.icon + '"', '    data-align="' + d.align + '"', '    data-draggable="' + d.draggable + '"', '    data-pie="' + d.pie + '"', g.browser.chrome ? 'data-chrome="' + o + '"' : "", g.browser.webkit ? 'data-webkit="' + o + '"' : "", g.browser.mozilla ? 'data-mozilla="' + o + '"' : "", g.browser.opera ? 'data-opera="' + o + '"' : "", g.browser.msie ? 'data-ie="' + o + '"' : "", ">", '    <div id="smartAlertBox">', '        <div id="smartAlertHeader">', '            <div id="smartAlertTitle">', d.title, "            </div>", '            <div id="smartAlertClose"></div>', "        </div>", g.browser.msie && o == 7 ? ['        <table id="smartAlertBody">', "            <tbody>", "                <tr>", '                    <td id="smartAlertIcon"></td>', "                    <td>", '                        <div id="smartAlertContent">', '                            <div id="smartAlertScroll">', d.content, "                            </div>", "                        </div>", "                    </td>", "                </tr>", "            </tbody>", "        </table>"].join("") : ['        <div id="smartAlertBody">', '            <div id="smartAlertIcon"></div>', '            <div id="smartAlertContent">', '                <div id="smartAlertScroll">', d.content, "                </div>", "            </div>", "        </div>"].join(""), '        <div id="smartAlertButtons">', p.join(""), "        </div>", "    </div>", "</div>"].join("")).appendTo(d.container); m = g("#smartAlert"); b = g("#smartAlertBox"); b.width(d.width) } function a() { b.css({ top: Math.round(m.height() / 2 - b.outerHeight() / 2 - parseInt(b.css("margin-top"))), left: Math.round(m.width() / 2 - b.outerWidth() / 2 - parseInt(b.css("margin-left"))) }) } function f(p) { var q = g(".smartAlertButton", m); if (q.length <= 1) { return true } var o = q.filter(".smartAlertActive"); var s = q.length - 1; var r = o.index() + p; q.removeClass("smartAlertActive").eq(r > s ? 0 : (r < 0 ? s : r)).addClass("smartAlertActive"); return false } function l(o, p) { if (!h) { return } m.stop(true, true).fadeOut(250, function () { m.remove(); h = false; if (g.isFunction(o)) { o() } else { d.callback(o || false, p || "") } }) } function k() { if (!(g.browser.msie && g.browser.version <= 9)) { return } var p = g('link[href*="alert/css/"]'); var o = p.attr("href"); o = o.substr(0, o.lastIndexOf("/") + 1); g("*", m).each(function () { var q = g(this); if (q.css("behavior") != "none") { if (g.browser.version < 9) { q.css("behavior", "none") } q.css("behavior", "url(" + o + "PIE." + d.pie + ")") } }) } function j() { i(); g(document).on({ keydown: function (o) { if (h) { switch (o.which) { case 27: if (d.cancel) { l() } break; case 9: return f(1); break; case 13: g(".smartAlertActive", m).addClass("smartAlertClick"); break; default: return true } return false } }, keyup: function (o) { if (h && o.which == 13) { g(".smartAlertActive", m).removeClass("smartAlertClick").trigger("click"); return false } } }).on("click", "#smartAlertClose", function () { l() }).on({ mousedown: function () { g(this).addClass("smartAlertClick") }, "mouseup mouseleave": function () { g(this).removeClass("smartAlertClick") }, click: function () { var p = g(this).data("id"); var o = d.type == "prompt" ? g("#smartAlertPrompt").val() : ""; l(p, o) } }, ".smartAlertButton"); g(window).on("resize", function () { if (h && g(d.container).is("body")) { a() } }) } jQuery.alert = { open: function () { var p = arguments; function o() { d = n.apply(null, p); c(); if (d.draggable) { b.draggable({ containment: "#smartAlert", handle: "#smartAlertHeader" }) } m.css("visibility", "visible").find("#smartAlertScroll").css("max-height", d.maxHeight).mCustomScrollbar().find(".mCSB_container").attr("id", "smartAlertScrollArea").end().find(".mCSB_draggerRail").attr("id", "smartAlertScrollBar").end().find(".mCSB_dragger_bar").attr("id", "smartAlertScrollDrag"); a(); m.hide().fadeIn(250, function () { if (d.type == "prompt") { g("#smartAlertPrompt").focus() } }); k(); h = true } if (h) { l(o) } else { o() } }, setup: function (o) { if (g.isPlainObject(o)) { g.extend(true, e, o) } return g.extend(true, {}, e) } }; if (!jQuery.browser) { (function () { var o, p; jQuery.uaMatch = function (r) { r = r.toLowerCase(); var q = /(chrome)[ \/]([\w.]+)/.exec(r) || /(webkit)[ \/]([\w.]+)/.exec(r) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r) || /(msie) ([\w.]+)/.exec(r) || r.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r) || []; return { browser: q[1] || "", version: q[2] || "0" } }; o = jQuery.uaMatch(navigator.userAgent); p = {}; if (o.browser) { p[o.browser] = true; p.version = o.version } if (p.chrome) { p.webkit = true } else { if (p.webkit) { p.safari = true } } jQuery.browser = p })() } g(j) })(jQuery); (function (f) { function g(a) { var n = a || window.event, m = [].slice.call(arguments, 1), l = 0, k = !0, j = 0, i = 0; return a = f.event.fix(n), a.type = "mousewheel", n.wheelDelta && (l = n.wheelDelta / 120), n.detail && (l = -n.detail / 3), i = l, n.axis !== undefined && n.axis === n.HORIZONTAL_AXIS && (i = 0, j = -1 * l), n.wheelDeltaY !== undefined && (i = n.wheelDeltaY / 120), n.wheelDeltaX !== undefined && (j = -1 * n.wheelDeltaX / 120), m.unshift(a, l, j, i), (f.event.dispatch || f.event.handle).apply(this, m) } var e = ["DOMMouseScroll", "mousewheel"]; if (f.event.fixHooks) { for (var h = e.length; h;) { f.event.fixHooks[e[--h]] = f.event.mouseHooks } } f.event.special.mousewheel = { setup: function () { if (this.addEventListener) { for (var b = e.length; b;) { this.addEventListener(e[--b], g, !1) } } else { this.onmousewheel = g } }, teardown: function () { if (this.removeEventListener) { for (var b = e.length; b;) { this.removeEventListener(e[--b], g, !1) } } else { this.onmousewheel = null } } }, f.fn.extend({ mousewheel: function (b) { return b ? this.bind("mousewheel", b) : this.trigger("mousewheel") }, unmousewheel: function (b) { return this.unbind("mousewheel", b) } }) })(jQuery); (function (h) { var e = { init: function (b) { var a = { set_width: false, set_height: false, horizontalScroll: false, scrollInertia: 950, mouseWheel: true, mouseWheelPixels: "auto", autoDraggerLength: true, autoHideScrollbar: false, scrollButtons: { enable: false, scrollType: "continuous", scrollSpeed: "auto", scrollAmount: 40 }, advanced: { updateOnBrowserResize: true, updateOnContentResize: false, autoExpandHorizontalScroll: false, autoScrollOnFocus: true, normalizeMouseWheelDelta: false }, contentTouchScroll: true, callbacks: { onScrollStart: function () { }, onScroll: function () { }, onTotalScroll: function () { }, onTotalScrollBack: function () { }, onTotalScrollOffset: 0, onTotalScrollBackOffset: 0, whileScrolling: function () { } }, theme: "light" }, b = h.extend(true, a, b); return this.each(function () { var y = h(this); if (b.set_width) { y.css("width", b.set_width) } if (b.set_height) { y.css("height", b.set_height) } if (!h(document).data("mCustomScrollbar-index")) { h(document).data("mCustomScrollbar-index", "1") } else { var G = parseInt(h(document).data("mCustomScrollbar-index")); h(document).data("mCustomScrollbar-index", G + 1) } y.wrapInner("<div class='mCustomScrollBox mCS-" + b.theme + "' id='mCSB_" + h(document).data("mCustomScrollbar-index") + "' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_" + h(document).data("mCustomScrollbar-index")); var E = y.children(".mCustomScrollBox"); if (b.horizontalScroll) { E.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />"); var A = E.children(".mCSB_h_wrapper"); A.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({ width: A.children().outerWidth(), position: "relative" }).unwrap() } else { E.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />") } var w = E.children(".mCSB_container"); if (h.support.touch) { w.addClass("mCS_touch") } w.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>"); var z = E.children(".mCSB_scrollTools"), D = z.children(".mCSB_draggerContainer"), d = D.children(".mCSB_dragger"); if (b.horizontalScroll) { d.data("minDraggerWidth", d.width()) } else { d.data("minDraggerHeight", d.height()) } if (b.scrollButtons.enable) { if (b.horizontalScroll) { z.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>") } else { z.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>") } } E.bind("scroll", function () { if (!y.is(".mCS_disabled")) { E.scrollTop(0).scrollLeft(0) } }); y.data({ mCS_Init: true, mCustomScrollbarIndex: h(document).data("mCustomScrollbar-index"), horizontalScroll: b.horizontalScroll, scrollInertia: b.scrollInertia, scrollEasing: "mcsEaseOut", mouseWheel: b.mouseWheel, mouseWheelPixels: b.mouseWheelPixels, autoDraggerLength: b.autoDraggerLength, autoHideScrollbar: b.autoHideScrollbar, scrollButtons_enable: b.scrollButtons.enable, scrollButtons_scrollType: b.scrollButtons.scrollType, scrollButtons_scrollSpeed: b.scrollButtons.scrollSpeed, scrollButtons_scrollAmount: b.scrollButtons.scrollAmount, autoExpandHorizontalScroll: b.advanced.autoExpandHorizontalScroll, autoScrollOnFocus: b.advanced.autoScrollOnFocus, normalizeMouseWheelDelta: b.advanced.normalizeMouseWheelDelta, contentTouchScroll: b.contentTouchScroll, onScrollStart_Callback: b.callbacks.onScrollStart, onScroll_Callback: b.callbacks.onScroll, onTotalScroll_Callback: b.callbacks.onTotalScroll, onTotalScrollBack_Callback: b.callbacks.onTotalScrollBack, onTotalScroll_Offset: b.callbacks.onTotalScrollOffset, onTotalScrollBack_Offset: b.callbacks.onTotalScrollBackOffset, whileScrolling_Callback: b.callbacks.whileScrolling, bindEvent_scrollbar_drag: false, bindEvent_content_touch: false, bindEvent_scrollbar_click: false, bindEvent_mousewheel: false, bindEvent_buttonsContinuous_y: false, bindEvent_buttonsContinuous_x: false, bindEvent_buttonsPixels_y: false, bindEvent_buttonsPixels_x: false, bindEvent_focusin: false, bindEvent_autoHideScrollbar: false, mCSB_buttonScrollRight: false, mCSB_buttonScrollLeft: false, mCSB_buttonScrollDown: false, mCSB_buttonScrollUp: false }); if (b.horizontalScroll) { if (y.css("max-width") !== "none") { if (!b.advanced.updateOnContentResize) { b.advanced.updateOnContentResize = true } } } else { if (y.css("max-height") !== "none") { var H = false, c = parseInt(y.css("max-height")); if (y.css("max-height").indexOf("%") >= 0) { H = c, c = y.parent().height() * H / 100 } y.css("overflow", "hidden"); E.css("max-height", c) } } y.mCustomScrollbar("update"); if (b.advanced.updateOnBrowserResize) { var C, B = h(window).width(), F = h(window).height(); h(window).bind("resize." + y.data("mCustomScrollbarIndex"), function () { if (C) { clearTimeout(C) } C = setTimeout(function () { if (!y.is(".mCS_disabled") && !y.is(".mCS_destroyed")) { var i = h(window).width(), j = h(window).height(); if (B !== i || F !== j) { if (y.css("max-height") !== "none" && H) { E.css("max-height", y.parent().height() * H / 100) } y.mCustomScrollbar("update"); B = i; F = j } } }, 150) }) } if (b.advanced.updateOnContentResize) { var v; if (b.horizontalScroll) { var x = w.outerWidth() } else { var x = w.outerHeight() } v = setInterval(function () { if (b.horizontalScroll) { if (b.advanced.autoExpandHorizontalScroll) { w.css({ position: "absolute", width: "auto" }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({ width: w.outerWidth(), position: "relative" }).unwrap() } var i = w.outerWidth() } else { var i = w.outerHeight() } if (i != x) { y.mCustomScrollbar("update"); x = i } }, 300) } }) }, update: function () { var Q = h(this), T = Q.children(".mCustomScrollBox"), M = T.children(".mCSB_container"); M.removeClass("mCS_no_scrollbar"); Q.removeClass("mCS_disabled mCS_destroyed"); T.scrollTop(0).scrollLeft(0); var b = T.children(".mCSB_scrollTools"), P = b.children(".mCSB_draggerContainer"), R = P.children(".mCSB_dragger"); if (Q.data("horizontalScroll")) { var O = b.children(".mCSB_buttonLeft"), G = b.children(".mCSB_buttonRight"), Y = T.width(); if (Q.data("autoExpandHorizontalScroll")) { M.css({ position: "absolute", width: "auto" }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({ width: M.outerWidth(), position: "relative" }).unwrap() } var a = M.outerWidth() } else { var d = b.children(".mCSB_buttonUp"), X = b.children(".mCSB_buttonDown"), K = T.height(), V = M.outerHeight() } if (V > K && !Q.data("horizontalScroll")) { b.css("display", "block"); var I = P.height(); if (Q.data("autoDraggerLength")) { var F = Math.round(K / V * I), S = R.data("minDraggerHeight"); if (F <= S) { R.css({ height: S }) } else { if (F >= I - 10) { var N = I - 10; R.css({ height: N }) } else { R.css({ height: F }) } } R.children(".mCSB_dragger_bar").css({ "line-height": R.height() + "px" }) } var L = R.height(), c = (V - K) / (I - L); Q.data("scrollAmount", c).mCustomScrollbar("scrolling", T, M, P, R, d, X, O, G); var H = Math.abs(M.position().top); Q.mCustomScrollbar("scrollTo", H, { scrollInertia: 0 }) } else { if (a > Y && Q.data("horizontalScroll")) { b.css("display", "block"); var W = P.width(); if (Q.data("autoDraggerLength")) { var U = Math.round(Y / a * W), J = R.data("minDraggerWidth"); if (U <= J) { R.css({ width: J }) } else { if (U >= W - 10) { var Z = W - 10; R.css({ width: Z }) } else { R.css({ width: U }) } } } var E = R.width(), c = (a - Y) / (W - E); Q.data("scrollAmount", c).mCustomScrollbar("scrolling", T, M, P, R, d, X, O, G); var H = Math.abs(M.position().left); Q.mCustomScrollbar("scrollTo", H, { scrollInertia: 0 }) } else { T.unbind("mousewheel focusin"); if (Q.data("horizontalScroll")) { R.add(M).css("left", 0) } else { R.add(M).css("top", 0) } b.css("display", "none"); M.addClass("mCS_no_scrollbar"); Q.data({ bindEvent_mousewheel: false, bindEvent_focusin: false }) } } }, scrolling: function (U, M, P, S, b, X, L, c) { var R = h(this); if (!R.data("bindEvent_scrollbar_drag")) { var O, N; if (h.support.msPointer) { S.bind("MSPointerDown", function (k) { k.preventDefault(); R.data({ on_drag: true }); S.addClass("mCSB_dragger_onDrag"); var l = h(this), i = l.offset(), m = k.originalEvent.pageX - i.left, j = k.originalEvent.pageY - i.top; if (m < l.width() && m > 0 && j < l.height() && j > 0) { O = j; N = m } }); h(document).bind("MSPointerMove." + R.data("mCustomScrollbarIndex"), function (k) { k.preventDefault(); if (R.data("on_drag")) { var l = S, i = l.offset(), m = k.originalEvent.pageX - i.left, j = k.originalEvent.pageY - i.top; G(O, N, j, m) } }).bind("MSPointerUp." + R.data("mCustomScrollbarIndex"), function (i) { i.preventDefault(); R.data({ on_drag: false }); S.removeClass("mCSB_dragger_onDrag") }) } else { S.bind("mousedown touchstart", function (l) { l.preventDefault(); l.stopImmediatePropagation(); var m = h(this), i = m.offset(), n, j; if (l.type === "touchstart") { var k = l.originalEvent.touches[0] || l.originalEvent.changedTouches[0]; n = k.pageX - i.left; j = k.pageY - i.top } else { R.data({ on_drag: true }); S.addClass("mCSB_dragger_onDrag"); n = l.pageX - i.left; j = l.pageY - i.top } if (n < m.width() && n > 0 && j < m.height() && j > 0) { O = j; N = n } }).bind("touchmove", function (l) { l.preventDefault(); l.stopImmediatePropagation(); var i = l.originalEvent.touches[0] || l.originalEvent.changedTouches[0], m = h(this), j = m.offset(), n = i.pageX - j.left, k = i.pageY - j.top; G(O, N, k, n) }); h(document).bind("mousemove." + R.data("mCustomScrollbarIndex"), function (k) { k.preventDefault(); if (R.data("on_drag")) { var l = S, i = l.offset(), m = k.pageX - i.left, j = k.pageY - i.top; G(O, N, j, m) } }).bind("mouseup." + R.data("mCustomScrollbarIndex"), function (i) { i.preventDefault(); R.data({ on_drag: false }); S.removeClass("mCSB_dragger_onDrag") }) } R.data({ bindEvent_scrollbar_drag: true }) } function G(k, j, i, l) { if (R.data("horizontalScroll")) { R.mCustomScrollbar("scrollTo", (S.position().left - (j)) + l, { moveDragger: true, trigger: "internal" }) } else { R.mCustomScrollbar("scrollTo", (S.position().top - (k)) + i, { moveDragger: true, trigger: "internal" }) } } if (h.support.touch && R.data("contentTouchScroll")) { if (!R.data("bindEvent_content_touch")) { var Q, K, I, F, d, H, y; M.bind("touchstart", function (i) { i.stopImmediatePropagation(); Q = i.originalEvent.touches[0] || i.originalEvent.changedTouches[0]; K = h(this); I = K.offset(); d = Q.pageX - I.left; F = Q.pageY - I.top; H = F; y = d }); M.bind("touchmove", function (i) { i.preventDefault(); i.stopImmediatePropagation(); Q = i.originalEvent.touches[0] || i.originalEvent.changedTouches[0]; K = h(this).parent(); I = K.offset(); d = Q.pageX - I.left; F = Q.pageY - I.top; if (R.data("horizontalScroll")) { R.mCustomScrollbar("scrollTo", y - d, { trigger: "internal" }) } else { R.mCustomScrollbar("scrollTo", H - F, { trigger: "internal" }) } }) } } if (!R.data("bindEvent_scrollbar_click")) { P.bind("click", function (j) { var i = (j.pageY - P.offset().top) * R.data("scrollAmount"), k = h(j.target); if (R.data("horizontalScroll")) { i = (j.pageX - P.offset().left) * R.data("scrollAmount") } if (k.hasClass("mCSB_draggerContainer") || k.hasClass("mCSB_draggerRail")) { R.mCustomScrollbar("scrollTo", i, { trigger: "internal", scrollEasing: "draggerRailEase" }) } }); R.data({ bindEvent_scrollbar_click: true }) } if (R.data("mouseWheel")) { if (!R.data("bindEvent_mousewheel")) { U.bind("mousewheel", function (l, j) { var m, n = R.data("mouseWheelPixels"), i = Math.abs(M.position().top), k = S.position().top, o = P.height() - S.height(); if (R.data("normalizeMouseWheelDelta")) { if (j < 0) { j = -1 } else { j = 1 } } if (n === "auto") { n = 100 + Math.round(R.data("scrollAmount") / 2) } if (R.data("horizontalScroll")) { k = S.position().left; o = P.width() - S.width(); i = Math.abs(M.position().left) } if ((j > 0 && k !== 0) || (j < 0 && k !== o)) { l.preventDefault(); l.stopImmediatePropagation() } m = i - (j * n); R.mCustomScrollbar("scrollTo", m, { trigger: "internal" }) }); R.data({ bindEvent_mousewheel: true }) } } if (R.data("scrollButtons_enable")) { if (R.data("scrollButtons_scrollType") === "pixels") { if (R.data("horizontalScroll")) { c.add(L).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend", T, V); R.data({ bindEvent_buttonsContinuous_x: false }); if (!R.data("bindEvent_buttonsPixels_x")) { c.bind("click", function (i) { i.preventDefault(); J(Math.abs(M.position().left) + R.data("scrollButtons_scrollAmount")) }); L.bind("click", function (i) { i.preventDefault(); J(Math.abs(M.position().left) - R.data("scrollButtons_scrollAmount")) }); R.data({ bindEvent_buttonsPixels_x: true }) } } else { X.add(b).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend", T, V); R.data({ bindEvent_buttonsContinuous_y: false }); if (!R.data("bindEvent_buttonsPixels_y")) { X.bind("click", function (i) { i.preventDefault(); J(Math.abs(M.position().top) + R.data("scrollButtons_scrollAmount")) }); b.bind("click", function (i) { i.preventDefault(); J(Math.abs(M.position().top) - R.data("scrollButtons_scrollAmount")) }); R.data({ bindEvent_buttonsPixels_y: true }) } } function J(i) { if (!S.data("preventAction")) { S.data("preventAction", true); R.mCustomScrollbar("scrollTo", i, { trigger: "internal" }) } } } else { if (R.data("horizontalScroll")) { c.add(L).unbind("click"); R.data({ bindEvent_buttonsPixels_x: false }); if (!R.data("bindEvent_buttonsContinuous_x")) { c.bind("mousedown touchstart MSPointerDown", function (j) { j.preventDefault(); var i = a(); R.data({ mCSB_buttonScrollRight: setInterval(function () { R.mCustomScrollbar("scrollTo", Math.abs(M.position().left) + i, { trigger: "internal", scrollEasing: "easeOutCirc" }) }, 17) }) }); var T = function (i) { i.preventDefault(); clearInterval(R.data("mCSB_buttonScrollRight")) }; c.bind("mouseup touchend MSPointerUp mouseout MSPointerOut", T); L.bind("mousedown touchstart MSPointerDown", function (j) { j.preventDefault(); var i = a(); R.data({ mCSB_buttonScrollLeft: setInterval(function () { R.mCustomScrollbar("scrollTo", Math.abs(M.position().left) - i, { trigger: "internal", scrollEasing: "easeOutCirc" }) }, 17) }) }); var V = function (i) { i.preventDefault(); clearInterval(R.data("mCSB_buttonScrollLeft")) }; L.bind("mouseup touchend MSPointerUp mouseout MSPointerOut", V); R.data({ bindEvent_buttonsContinuous_x: true }) } } else { X.add(b).unbind("click"); R.data({ bindEvent_buttonsPixels_y: false }); if (!R.data("bindEvent_buttonsContinuous_y")) { X.bind("mousedown touchstart MSPointerDown", function (j) { j.preventDefault(); var i = a(); R.data({ mCSB_buttonScrollDown: setInterval(function () { R.mCustomScrollbar("scrollTo", Math.abs(M.position().top) + i, { trigger: "internal", scrollEasing: "easeOutCirc" }) }, 17) }) }); var x = function (i) { i.preventDefault(); clearInterval(R.data("mCSB_buttonScrollDown")) }; X.bind("mouseup touchend MSPointerUp mouseout MSPointerOut", x); b.bind("mousedown touchstart MSPointerDown", function (j) { j.preventDefault(); var i = a(); R.data({ mCSB_buttonScrollUp: setInterval(function () { R.mCustomScrollbar("scrollTo", Math.abs(M.position().top) - i, { trigger: "internal", scrollEasing: "easeOutCirc" }) }, 17) }) }); var W = function (i) { i.preventDefault(); clearInterval(R.data("mCSB_buttonScrollUp")) }; b.bind("mouseup touchend MSPointerUp mouseout MSPointerOut", W); R.data({ bindEvent_buttonsContinuous_y: true }) } } function a() { var i = R.data("scrollButtons_scrollSpeed"); if (R.data("scrollButtons_scrollSpeed") === "auto") { i = Math.round((R.data("scrollInertia") + 100) / 40) } return i } } } if (R.data("autoScrollOnFocus")) { if (!R.data("bindEvent_focusin")) { U.bind("focusin", function () { U.scrollTop(0).scrollLeft(0); var i = h(document.activeElement); if (i.is("input,textarea,select,button,a[tabindex],area,object")) { var j = M.position().top, l = i.position().top, k = U.height() - i.outerHeight(); if (R.data("horizontalScroll")) { j = M.position().left; l = i.position().left; k = U.width() - i.outerWidth() } if (j + l < 0 || j + l > k) { R.mCustomScrollbar("scrollTo", l, { trigger: "internal" }) } } }); R.data({ bindEvent_focusin: true }) } } if (R.data("autoHideScrollbar")) { if (!R.data("bindEvent_autoHideScrollbar")) { U.bind("mouseenter", function (i) { U.addClass("mCS-mouse-over"); g.showScrollbar.call(U.children(".mCSB_scrollTools")) }).bind("mouseleave touchend", function (i) { U.removeClass("mCS-mouse-over"); if (i.type === "mouseleave") { g.hideScrollbar.call(U.children(".mCSB_scrollTools")) } }); R.data({ bindEvent_autoHideScrollbar: true }) } } }, scrollTo: function (v, F) { var a = h(this), y = { moveDragger: false, trigger: "external", callbacks: true, scrollInertia: a.data("scrollInertia"), scrollEasing: a.data("scrollEasing") }, F = h.extend(y, F), z, A = a.children(".mCustomScrollBox"), H = A.children(".mCSB_container"), b = A.children(".mCSB_scrollTools"), B = b.children(".mCSB_draggerContainer"), G = B.children(".mCSB_dragger"), C = draggerSpeed = F.scrollInertia, w, D, x, E; a.data({ mCS_trigger: F.trigger }); if (a.data("mCS_Init")) { F.callbacks = false } if (v || v === 0) { if (typeof (v) === "number") { if (F.moveDragger) { z = v; if (a.data("horizontalScroll")) { v = G.position().left * a.data("scrollAmount") } else { v = G.position().top * a.data("scrollAmount") } draggerSpeed = 0 } else { z = v / a.data("scrollAmount") } } else { if (typeof (v) === "string") { var c; if (v === "top") { c = 0 } else { if (v === "bottom" && !a.data("horizontalScroll")) { c = H.outerHeight() - A.height() } else { if (v === "left") { c = 0 } else { if (v === "right" && a.data("horizontalScroll")) { c = H.outerWidth() - A.width() } else { if (v === "first") { c = a.find(".mCSB_container").find(":first") } else { if (v === "last") { c = a.find(".mCSB_container").find(":last") } else { c = a.find(v) } } } } } } if (c.length === 1) { if (a.data("horizontalScroll")) { v = c.position().left } else { v = c.position().top } z = v / a.data("scrollAmount") } else { z = v = c } } } if (a.data("horizontalScroll")) { if (a.data("onTotalScrollBack_Offset")) { D = -a.data("onTotalScrollBack_Offset") } if (a.data("onTotalScroll_Offset")) { E = A.width() - H.outerWidth() + a.data("onTotalScroll_Offset") } if (z < 0) { z = v = 0; clearInterval(a.data("mCSB_buttonScrollLeft")); if (!D) { w = true } } else { if (z >= B.width() - G.width()) { z = B.width() - G.width(); v = A.width() - H.outerWidth(); clearInterval(a.data("mCSB_buttonScrollRight")); if (!E) { x = true } } else { v = -v } } g.mTweenAxis.call(this, G[0], "left", Math.round(z), draggerSpeed, F.scrollEasing); g.mTweenAxis.call(this, H[0], "left", Math.round(v), C, F.scrollEasing, { onStart: function () { if (F.callbacks && !a.data("mCS_tweenRunning")) { d("onScrollStart") } if (a.data("autoHideScrollbar")) { g.showScrollbar.call(b) } }, onUpdate: function () { if (F.callbacks) { d("whileScrolling") } }, onComplete: function () { if (F.callbacks) { d("onScroll"); if (w || (D && H.position().left >= D)) { d("onTotalScrollBack") } if (x || (E && H.position().left <= E)) { d("onTotalScroll") } } G.data("preventAction", false); a.data("mCS_tweenRunning", false); if (a.data("autoHideScrollbar")) { if (!A.hasClass("mCS-mouse-over")) { g.hideScrollbar.call(b) } } } }) } else { if (a.data("onTotalScrollBack_Offset")) { D = -a.data("onTotalScrollBack_Offset") } if (a.data("onTotalScroll_Offset")) { E = A.height() - H.outerHeight() + a.data("onTotalScroll_Offset") } if (z < 0) { z = v = 0; clearInterval(a.data("mCSB_buttonScrollUp")); if (!D) { w = true } } else { if (z >= B.height() - G.height()) { z = B.height() - G.height(); v = A.height() - H.outerHeight(); clearInterval(a.data("mCSB_buttonScrollDown")); if (!E) { x = true } } else { v = -v } } g.mTweenAxis.call(this, G[0], "top", Math.round(z), draggerSpeed, F.scrollEasing); g.mTweenAxis.call(this, H[0], "top", Math.round(v), C, F.scrollEasing, { onStart: function () { if (F.callbacks && !a.data("mCS_tweenRunning")) { d("onScrollStart") } if (a.data("autoHideScrollbar")) { g.showScrollbar.call(b) } }, onUpdate: function () { if (F.callbacks) { d("whileScrolling") } }, onComplete: function () { if (F.callbacks) { d("onScroll"); if (w || (D && H.position().top >= D)) { d("onTotalScrollBack") } if (x || (E && H.position().top <= E)) { d("onTotalScroll") } } G.data("preventAction", false); a.data("mCS_tweenRunning", false); if (a.data("autoHideScrollbar")) { if (!A.hasClass("mCS-mouse-over")) { g.hideScrollbar.call(b) } } } }) } if (a.data("mCS_Init")) { a.data({ mCS_Init: false }) } } function d(i) { this.mcs = { top: H.position().top, left: H.position().left, draggerTop: G.position().top, draggerLeft: G.position().left, topPct: Math.round((100 * Math.abs(H.position().top)) / Math.abs(H.outerHeight() - A.height())), leftPct: Math.round((100 * Math.abs(H.position().left)) / Math.abs(H.outerWidth() - A.width())) }; switch (i) { case "onScrollStart": a.data("mCS_tweenRunning", true).data("onScrollStart_Callback").call(a, this.mcs); break; case "whileScrolling": a.data("whileScrolling_Callback").call(a, this.mcs); break; case "onScroll": a.data("onScroll_Callback").call(a, this.mcs); break; case "onTotalScrollBack": a.data("onTotalScrollBack_Callback").call(a, this.mcs); break; case "onTotalScroll": a.data("onTotalScroll_Callback").call(a, this.mcs); break } } }, stop: function () { var a = h(this), c = a.children().children(".mCSB_container"), b = a.children().children().children().children(".mCSB_dragger"); g.mTweenAxisStop.call(this, c[0]); g.mTweenAxisStop.call(this, b[0]) }, disable: function (l) { var a = h(this), k = a.children(".mCustomScrollBox"), c = k.children(".mCSB_container"), d = k.children(".mCSB_scrollTools"), b = d.children().children(".mCSB_dragger"); k.unbind("mousewheel focusin mouseenter mouseleave touchend"); c.unbind("touchstart touchmove"); if (l) { if (a.data("horizontalScroll")) { b.add(c).css("left", 0) } else { b.add(c).css("top", 0) } } d.css("display", "none"); c.addClass("mCS_no_scrollbar"); a.data({ bindEvent_mousewheel: false, bindEvent_focusin: false, bindEvent_content_touch: false, bindEvent_autoHideScrollbar: false }).addClass("mCS_disabled") }, destroy: function () { var a = h(this); a.removeClass("mCustomScrollbar _mCS_" + a.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(); h(document).unbind("mousemove." + a.data("mCustomScrollbarIndex") + " mouseup." + a.data("mCustomScrollbarIndex") + " MSPointerMove." + a.data("mCustomScrollbarIndex") + " MSPointerUp." + a.data("mCustomScrollbarIndex")); h(window).unbind("resize." + a.data("mCustomScrollbarIndex")) } }, g = { showScrollbar: function () { this.stop().animate({ opacity: 1 }, "fast") }, hideScrollbar: function () { this.stop().animate({ opacity: 0 }, "fast") }, mTweenAxis: function (N, L, M, O, F, a) { var a = a || {}, d = a.onStart || function () { }, E = a.onUpdate || function () { }, c = a.onComplete || function () { }; var G = A(), I, K = 0, C = N.offsetTop, B = N.style; if (L === "left") { C = N.offsetLeft } var H = M - C; D(); P(); function A() { if (window.performance && window.performance.now) { return window.performance.now() } else { if (window.performance && window.performance.webkitNow) { return window.performance.webkitNow() } else { if (Date.now) { return Date.now() } else { return new Date().getTime() } } } } function b() { if (!K) { d.call() } K = A() - G; z(); if (K >= N._time) { N._time = (K > N._time) ? K + I - (K - N._time) : K + I - 1; if (N._time < K + 1) { N._time = K + 1 } } if (N._time < O) { N._id = _request(b) } else { c.call() } } function z() { if (O > 0) { N.currVal = J(N._time, C, H, O, F); B[L] = Math.round(N.currVal) + "px" } else { B[L] = M + "px" } E.call() } function P() { I = 1000 / 60; N._time = K + I; _request = (!window.requestAnimationFrame) ? function (i) { z(); return setTimeout(i, 0.01) } : window.requestAnimationFrame; N._id = _request(b) } function D() { if (N._id == null) { return } if (!window.requestAnimationFrame) { clearTimeout(N._id) } else { window.cancelAnimationFrame(N._id) } N._id = null } function J(o, i, j, k, n) { switch (n) { case "linear": return j * o / k + i; break; case "easeOutQuad": o /= k; return -j * o * (o - 2) + i; break; case "easeInOutQuad": o /= k / 2; if (o < 1) { return j / 2 * o * o + i } o--; return -j / 2 * (o * (o - 2) - 1) + i; break; case "easeOutCubic": o /= k; o--; return j * (o * o * o + 1) + i; break; case "easeOutQuart": o /= k; o--; return -j * (o * o * o * o - 1) + i; break; case "easeOutQuint": o /= k; o--; return j * (o * o * o * o * o + 1) + i; break; case "easeOutCirc": o /= k; o--; return j * Math.sqrt(1 - o * o) + i; break; case "easeOutSine": return j * Math.sin(o / k * (Math.PI / 2)) + i; break; case "easeOutExpo": return j * (-Math.pow(2, -10 * o / k) + 1) + i; break; case "mcsEaseOut": var l = (o /= k) * o, m = l * o; return i + j * (0.499999999999997 * m * l + -2.5 * l * l + 5.5 * m + -6.5 * l + 4 * o); break; case "draggerRailEase": o /= k / 2; if (o < 1) { return j / 2 * o * o * o + i } o -= 2; return j / 2 * (o * o * o + 2) + i; break } } }, mTweenAxisStop: function (a) { if (a._id == null) { return } if (!window.requestAnimationFrame) { clearTimeout(a._id) } else { window.cancelAnimationFrame(a._id) } a._id = null }, rafPolyfill: function () { var a = ["ms", "moz", "webkit", "o"], b = a.length; while (--b > -1 && !window.requestAnimationFrame) { window.requestAnimationFrame = window[a[b] + "RequestAnimationFrame"]; window.cancelAnimationFrame = window[a[b] + "CancelAnimationFrame"] || window[a[b] + "CancelRequestAnimationFrame"] } } }; g.rafPolyfill.call(); h.support.touch = !!("ontouchstart" in window); h.support.msPointer = window.navigator.msPointerEnabled; var f = ("https:" == document.location.protocol) ? "https:" : "http:"; h.event.special.mousewheel || document.write('<script src="' + f + '//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"><\/script>'); h.fn.mCustomScrollbar = function (a) { if (e[a]) { return e[a].apply(this, Array.prototype.slice.call(arguments, 1)) } else { if (typeof a === "object" || !a) { return e.init.apply(this, arguments) } else { h.error("Method " + a + " does not exist") } } } })(jQuery);

var qq=function(a){"use strict";return{hide:function(){return a.style.display="none",this},attach:function(b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c),function(){qq(a).detach(b,c)}},detach:function(b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c),this},contains:function(b){return b?a===b?!0:a.contains?a.contains(b):!!(8&b.compareDocumentPosition(a)):!1},insertBefore:function(b){return b.parentNode.insertBefore(a,b),this},remove:function(){return a.parentNode.removeChild(a),this},css:function(b){if(null==a.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=b.opacity&&"string"!=typeof a.style.opacity&&"undefined"!=typeof a.filters&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"),qq.extend(a.style,b),this},hasClass:function(b){var c=new RegExp("(^| )"+b+"( |$)");return c.test(a.className)},addClass:function(b){return qq(a).hasClass(b)||(a.className+=" "+b),this},removeClass:function(b){var c=new RegExp("(^| )"+b+"( |$)");return a.className=a.className.replace(c," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(b){var c,d=[];return a.querySelectorAll?a.querySelectorAll("."+b):(c=a.getElementsByTagName("*"),qq.each(c,function(a,c){qq(c).hasClass(b)&&d.push(c)}),d)},children:function(){for(var b=[],c=a.firstChild;c;)1===c.nodeType&&b.push(c),c=c.nextSibling;return b},setText:function(b){return a.innerText=b,a.textContent=b,this},clearText:function(){return qq(a).setText("")},hasAttribute:function(b){var c;return a.hasAttribute?a.hasAttribute(b)?null==/^false$/i.exec(a.getAttribute(b)):!1:(c=a[b],void 0===c?!1:null==/^false$/i.exec(c))}}};!function(){"use strict";qq.log=function(a,b){window.console&&(b&&"info"!==b?window.console[b]?window.console[b](a):window.console.log("<"+b+"> "+a):window.console.log(a))},qq.isObject=function(a){return a&&!a.nodeType&&"[object Object]"===Object.prototype.toString.call(a)},qq.isFunction=function(a){return"function"==typeof a},qq.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)||a&&window.ArrayBuffer&&a.buffer&&a.buffer.constructor===ArrayBuffer},qq.isItemList=function(a){return"[object DataTransferItemList]"===Object.prototype.toString.call(a)},qq.isNodeList=function(a){return"[object NodeList]"===Object.prototype.toString.call(a)||a.item&&a.namedItem},qq.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)},qq.trimStr=function(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},qq.format=function(a){var b=Array.prototype.slice.call(arguments,1),c=a,d=c.indexOf("{}");return qq.each(b,function(a,b){var e=c.substring(0,d),f=c.substring(d+2);return c=e+b+f,d=c.indexOf("{}",d+b.length),0>d?!1:void 0}),c},qq.isFile=function(a){return window.File&&"[object File]"===Object.prototype.toString.call(a)},qq.isFileList=function(a){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(a)},qq.isFileOrInput=function(a){return qq.isFile(a)||qq.isInput(a)},qq.isInput=function(a,b){var c=function(a){var c=a.toLowerCase();return b?"file"!==c:"file"===c};return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(a)&&a.type&&c(a.type)?!0:a.tagName&&"input"===a.tagName.toLowerCase()&&a.type&&c(a.type)?!0:!1},qq.isBlob=function(a){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(a)?!0:void 0},qq.isXhrUploadSupported=function(){var a=document.createElement("input");return a.type="file",void 0!==a.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(a){return a.items&&a.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(a,b,c){var d=a.slice||a.mozSlice||a.webkitSlice;return d.call(a,b,c)},qq.arrayBufferToHex=function(a){var b="",c=new Uint8Array(a);return qq.each(c,function(a,c){var d=c.toString(16);d.length<2&&(d="0"+d),b+=d}),b},qq.readBlobToHex=function(a,b,c){var d=qq.sliceBlob(a,b,b+c),e=new FileReader,f=new qq.Promise;return e.onload=function(){f.success(qq.arrayBufferToHex(e.result))},e.onerror=f.failure,e.readAsArrayBuffer(d),f},qq.extend=function(a,b,c){return qq.each(b,function(b,d){c&&qq.isObject(d)?(void 0===a[b]&&(a[b]={}),qq.extend(a[b],d,!0)):a[b]=d}),a},qq.override=function(a,b){var c={},d=b(c);return qq.each(d,function(b,d){void 0!==a[b]&&(c[b]=a[b]),a[b]=d}),a},qq.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);c=c||0;var d=a.length;for(0>c&&(c+=d);d>c;c+=1)if(a.hasOwnProperty(c)&&a[c]===b)return c;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("rv:11")},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;var c=a.firstChild;return a.removeChild(c),c}}(),qq.each=function(a,b){var c,d;if(a)if(window.Storage&&a.constructor===window.Storage)for(c=0;c<a.length&&(d=b(a.key(c),a.getItem(a.key(c))),d!==!1);c++);else if(qq.isArray(a)||qq.isItemList(a)||qq.isNodeList(a))for(c=0;c<a.length&&(d=b(c,a[c]),d!==!1);c++);else if(qq.isString(a))for(c=0;c<a.length&&(d=b(c,a.charAt(c)),d!==!1);c++);else for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&(d=b(c,a[c]),d===!1))break},qq.bind=function(a,b){if(qq.isFunction(a)){var c=Array.prototype.slice.call(arguments,2);return function(){var d=qq.extend([],c);return arguments.length&&(d=d.concat(Array.prototype.slice.call(arguments))),a.apply(b,d)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(a,b,c){var d=[],e="&",f=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;"undefined"!==e&&"undefined"!==c&&d.push("object"==typeof a?qq.obj2url(a,e,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};return!c&&b?(e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(qq.obj2url(a))):"[object Array]"===Object.prototype.toString.call(a)&&"undefined"!=typeof a?qq.each(a,function(a,b){f(b,a)}):"undefined"!=typeof a&&null!==a&&"object"==typeof a?qq.each(a,function(a,b){f(b,a)}):d.push(encodeURIComponent(b)+"="+encodeURIComponent(a)),b?d.join(e):d.join(e).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(a,b,c){return b||(b=new FormData),qq.each(a,function(a,d){a=c?c+"["+a+"]":a,qq.isObject(d)?qq.obj2FormData(d,b,a):qq.isFunction(d)?b.append(a,d()):b.append(a,d)}),b},qq.obj2Inputs=function(a,b){var c;return b||(b=document.createElement("form")),qq.obj2FormData(a,{append:function(a,d){c=document.createElement("input"),c.setAttribute("name",a),c.setAttribute("value",d),b.appendChild(c)}}),b},qq.setCookie=function(a,b,c){var d=new Date,e="";c&&(d.setTime(d.getTime()+1e3*60*60*24*c),e="; expires="+d.toGMTString()),document.cookie=a+"="+b+e+"; path=/"},qq.getCookie=function(a){var b,c=a+"=",d=document.cookie.split(";");return qq.each(d,function(a,d){for(var e=d;" "==e.charAt(0);)e=e.substring(1,e.length);return 0===e.indexOf(c)?(b=e.substring(c.length,e.length),!1):void 0}),b},qq.getCookieNames=function(a){var b=document.cookie.split(";"),c=[];return qq.each(b,function(b,d){d=qq.trimStr(d);var e=d.indexOf("=");d.match(a)&&c.push(d.substr(0,e))}),c},qq.deleteCookie=function(a){qq.setCookie(a,"",-1)},qq.areCookiesEnabled=function(){var a=1e5*Math.random(),b="qqCookieTest:"+a;return qq.setCookie(b,1),qq.getCookie(b)?(qq.deleteCookie(b),!0):!1},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(a){var b=a.lastIndexOf(".")+1;return b>0?a.substr(b,a.length-b):void 0},qq.getFilename=function(a){return qq.isInput(a)?a.value.replace(/.*(\/|\\)/,""):qq.isFile(a)&&null!==a.fileName&&void 0!==a.fileName?a.fileName:a.name},qq.DisposeSupport=function(){var a=[];return{dispose:function(){var b;do b=a.shift(),b&&b();while(b)},attach:function(){var a=arguments;this.addDisposer(qq(a[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(b){a.push(b)}}}}(),function(){"use strict";qq.Error=function(a){this.message="[Fine Uploader "+qq.version+"] "+a},qq.Error.prototype=new Error}(),qq.version="4.4.0",qq.supportedFeatures=function(){"use strict";function a(){var a,b=!0;try{a=document.createElement("input"),a.type="file",qq(a).hide(),a.disabled&&(b=!1)}catch(c){b=!1}return b}function b(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}function c(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}function d(){if(window.XMLHttpRequest){var a=qq.createXhrInstance();return void 0!==a.withCredentials}return!1}function e(){return void 0!==window.XDomainRequest}function f(){return d()?!0:e()}function g(){return void 0!==document.createElement("input").webkitdirectory}var h,i,j,k,l,m,n,o,p,q,r,s,t,u;return h=a(),j=h&&qq.isXhrUploadSupported(),i=j&&!qq.androidStock(),k=j&&b(),l=j&&qq.isFileChunkingSupported(),m=j&&l&&qq.areCookiesEnabled(),n=j&&c(),o=h&&(void 0!==window.postMessage||j),q=d(),p=e(),r=f(),s=g(),t=j&&void 0!==window.FileReader,u=function(){return j?!(qq.androidStock()||qq.ios()&&navigator.userAgent.indexOf("CriOS")>=0):!1}(),{ajaxUploading:j,blobUploading:i,canDetermineSize:j,chunking:l,deleteFileCors:r,deleteFileCorsXdr:p,deleteFileCorsXhr:q,fileDrop:j,folderDrop:k,folderSelection:s,imagePreviews:t,imageValidation:t,itemSizeValidation:j,pause:l,progressBar:u,resume:m,scaling:t&&i,tiffPreviews:qq.safari(),uploading:h,uploadCors:o,uploadCustomHeaders:j,uploadNonMultipart:j,uploadViaPaste:n}}(),qq.Promise=function(){"use strict";var a,b,c=[],d=[],e=[],f=0;qq.extend(this,{then:function(e,g){return 0===f?(e&&c.push(e),g&&d.push(g)):-1===f?g&&g.apply(null,b):e&&e.apply(null,a),this},done:function(c){return 0===f?e.push(c):c.apply(null,void 0===b?a:b),this},success:function(){return f=1,a=arguments,c.length&&qq.each(c,function(b,c){c.apply(null,a)}),e.length&&qq.each(e,function(b,c){c.apply(null,a)}),this},failure:function(){return f=-1,b=arguments,d.length&&qq.each(d,function(a,c){c.apply(null,b)}),e.length&&qq.each(e,function(a,c){c.apply(null,b)}),this}})},qq.BlobProxy=function(a,b){"use strict";qq.extend(this,{referenceBlob:a,create:function(){return b(a)}})},qq.UploadButton=function(a){"use strict";function b(){var a=document.createElement("input");return a.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,d),f.multiple&&a.setAttribute("multiple",""),f.folders&&qq.supportedFeatures.folderSelection&&a.setAttribute("webkitdirectory",""),f.acceptFiles&&a.setAttribute("accept",f.acceptFiles),a.setAttribute("type","file"),a.setAttribute("name",f.name),qq(a).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0,width:"97%","z-index" : "999"}),f.element.appendChild(a),e.attach(a,"change",function(){f.onChange(a)}),e.attach(a,"mouseover",function(){qq(f.element).addClass(f.hoverClass)}),e.attach(a,"mouseout",function(){qq(f.element).removeClass(f.hoverClass)}),e.attach(a,"focus",function(){qq(f.element).addClass(f.focusClass)}),e.attach(a,"blur",function(){qq(f.element).removeClass(f.focusClass)}),window.attachEvent&&a.setAttribute("tabIndex","-1"),a}var c,d,e=new qq.DisposeSupport,f={element:null,multiple:!1,acceptFiles:null,folders:!1,name:"qqfile",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(f,a),d=qq.getUniqueId(),qq(f.element).css({position:"relative",direction:"rtl"}),c=b(),qq.extend(this,{getInput:function(){return c},getButtonId:function(){return d},setMultiple:function(a){a!==f.multiple&&(a?c.setAttribute("multiple",""):c.removeAttribute("multiple"))},setAcceptFiles:function(a){a!==f.acceptFiles&&c.setAttribute("accept",a)},reset:function(){c.parentNode&&qq(c).remove(),qq(f.element).removeClass(f.focusClass),c=b()}})},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(a){"use strict";function b(a){if(qq.isArray(a)){var b=[];return qq.each(a,function(a,c){b.push(e[c])}),b}return e[a]}function c(a){if(qq.isArray(a)){var b=[];return qq.each(a,function(a,c){b.push(e[f[c]])}),b}return e[f[a]]}function d(a){var b=[],c=[].concat(a);return qq.each(c,function(a,c){var d=g[c];void 0!==d&&qq.each(d,function(a,c){b.push(e[c])})}),b}var e=[],f={},g={};qq.extend(this,{addFile:function(b,c,d,h){h=h||qq.status.SUBMITTING;var i=e.push({name:c,originalName:c,uuid:b,size:d,status:h})-1;return e[i].id=i,f[b]=i,void 0===g[h]&&(g[h]=[]),g[h].push(i),a.onStatusChange(i,null,h),i},retrieve:function(a){return qq.isObject(a)&&e.length?void 0!==a.id?b(a.id):void 0!==a.uuid?c(a.uuid):a.status?d(a.status):void 0:qq.extend([],e,!0)},reset:function(){e=[],f={},g={}},setStatus:function(b,c){var d=e[b].status,f=qq.indexOf(g[d],b);g[d].splice(f,1),e[b].status=c,void 0===g[c]&&(g[c]=[]),g[c].push(b),a.onStatusChange(b,d,c)},uuidChanged:function(a,b){var c=e[a].uuid;e[a].uuid=b,f[b]=a,delete f[c]},updateName:function(a,b){e[a].name=b},updateSize:function(a,b){e[a].size=b},setParentId:function(a,b){e[a].parentId=b},setGroupIds:function(a,b){e[a].groupIds=b}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={log:function(a,b){!this._options.debug||b&&"info"!==b?b&&"info"!==b&&qq.log("[Fine Uploader "+qq.version+"] "+a,b):qq.log("[Fine Uploader "+qq.version+"] "+a)},setParams:function(a,b){this._paramsStore.set(a,b)},setDeleteFileParams:function(a,b){this._deleteFileParamsStore.set(a,b)},setEndpoint:function(a,b){this._endpointStore.set(a,b)},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){var a;if(0===this._storedIds.length)this._itemError("noFilesError");else for(;this._storedIds.length;)a=this._storedIds.shift(),this._uploadFile(a)},clearStoredFiles:function(){this._storedIds=[]},retry:function(a){return this._manualRetry(a)},cancel:function(a){this._handler.cancel(a)},cancelAll:function(){var a=[],b=this;qq.extend(a,this._storedIds),qq.each(a,function(a,c){b.cancel(c)}),this._handler.cancelAll()},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,function(a,b){b.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset(),this._options.session.refreshOnReset&&this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._totalProgress&&this._totalProgress.reset()},addFiles:function(a,b,c){var d,e,f,g=[];if(a){for(qq.isFileList(a)||(a=[].concat(a)),d=0;d<a.length;d+=1)if(e=a[d],qq.isFileOrInput(e))if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading)for(f=0;f<e.files.length;f++)this._handleNewFile(e.files[f],g);else this._handleNewFile(e,g);else this.log(e+" is not a File or INPUT element!  Ignoring!","warn");this.log("Received "+g.length+" files or inputs."),this._prepareItemsForUpload(g,b,c)}},addBlobs:function(a,b,c){if(!qq.supportedFeatures.blobUploading)throw new qq.Error("Blob uploading is not supported in this browser!");if(a){var d=[].concat(a),e=[],f=this;qq.each(d,function(a,b){var c;qq.isBlob(b)&&!qq.isFileOrInput(b)?c={blob:b,name:f._options.blobs.defaultName}:qq.isObject(b)&&b.blob&&b.name?c=b:f.log("addBlobs: entry at index "+a+" is not a Blob or a BlobData object","error"),c&&f._handleNewFile(c,e)}),this._prepareItemsForUpload(e,b,c)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(a){return this._uploadData.retrieve({id:a}).uuid},setUuid:function(a,b){return this._uploadData.uuidChanged(a,b)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(a){return this._uploadData.retrieve({id:a}).size},getName:function(a){return this._uploadData.retrieve({id:a}).name},setName:function(a,b){this._uploadData.updateName(a,b)},getFile:function(a){return this._handler.getFile(a)||null},deleteFile:function(a){return this._onSubmitDelete(a)},setDeleteFileEndpoint:function(a,b){this._deleteFileEndpointStore.set(a,b)},doesExist:function(a){return this._handler.isValid(a)},getUploads:function(a){return this._uploadData.retrieve(a)},getButton:function(a){return this._getButton(this._buttonIdsForFileIds[a])},drawThumbnail:function(a,b,c,d){if(this._imageGenerator){var e=this._thumbnailUrls[a],f={scale:c>0,maxSize:c>0?c:null};return!d&&qq.supportedFeatures.imagePreviews&&(e=this.getFile(a)),null==e?(new qq.Promise).failure(b,"File or URL not found."):this._imageGenerator.generate(e,b,f)}},pauseUpload:function(a){var b=this._uploadData.retrieve({id:a});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],b.status)>=0){if(this._handler.pause(a))return this._uploadData.setStatus(a,qq.status.PAUSED),!0;qq.log(qq.format("Unable to pause file ID {} ({}).",a,this.getName(a)),"error")}else qq.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",a,this.getName(a)),"error");return!1},continueUpload:function(a){var b=this._uploadData.retrieve({id:a});return qq.supportedFeatures.pause&&this._options.chunking.enabled?b.status===qq.status.PAUSED?(qq.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",a,this.getName(a))),this._uploadFile(a),!0):(qq.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",a,this.getName(a)),"error"),!1):!1},getRemainingAllowedItems:function(){var a=this._options.validation.itemLimit;return a>0?this._options.validation.itemLimit-this._netUploadedOrQueued:null},scaleImage:function(a,b){var c=this;return qq.Scaler.prototype.scaleImage(a,b,{log:qq.bind(c.log,c),getFile:qq.bind(c.getFile,c),uploadData:c._uploadData})},getParentId:function(a){var b=this.getUploads({id:a}),c=null;return b&&void 0!==b.parentId&&(c=b.parentId),c}},qq.basePrivateApi={_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_uploadFile:function(a){this._handler.upload(a)||this._uploadData.setStatus(a,qq.status.QUEUED)},_refreshSessionData:function(){var a=this,b=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(b,this._options.cors),b.log=qq.bind(this.log,this),b.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(b)),setTimeout(function(){a._session.refresh().then(function(b,c){a._options.callbacks.onSessionRequestComplete(b,!0,c)},function(b,c){a._options.callbacks.onSessionRequestComplete(b,!1,c)})},0))},_addCannedFile:function(a){var b=this._uploadData.addFile(a.uuid,a.name,a.size,qq.status.UPLOAD_SUCCESSFUL);return a.deleteFileEndpoint&&this.setDeleteFileEndpoint(a.deleteFileEndpoint,b),a.deleteFileParams&&this.setDeleteFileParams(a.deleteFileParams,b),a.thumbnailUrl&&(this._thumbnailUrls[b]=a.thumbnailUrl),this._netUploaded++,this._netUploadedOrQueued++,b},_handleNewFile:function(a,b){var c=this,d=qq.getUniqueId(),e=-1,f=qq.getFilename(a),g=a.blob||a,h=this._customNewFileHandler?this._customNewFileHandler:qq.bind(c._handleNewFileGeneric,c);g.size>=0&&(e=g.size),h(g,f,d,e,b,this._options.request.uuidName,{uploadData:c._uploadData,paramsStore:c._paramsStore,addFileToHandler:function(a,b){c._handler.add(a,b),c._netUploadedOrQueued++,c._trackButton(a)}})},_handleNewFileGeneric:function(a,b,c,d,e){var f=this._uploadData.addFile(c,b,d);this._handler.add(f,a),this._trackButton(f),this._netUploadedOrQueued++,e.push({id:f,file:a})},_trackButton:function(a){var b;b=qq.supportedFeatures.ajaxUploading?this._handler.getFile(a).qqButtonId:this._getButtonId(this._handler.getInput(a)),b&&(this._buttonIdsForFileIds[a]=b)},_generateExtraButtonSpecs:function(){var a=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(b,c){var d=c.multiple,e=qq.extend({},a._options.validation,!0),f=qq.extend({},c);void 0===d&&(d=a._options.multiple),f.validation&&qq.extend(e,c.validation,!0),qq.extend(f,{multiple:d,validation:e},!0),a._initExtraButton(f)})},_initExtraButton:function(a){var b=this._createUploadButton({element:a.element,multiple:a.multiple,accept:a.validation.acceptFiles,folders:a.folders,allowedExtensions:a.validation.allowedExtensions});this._extraButtonSpecs[b.getButtonId()]=a},_getButtonId:function(a){var b,c,d=a;if(d instanceof qq.BlobProxy&&(d=d.referenceBlob),d&&!qq.isBlob(d)){if(qq.isFile(d))return d.qqButtonId;if("input"===d.tagName.toLowerCase()&&"file"===d.type.toLowerCase())return d.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(b=d.getElementsByTagName("input"),qq.each(b,function(a,b){return"file"===b.getAttribute("type")?(c=b,!1):void 0}),c)return c.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_annotateWithButtonId:function(a,b){qq.isFile(a)&&(a.qqButtonId=this._getButtonId(b))},_getButton:function(a){var b=this._extraButtonSpecs[a];return b?b.element:a===this._defaultButtonId?this._options.button:void 0},_handleCheckedCallback:function(a){var b=this,c=a.callback();return c instanceof qq.Promise?(this.log(a.name+" - waiting for "+a.name+" promise to be fulfilled for "+a.identifier),c.then(function(c){b.log(a.name+" promise success for "+a.identifier),a.onSuccess(c)},function(){a.onFailure?(b.log(a.name+" promise failure for "+a.identifier),a.onFailure()):b.log(a.name+" promise failure for "+a.identifier)})):(c!==!1?a.onSuccess(c):a.onFailure?(this.log(a.name+" - return value was 'false' for "+a.identifier+".  Invoking failure callback."),a.onFailure()):this.log(a.name+" - return value was 'false' for "+a.identifier+".  Will not proceed."),c)},_createUploadButton:function(a){function b(){return qq.supportedFeatures.ajaxUploading?qq.ios7()&&c._isAllowedExtension(e,".mov")?!1:void 0===a.multiple?c._options.multiple:a.multiple:!1}var c=this,d=a.accept||this._options.validation.acceptFiles,e=a.allowedExtensions||this._options.validation.allowedExtensions,f=new qq.UploadButton({element:a.element,folders:a.folders,name:this._options.request.inputName,multiple:b(),acceptFiles:d,onChange:function(a){c._onInputChange(a)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){f.dispose()}),c._buttons.push(f),f},_createUploadHandler:function(a,b){var c=this,d={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(c.log,c),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(a,b,d,e){c._onProgress(a,b,d,e),c._options.callbacks.onProgress(a,b,d,e)},onComplete:function(a,b,d,e){var f=c.getUploads({id:a}).status;if(f!==qq.status.UPLOAD_SUCCESSFUL&&f!==qq.status.UPLOAD_FAILED){var g=c._onComplete(a,b,d,e);g instanceof qq.Promise?g.done(function(){c._options.callbacks.onComplete(a,b,d,e)}):c._options.callbacks.onComplete(a,b,d,e)}},onCancel:function(a,b){return c._handleCheckedCallback({name:"onCancel",callback:qq.bind(c._options.callbacks.onCancel,c,a,b),onSuccess:qq.bind(c._onCancel,c,a,b),identifier:a})},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(a,b){c._onUpload(a,b),c._options.callbacks.onUpload(a,b)},onUploadChunk:function(a,b,d){c._onUploadChunk(a,d),c._options.callbacks.onUploadChunk(a,b,d)},onUploadChunkSuccess:function(){c._options.callbacks.onUploadChunkSuccess.apply(c,arguments)},onResume:function(a,b,d){return c._options.callbacks.onResume(a,b,d)},onAutoRetry:function(){return c._onAutoRetry.apply(c,arguments)},onUuidChanged:function(a,b){c.log("Server requested UUID change from '"+c.getUuid(a)+"' to '"+b+"'"),c.setUuid(a,b)},getName:qq.bind(c.getName,c),getUuid:qq.bind(c.getUuid,c),getSize:qq.bind(c.getSize,c),setSize:qq.bind(c._setSize,c),getDataByUuid:function(a){return c.getUploads({uuid:a})},isQueued:function(a){var b=c.getUploads({id:a}).status;return b===qq.status.QUEUED||b===qq.status.SUBMITTED||b===qq.status.UPLOAD_RETRYING||b===qq.status.PAUSED},getIdsInGroup:function(a){return c.getUploads({id:a}).groupIds}};return qq.each(this._options.request,function(a,b){d[a]=b}),a&&qq.each(a,function(a,b){d[a]=b}),new qq.UploadHandler(d,b)},_createDeleteHandler:function(){var a=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:qq.bind(a.log,a),onDelete:function(b){a._onDelete(b),a._options.callbacks.onDelete(b)},onDeleteComplete:function(b,c,d){a._onDeleteComplete(b,c,d),a._options.callbacks.onDeleteComplete(b,c,d)}})},_createPasteHandler:function(){var a=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(a.log,a),pasteReceived:function(b){a._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(a._options.callbacks.onPasteReceived,a,b),onSuccess:qq.bind(a._handlePasteSuccess,a,b),identifier:"pasted image"})}}})},_createUploadDataTracker:function(){var a=this;return new qq.UploadData({getName:function(b){return a.getName(b)},getUuid:function(b){return a.getUuid(b)},getSize:function(b){return a.getSize(b)},onStatusChange:function(b,c,d){a._onUploadStatusChange(b,c,d),a._options.callbacks.onStatusChange(b,c,d),a._maybeAllComplete(b,d),a._totalProgress&&setTimeout(function(){a._totalProgress.onStatusChange(b,c,d)},0)}})},_onUploadStatusChange:function(a,b,c){c===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[a])},_handlePasteSuccess:function(a,b){var c=a.type.split("/")[1],d=b;null==d&&(d=this._options.paste.defaultName),d+="."+c,this.addBlobs({name:d,blob:a})},_preventLeaveInProgress:function(){var a=this;this._disposeSupport.attach(window,"beforeunload",function(b){return a.getInProgress()?(b=b||window.event,b.returnValue=a._options.messages.onLeave,a._options.messages.onLeave):void 0})},_onSubmit:function(){},_onProgress:function(a,b,c,d){this._totalProgress&&this._totalProgress.onIndividualProgress(a,c,d)},_onTotalProgress:function(a,b){this._options.callbacks.onTotalProgress(a,b)},_onComplete:function(a,b,c,d){return c.success?(c.thumbnailUrl&&(this._thumbnailUrls[a]=c.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(a,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(a,qq.status.UPLOAD_FAILED),c[this._options.retry.preventRetryResponseProperty]===!0&&(this._preventRetries[a]=!0)),this._maybeParseAndSendUploadError(a,b,c,d),c.success?!0:!1},_maybeAllComplete:function(a,b){var c=this,d=this._getNotFinished();b===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(a):b===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(a),0===d&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){c._onAllComplete(c._succeededSinceLastAllComplete,c._failedSinceLastAllComplete)},0)},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_onAllComplete:function(a,b){this._totalProgress&&this._totalProgress.onAllComplete(a,b,this._preventRetries),this._options.callbacks.onAllComplete(qq.extend([],a),qq.extend([],b)),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[]},_onCancel:function(a){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[a]);var b=qq.indexOf(this._storedIds,a);!this._options.autoUpload&&b>=0&&this._storedIds.splice(b,1),this._uploadData.setStatus(a,qq.status.CANCELED)},_isDeletePossible:function(){return qq.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?qq.supportedFeatures.deleteFileCorsXhr?!0:qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr?!0:!1:!0:!1},_onSubmitDelete:function(a,b,c){var d,e=this.getUuid(a);return b&&(d=qq.bind(b,this,a,e,c)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,a),onSuccess:d||qq.bind(this._deleteHandler.sendDelete,this,a,e,c),identifier:a}),!0):(this.log("Delete request ignored for ID "+a+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onDelete:function(a){this._uploadData.setStatus(a,qq.status.DELETING)},_onDeleteComplete:function(a,b,c){var d=this.getName(a);c?(this._uploadData.setStatus(a,qq.status.DELETE_FAILED),this.log("Delete request for '"+d+"' has failed.","error"),void 0===b.withCredentials?this._options.callbacks.onError(a,d,"Delete request failed",b):this._options.callbacks.onError(a,d,"Delete request failed with response code "+b.status,b)):(this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(a),this._uploadData.setStatus(a,qq.status.DELETED),this.log("Delete request for '"+d+"' has succeeded."))
},_onUploadPrep:function(){},_onUpload:function(a){this._uploadData.setStatus(a,qq.status.UPLOADING)},_onUploadChunk:function(){},_onInputChange:function(a){var b;if(qq.supportedFeatures.ajaxUploading){for(b=0;b<a.files.length;b++)this._annotateWithButtonId(a.files[b],a);this.addFiles(a.files)}else a.value.length>0&&this.addFiles(a);qq.each(this._buttons,function(a,b){b.reset()})},_onBeforeAutoRetry:function(a,b){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+b+"...")},_onAutoRetry:function(a,b,c,d,e){var f=this;return f._preventRetries[a]=c[f._options.retry.preventRetryResponseProperty],f._shouldAutoRetry(a,b,c)?(f._maybeParseAndSendUploadError.apply(f,arguments),f._options.callbacks.onAutoRetry(a,b,f._autoRetries[a]+1),f._onBeforeAutoRetry(a,b),f._retryTimeouts[a]=setTimeout(function(){f.log("Retrying "+b+"..."),f._autoRetries[a]++,f._uploadData.setStatus(a,qq.status.UPLOAD_RETRYING),e?e(a):f._handler.retry(a)},1e3*f._options.retry.autoAttemptDelay),!0):void 0},_shouldAutoRetry:function(a){var b=this._uploadData.retrieve({id:a});return!this._preventRetries[a]&&this._options.retry.enableAuto&&b.status!==qq.status.PAUSED?(void 0===this._autoRetries[a]&&(this._autoRetries[a]=0),this._autoRetries[a]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(a){var b=this._options.validation.itemLimit;if(this._preventRetries[a])return this.log("Retries are forbidden for id "+a,"warn"),!1;if(this._handler.isValid(a)){var c=this.getName(a);return this._options.callbacks.onManualRetry(a,c)===!1?!1:b>0&&this._netUploadedOrQueued+1>b?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+c+"' (id: "+a+")..."),!0)}return this.log("'"+a+"' is not a valid file ID","error"),!1},_manualRetry:function(a,b){return this._onBeforeManualRetry(a)?(this._netUploadedOrQueued++,this._uploadData.setStatus(a,qq.status.UPLOAD_RETRYING),b?b(a):this._handler.retry(a),!0):void 0},_maybeParseAndSendUploadError:function(a,b,c,d){if(!c.success)if(d&&200!==d.status&&!c.error)this._options.callbacks.onError(a,b,"XHR returned response code "+d.status,d);else{var e=c.error?c.error:this._options.text.defaultResponseError;this._options.callbacks.onError(a,b,e,d)}},_prepareItemsForUpload:function(a,b,c){if(0===a.length)return this._itemError("noFilesError"),void 0;var d=this._getValidationDescriptors(a),e=this._getButtonId(a[0].file),f=this._getButton(e);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,d,f),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,d,a,b,c,f),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,a),identifier:"batch validation"})},_upload:function(a,b,c){var d=this.getName(a);b&&this.setParams(b,a),c&&this.setEndpoint(c,a),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,a,d),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,a,d),onFailure:qq.bind(this._fileOrBlobRejected,this,a,d),identifier:a})},_onSubmitCallbackSuccess:function(a){this._onSubmit.apply(this,arguments),this._uploadData.setStatus(a,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.callbacks.onSubmitted.apply(this,arguments),this._options.autoUpload?this._uploadFile(a):this._storeForLater(a)},_onSubmitted:function(){},_storeForLater:function(a){this._storedIds.push(a)},_onValidateBatchCallbackSuccess:function(a,b,c,d,e){var f,g=this._options.validation.itemLimit,h=this._netUploadedOrQueued;0===g||g>=h?b.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,a[0],e),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,b,0,c,d),onFailure:qq.bind(this._onValidateCallbackFailure,this,b,0,c,d),identifier:"Item '"+b[0].file.name+"', size: "+b[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(b),f=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,h).replace(/\{itemLimit\}/g,g),this._batchError(f))},_onValidateBatchCallbackFailure:function(a){var b=this;qq.each(a,function(a,c){b._fileOrBlobRejected(c.id)})},_onValidateCallbackSuccess:function(a,b,c,d){var e=this,f=b+1,g=this._getValidationDescriptor(a[b]);this._validateFileOrBlobData(a[b],g).then(function(){e._upload(a[b].id,c,d),e._maybeProcessNextItemAfterOnValidateCallback(!0,a,f,c,d)},function(){e._maybeProcessNextItemAfterOnValidateCallback(!1,a,f,c,d)})},_onValidateCallbackFailure:function(a,b,c,d){var e=b+1;this._fileOrBlobRejected(a[0].id,a[0].file.name),this._maybeProcessNextItemAfterOnValidateCallback(!1,a,e,c,d)},_maybeProcessNextItemAfterOnValidateCallback:function(a,b,c,d,e){var f=this;if(b.length>c)if(a||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var a=f._getValidationDescriptor(b[c]);f._handleCheckedCallback({name:"onValidate",callback:qq.bind(f._options.callbacks.onValidate,f,b[c].file),onSuccess:qq.bind(f._onValidateCallbackSuccess,f,b,c,d,e),onFailure:qq.bind(f._onValidateCallbackFailure,f,b,c,d,e),identifier:"Item '"+a.name+"', size: "+a.size})},0);else if(!a)for(;c<b.length;c++)f._fileOrBlobRejected(b[c].id)},_validateFileOrBlobData:function(a,b){var c=this,d=function(){return a.file instanceof qq.BlobProxy?a.file.referenceBlob:a.file}(),e=b.name,f=b.size,g=this._getButtonId(a.file),h=this._getValidationBase(g),i=new qq.Promise;return i.then(function(){},function(){c._fileOrBlobRejected(a.id,e)}),qq.isFileOrInput(d)&&!this._isAllowedExtension(h.allowedExtensions,e)?(this._itemError("typeError",e,d),i.failure()):0===f?(this._itemError("emptyError",e,d),i.failure()):f&&h.sizeLimit&&f>h.sizeLimit?(this._itemError("sizeError",e,d),i.failure()):f&&f<h.minSizeLimit?(this._itemError("minSizeError",e,d),i.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(d)?new qq.ImageValidation(d,qq.bind(c.log,c)).validate(h.image).then(i.success,function(a){c._itemError(a+"ImageError",e,d),i.failure()}):i.success(),i)},_fileOrBlobRejected:function(a){this._netUploadedOrQueued--,this._uploadData.setStatus(a,qq.status.REJECTED)},_itemError:function(a,b,c){function d(a,b){g=g.replace(a,b)}var e,f,g=this._options.messages[a],h=[],i=[].concat(b),j=i[0],k=this._getButtonId(c),l=this._getValidationBase(k);return qq.each(l.allowedExtensions,function(a,b){qq.isString(b)&&h.push(b)}),e=h.join(", ").toLowerCase(),d("{file}",this._options.formatFileName(j)),d("{extensions}",e),d("{sizeLimit}",this._formatSize(l.sizeLimit)),d("{minSizeLimit}",this._formatSize(l.minSizeLimit)),f=g.match(/(\{\w+\})/g),null!==f&&qq.each(f,function(a,b){d(b,i[a])}),this._options.callbacks.onError(null,j,g,void 0),g},_batchError:function(a){this._options.callbacks.onError(null,null,a,void 0)},_isAllowedExtension:function(a,b){var c=!1;return a.length?(qq.each(a,function(a,d){if(qq.isString(d)){var e=new RegExp("\\."+d+"$","i");if(null!=b.match(e))return c=!0,!1}}),c):!0},_formatSize:function(a){var b=-1;do a/=1e3,b++;while(a>999);return Math.max(a,.1).toFixed(1)+this._options.text.sizeSymbols[b]},_wrapCallbacks:function(){var a,b;a=this,b=function(b,c,d){var e;try{return c.apply(a,d)}catch(f){e=f.message||f.toString(),a.log("Caught exception in '"+b+"' callback - "+e,"error")}};for(var c in this._options.callbacks)!function(){var d,e;d=c,e=a._options.callbacks[d],a._options.callbacks[d]=function(){return b(d,e,arguments)}}()},_getValidationDescriptors:function(a){var b=this,c=[];return qq.each(a,function(a,d){c.push(b._getValidationDescriptor(d))}),c},_getValidationDescriptor:function(a){return a.file instanceof qq.BlobProxy?{name:qq.getFilename(a.file.referenceBlob),size:a.file.referenceBlob.size}:{name:this.getUploads({id:a.id}).name,size:this.getUploads({id:a.id}).size}},_createStore:function(a,b){var c={},d=a,e={},f=function(a){return qq.isObject(a)?qq.extend({},a):a},g=function(){return qq.isFunction(b)?b():b},h=function(a,c){b&&qq.isObject(c)&&qq.extend(c,g()),e[a]&&qq.extend(c,e[a])};return{set:function(a,b){null==b?(c={},d=f(a)):c[b]=f(a)},get:function(a){var b;return b=null!=a&&c[a]?c[a]:f(d),h(a,b),f(b)},addReadOnly:function(a,b){qq.isObject(c)&&(e[a]=e[a]||{},qq.extend(e[a],b))},remove:function(a){return delete c[a]},reset:function(){c={},e={},d=a}}},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var a="image/*;capture=camera",b=this._options.camera.button,c=b?this._getButtonId(b):this._defaultButtonId,d=this._options;c&&c!==this._defaultButtonId&&(d=this._extraButtonSpecs[c]),d.multiple=!1,null===d.validation.acceptFiles?d.validation.acceptFiles=a:d.validation.acceptFiles+=","+a,qq.each(this._buttons,function(a,b){return b.getButtonId()===c?(b.setMultiple(d.multiple),b.setAcceptFiles(d.acceptFiles),!1):void 0})}},_getValidationBase:function(a){var b=this._extraButtonSpecs[a];return b?b.validation:this._options.validation},_setSize:function(a,b){this._uploadData.updateSize(a,b),this._totalProgress&&this._totalProgress.onNewSize(a)}}}(),function(){"use strict";qq.FineUploaderBasic=function(a){var b=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onAllComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onResume:function(){},onProgress:function(){},onTotalProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){},onStatusChange:function(){},onSessionRequestComplete:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(a){return void 0!==a&&a.length>33&&(a=a.slice(0,19)+"..."+a.slice(-14)),a},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]}},qq.extend(this._options,a,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._initFormSupportAndParams(),this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params),this._endpointStore=this._createStore(this._options.request.endpoint),this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():qq.log("Paste support module not found","info")),this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this)),this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{},this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)),qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(a){var c=b._uploadData.retrieve({id:a});return c&&c.size||0}))},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(a){"use strict";function b(){return qq.indexOf(["GET","POST","HEAD"],w.method)>=0}function c(){var a=!1;return qq.each(a,function(b,c){return qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],c)<0?(a=!0,!1):void 0}),a}function d(a){return w.cors.expected&&void 0===a.withCredentials}function e(){var a;return(window.XMLHttpRequest||window.ActiveXObject)&&(a=qq.createXhrInstance(),void 0===a.withCredentials&&(a=new XDomainRequest)),a}function f(a,b){var c=v[a].xhr;return c||b||(c=w.cors.expected?e():qq.createXhrInstance(),v[a].xhr=c),c}function g(a){var b,c=qq.indexOf(u,a),d=w.maxConnections;delete v[a],u.splice(c,1),u.length>=d&&d>c&&(b=u[d-1],j(b))}function h(a,b){var c=f(a),e=w.method,h=b===!0;g(a),h?s(e+" request for "+a+" has failed","error"):d(c)||q(c.status)||(h=!0,s(e+" request for "+a+" has failed - response code "+c.status,"error")),w.onComplete(a,c,h)}function i(a){var b,c=v[a].additionalParams,d=w.mandatedParams;return w.paramsStore.get&&(b=w.paramsStore.get(a)),c&&qq.each(c,function(a,c){b=b||{},b[a]=c}),d&&qq.each(d,function(a,c){b=b||{},b[a]=c}),b}function j(a){var b,c=f(a),e=w.method,g=i(a),h=v[a].payload;return w.onSend(a),b=k(a,g),d(c)?(c.onload=n(a),c.onerror=o(a)):c.onreadystatechange=l(a),m(a),c.open(e,b,!0),w.cors.expected&&w.cors.sendCredentials&&!d(c)&&(c.withCredentials=!0),p(a),s("Sending "+e+" request for "+a),h?c.send(h):t||!g?c.send():g&&w.contentType&&w.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?c.send(qq.obj2url(g,"")):g&&w.contentType&&w.contentType.toLowerCase().indexOf("application/json")>=0?c.send(JSON.stringify(g)):c.send(g),c}function k(a,b){var c=w.endpointStore.get(a),d=v[a].addToPath;return void 0!=d&&(c+="/"+d),t&&b?qq.obj2url(b,c):c}function l(a){return function(){4===f(a).readyState&&h(a)}}function m(a){var b=w.onProgress;b&&(f(a).upload.onprogress=function(c){c.lengthComputable&&b(a,c.loaded,c.total)})}function n(a){return function(){h(a)}}function o(a){return function(){h(a,!0)}}function p(a){var e=f(a),g=w.customHeaders,h=v[a].additionalHeaders||{},i=w.method,j={};d(e)||(w.allowXRequestedWithAndCacheControl&&(w.cors.expected&&b()&&!c(g)||(e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Cache-Control","no-cache"))),!w.contentType||"POST"!==i&&"PUT"!==i||e.setRequestHeader("Content-Type",w.contentType),qq.extend(j,qq.isFunction(g)?g(a):g),qq.extend(j,h),qq.each(j,function(a,b){e.setRequestHeader(a,b)}))}function q(a){return qq.indexOf(w.successfulResponseCodes[w.method],a)>=0}function r(a,b,c,d,e){v[a]={addToPath:b,additionalParams:c,additionalHeaders:d,payload:e};var f=u.push(a);return f<=w.maxConnections?j(a):void 0}var s,t,u=[],v={},w={validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onProgress:null};if(qq.extend(w,a),s=w.log,qq.indexOf(w.validMethods,w.method)<0)throw new Error("'"+w.method+"' is not a supported method for this type of request!");t="GET"===w.method||"DELETE"===w.method,qq.extend(this,{initTransport:function(a){var b,c,d,e,f;return{withPath:function(a){return b=a,this},withParams:function(a){return c=a,this},withHeaders:function(a){return d=a,this},withPayload:function(a){return e=a,this},withCacheBuster:function(){return f=!0,this},send:function(){return f&&qq.indexOf(["GET","DELETE"],w.method)>=0&&(c.qqtimestamp=(new Date).getTime()),r(a,b,c,d,e)}}},canceled:function(a){g(a)}})},qq.UploadHandler=function(a,b){"use strict";function c(a){return o.getProxy&&o.getProxy(a)||o.getFile&&o.getFile(a)}function d(a){return!!o.getFile(a)}function e(a){return m.isQueued(a)}function f(a){var b=m.getIdsInGroup(a),c=!1;return b&&b.length?(n("Maybe ready to upload grouped file "+a),qq.each(b,function(b,f){if(e(f)&&d(f))c=f===a,o.upload(f);else if(e(f))return!1})):(c=!0,o.upload(a)),c}function g(a,b){return b&&!o.getFile(a)&&b instanceof qq.BlobProxy?(m.onUploadPrep(a),n("Attempting to generate a blob on-demand for "+a),b.create().then(function(b){n("Generated an on-demand blob for "+a),o.updateBlob(a,b),m.setSize(a,b.size),o.reevaluateChunking(a),f(a)},function(b){var c={};b&&(c.error=b),n(qq.format("Failed to generate scaled version for ID {}.  Error message: {}.",a,b),"error"),m.onComplete(a,m.getName(a),qq.extend(c,l),null),f(a),i(a)}),!1):f(a)}function h(a){var b=c(a);return b?g(a,b):(o.upload(a),!0)}function i(a){var b,d=qq.indexOf(p,a),e=m.maxConnections;c(a)instanceof qq.BlobProxy&&(n("Generated blob upload has ended for "+a+", disposing generated blob."),delete o._getFileState(a).file),d>=0&&(p.splice(d,1),p.length>=e&&e>d&&(b=p[e-1],h(b)))}function j(a){n("Cancelling "+a),m.paramsStore.remove(a),i(a)}function k(){var a=b?qq[b]:qq,c=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";o=new a["UploadHandler"+c](m,{onUploadComplete:i,onUuidChanged:m.onUuidChanged,getName:m.getName,getUuid:m.getUuid,getSize:m.getSize,getDataByUuid:m.getDataByUuid,log:n})}var l,m,n,o,p=[];m={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},filenameParam:"qqfilename",cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUploadPrep:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onAutoRetry:function(){},onResume:function(){},onUuidChanged:function(){},getName:function(){},setSize:function(){},isQueued:function(){},getIdsInGroup:function(){}},qq.extend(m,a),l=function(){var a={};return a[m.preventRetryParam]=!0,a}(),n=m.log,qq.extend(this,{add:function(){return o.add.apply(this,arguments)},upload:function(a){var b=p.push(a);return b<=m.maxConnections?h(a):!1},retry:function(a){var b=qq.indexOf(p,a),d=c(a),e=d&&d instanceof qq.BlobProxy;return b>=0?e?h(a):o.upload(a,!0):this.upload(a)},cancel:function(a){var b=o.cancel(a);b instanceof qq.Promise?b.then(function(){j(a)}):b!==!1&&j(a)},cancelAll:function(){var a=this,b=[];qq.extend(b,p),qq.each(b,function(b,c){a.cancel(c)}),p=[]},getFile:function(a){return o.getProxy&&o.getProxy(a)?o.getProxy(a).referenceBlob:o.getFile&&o.getFile(a)},isProxied:function(a){return!(!o.getProxy||!o.getProxy(a))},getInput:function(a){return o.getInput?o.getInput(a):void 0},reset:function(){n("Resetting upload handler"),this.cancelAll(),p=[],o.reset()},expunge:function(a){return this.isValid(a)?o.expunge(a):void 0},isValid:function(a){return o.isValid(a)},getResumableFilesData:function(){return o.getResumableFilesData?o.getResumableFilesData():[]},getThirdPartyFileId:function(a){return o.getThirdPartyFileId&&this.isValid(a)?o.getThirdPartyFileId(a):void 0},pause:function(a){return this.isResumable(a)&&o.pause&&this.isValid(a)&&o.pause(a)?(i(a),!0):void 0},isResumable:function(a){return!!o.isResumable&&o.isResumable(a)}}),k()},qq.AbstractUploadHandlerForm=function(a){"use strict";function b(a){delete k[a],delete n[a],m&&(clearTimeout(l[a]),delete l[a],u.stopReceivingMessages(a));var b=document.getElementById(g._getIframeName(a));b&&(b.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(b).remove())}function c(a,b){var c=a.id,d=e(c),f=s(d);j[f]=b,k[d]=qq(a).attach("load",function(){n[d].input&&(t("Received iframe load event for CORS upload request (iframe name "+c+")"),l[c]=setTimeout(function(){var a="No valid message received from loaded iframe for iframe name "+c;t(a,"error"),b({error:a})},1e3))}),u.receiveMessage(c,function(a){t("Received the following window message: '"+a+"'");var b,d=e(c),f=g._parseJsonResponse(d,a),h=f.uuid;h&&j[h]?(t("Handling response for iframe name "+c),clearTimeout(l[c]),delete l[c],g._detachLoadEvent(c),b=j[h],delete j[h],u.stopReceivingMessages(c),b(f)):h||t("'"+a+"' does not contain a UUID - ignoring.")})}function d(a){var b=qq.toElement("<iframe src='javascript:false;' name='"+a+"' />");return b.setAttribute("id",a),b.style.display="none",document.body.appendChild(b),b}function e(a){return a.split("_")[0]}var f=a.options,g=this,h=a.proxy,i=qq.getUniqueId(),j={},k={},l={},m=f.isCors,n={},o=f.inputName,p=h.onCancel,q=h.onUuidChanged,r=h.getName,s=h.getUuid,t=h.log,u=new qq.WindowReceiveMessage({log:t});qq.extend(this,{add:function(a,b){n[a]={input:b},b.setAttribute("name",o),b.parentNode&&qq(b).remove()},getInput:function(a){return n[a].input},isValid:function(a){return void 0!==n[a]&&void 0!==n[a].input},reset:function(){n.length=0},expunge:function(a){return b(a)},cancel:function(a){var b=p(a,r(a));return b instanceof qq.Promise?b.then(function(){this.expunge(a)}):b!==!1?(this.expunge(a),!0):!1},upload:function(){},_getIframeName:function(a){return a+"_"+i},_createIframe:function(a){var b=g._getIframeName(a);return d(b)},_parseJsonResponse:function(a,b){var c;try{c=qq.parseJson(b),void 0!==c.newUuid&&q(a,c.newUuid)}catch(d){t("Error when attempting to parse iframe upload response ("+d.message+")","error"),c={}}return c},_initFormForUpload:function(a){var b=a.method,c=a.endpoint,d=a.params,e=a.paramsInBody,f=a.targetName,g=qq.toElement("<form method='"+b+"' enctype='multipart/form-data'></form>"),h=c;return e?qq.obj2Inputs(d,g):h=qq.obj2url(d,c),g.setAttribute("action",h),g.setAttribute("target",f),g.style.display="none",document.body.appendChild(g),g},_attachLoadEvent:function(a,b){var d;m?c(a,b):k[a.id]=qq(a).attach("load",function(){if(t("Received response for "+a.id),a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(c){t("Error when attempting to access iframe during handling of upload response ("+c.message+")","error"),d={success:!1}}b(d)}})},_detachLoadEvent:function(a){void 0!==k[a]&&(k[a](),delete k[a])},_getFileState:function(a){return n[a]}})},qq.AbstractUploadHandlerXhr=function(a){"use strict";function b(a){var b=f[a].xhr,c=f[a].currentAjaxRequester;b.onreadystatechange=null,b.upload.onprogress=null,b.abort(),c&&c.canceled&&c.canceled(a)}var c=this,d=a.options,e=a.proxy,f={},g=d.chunking,h=e.onUpload,i=e.onCancel,j=e.getName,k=e.getSize,l=e.log;qq.extend(this,{add:function(a,b){if(qq.isFile(b)||qq.isBlob(b))f[a]={file:b};else{if(!(b instanceof qq.BlobProxy))throw new Error("Passed obj is not a File, Blob, or proxy");f[a]={proxy:b}}},getFile:function(a){return this.isValid(a)&&f[a].file},getProxy:function(a){return this.isValid(a)&&f[a].proxy},isValid:function(a){return void 0!==f[a]},reset:function(){f.length=0},expunge:function(a){var c=f[a].xhr;c&&b(a),delete f[a]},upload:function(a,b){return f[a]&&delete f[a].paused,h(a,b)},cancel:function(a){var b=i(a,j(a));return b instanceof qq.Promise?b.then(function(){f[a].canceled=!0,this.expunge(a)}):b!==!1?(f[a].canceled=!0,this.expunge(a),!0):!1},pause:function(a){var c=f[a].xhr;return c?(l(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",a,j(a))),f[a].paused=!0,b(a),!0):void 0},updateBlob:function(a,b){this.isValid(a)&&(f[a].file=b)},reevaluateChunking:function(a){g&&this.isValid(a)&&delete f[a].chunking},isResumable:function(a){return!!g&&this.isValid(a)&&!f[a].notResumable},_createXhr:function(a){return this._registerXhr(a,qq.createXhrInstance())},_registerXhr:function(a,b,c){return f[a].xhr=b,f[a].currentAjaxRequester=c,b},_getMimeType:function(a){return c.getFile(a).type},_getTotalChunks:function(a){if(g){var b=k(a),c=g.partSize;return Math.ceil(b/c)}},_getChunkData:function(a,b){var d=g.partSize,e=k(a),f=c.getFile(a),h=d*b,i=h+d>=e?e:h+d,j=this._getTotalChunks(a);return{part:b,start:h,end:i,count:j,blob:qq.sliceBlob(f,h,i),size:i-h}},_getChunkDataForCallback:function(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}},_getFileState:function(a){return f[a]},_markNotResumable:function(a){f[a].notResumable=!0}})},qq.WindowReceiveMessage=function(a){"use strict";var b={log:function(){}},c={};qq.extend(b,a),qq.extend(this,{receiveMessage:function(a,b){var d=function(a){b(a.data)};window.postMessage?c[a]=qq(window).attach("message",d):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){if(window.postMessage){var b=c[a];b&&b()}}})},function(){"use strict";qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments),this._templating.clearFiles()},addExtraDropzone:function(a){this._dnd&&this._dnd.setupExtraDropzone(a)},removeExtraDropzone:function(a){return this._dnd?this._dnd.removeDropzone(a):void 0},getItemByFileId:function(a){return this._templating.getFileContainer(a)},reset:function(){this._parent.prototype.reset.apply(this,arguments),this._templating.reset(),!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()),this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop()),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0,this._setupClickAndEditEventHandlers()},setName:function(a,b){var c=this._options.formatFileName(b);this._parent.prototype.setName.apply(this,arguments),this._templating.updateFilename(a,c)},pauseUpload:function(a){var b=this._parent.prototype.pauseUpload.apply(this,arguments);return b&&this._templating.uploadPaused(a),b},continueUpload:function(a){var b=this._parent.prototype.continueUpload.apply(this,arguments);return b&&this._templating.uploadContinued(a),b},getId:function(a){return this._templating.getFileId(a)},getDropTarget:function(a){var b=this.getFile(a);return b.qqDropTarget}},qq.uiPrivateApi={_getButton:function(a){var b=this._parent.prototype._getButton.apply(this,arguments);return b||a===this._defaultButtonId&&(b=this._templating.getButton()),b},_removeFileItem:function(a){this._templating.removeFile(a)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent(),this._focusinEventSupported=!qq.firefox(),this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var a=this,b=this._options.dragAndDrop.extraDropzones,c=this._templating,d=c.getDropZone();return d&&b.push(d),new qq.DragAndDrop({dropZoneElements:b,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){c.showDropProcessing()},processingDroppedFilesComplete:function(b,d){c.hideDropProcessing(),qq.each(b,function(a,b){b.qqDropTarget=d}),b.length&&a.addFiles(b,null,null)},dropError:function(b,c){a._itemError(b,c)},dropLog:function(b,c){a.log(b,c)}}})},_bindFileButtonsClickEvent:function(){var a=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(b,c){a.log(b,c)},onDeleteFile:function(b){a.deleteFile(b)},onCancel:function(b){a.cancel(b)},onRetry:function(b){qq(a._templating.getFileContainer(b)).removeClass(a._classes.retryable),a.retry(b)},onPause:function(b){a.pauseUpload(b)},onContinue:function(b){a.continueUpload(b)},onGetName:function(b){return a.getName(b)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var a=this,b=this._templating;return{templating:b,log:function(b,c){a.log(b,c)},onGetUploadStatus:function(b){return a.getUploads({id:b}).status},onGetName:function(b){return a.getName(b)},onSetName:function(b,c){a.setName(b,c)},onEditingStatusChange:function(a,c){var d=qq(b.getEditInput(a)),e=qq(b.getFileContainer(a));c?(d.addClass("qq-editing"),b.hideFilename(a),b.hideEditIcon(a)):(d.removeClass("qq-editing"),b.showFilename(a),b.showEditIcon(a)),e.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(a,b,c){this._parent.prototype._onUploadStatusChange.apply(this,arguments),this._isEditFilenameEnabled()&&this._templating.getFileContainer(a)&&c!==qq.status.SUBMITTED&&(this._templating.markFilenameEditable(a),this._templating.hideEditIcon(a))},_bindFilenameInputFocusInEvent:function(){var a=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(a)},_bindFilenameInputFocusEvent:function(){var a=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(a)},_bindFilenameClickEvent:function(){var a=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(a)},_storeForLater:function(a){this._parent.prototype._storeForLater.apply(this,arguments),this._templating.hideSpinner(a)},_onAllComplete:function(){this._parent.prototype._onAllComplete.apply(this,arguments),this._templating.resetTotalProgress()},_onSubmit:function(a,b){var c=this.getFile(a);c&&c.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(a,{qqpath:c.qqPath}),this._parent.prototype._onSubmit.apply(this,arguments),this._addToList(a,b)},_onSubmitted:function(a){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(a),this._templating.showEditIcon(a),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(a)))},_onProgress:function(a,b,c,d){this._parent.prototype._onProgress.apply(this,arguments),this._templating.updateProgress(a,c,d),c===d?(this._templating.hideCancel(a),this._templating.hidePause(a),this._templating.setStatusText(a,this._options.text.waitingForResponse),this._displayFileSize(a)):this._displayFileSize(a,c,d)
},_onTotalProgress:function(a,b){this._parent.prototype._onTotalProgress.apply(this,arguments),this._templating.updateTotalProgress(a,b)},_onComplete:function(a,b,c){function d(b){g&&(f.setStatusText(a),qq(g).removeClass(h._classes.retrying),f.hideProgress(a),(!h._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&f.hideCancel(a),f.hideSpinner(a),b.success?h._markFileAsSuccessful(a):(qq(g).addClass(h._classes.fail),h._templating.isRetryPossible()&&!h._preventRetries[a]&&qq(g).addClass(h._classes.retryable),h._controlFailureTextDisplay(a,b)))}var e=this._parent.prototype._onComplete.apply(this,arguments),f=this._templating,g=f.getFileContainer(a),h=this;return e instanceof qq.Promise?e.done(function(a){d(a)}):d(c),e},_markFileAsSuccessful:function(a){var b=this._templating;this._isDeletePossible()&&b.showDeleteButton(a),qq(b.getFileContainer(a)).addClass(this._classes.success),this._maybeUpdateThumbnail(a)},_onUploadPrep:function(a){this._parent.prototype._onUploadPrep.apply(this,arguments),this._templating.showSpinner(a)},_onUpload:function(a){var b=this._parent.prototype._onUpload.apply(this,arguments);return this._templating.showSpinner(a),b},_onUploadChunk:function(a,b){this._parent.prototype._onUploadChunk.apply(this,arguments),b.partIndex>0&&this._handler.isResumable(a)&&this._templating.allowPause(a)},_onCancel:function(a){this._parent.prototype._onCancel.apply(this,arguments),this._removeFileItem(a),0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(a){var b,c,d;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments),this._showCancelLink(a),this._options.retry.showAutoRetryNote&&(b=this._autoRetries[a]+1,c=this._options.retry.maxAutoAttempts,d=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,b),d=d.replace(/\{maxAuto\}/g,c),this._templating.setStatusText(a,d),qq(this._templating.getFileContainer(a)).addClass(this._classes.retrying))},_onBeforeManualRetry:function(a){return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._templating.resetProgress(a),qq(this._templating.getFileContainer(a)).removeClass(this._classes.fail),this._templating.setStatusText(a),this._templating.showSpinner(a),this._showCancelLink(a),!0):(qq(this._templating.getFileContainer(a)).addClass(this._classes.retryable),!1)},_onSubmitDelete:function(a){var b=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,a,b)},_onSubmitDeleteSuccess:function(){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(a,b,c){this._parent.prototype._onDeleteComplete.apply(this,arguments),this._templating.hideSpinner(a),c?(this._templating.setStatusText(a,this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(a)):this._removeFileItem(a)},_sendDeleteRequest:function(a){this._templating.hideDeleteButton(a),this._templating.showSpinner(a),this._templating.setStatusText(a,this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(a){var b,c=this.getName(a),d=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,c),e=(this.getUuid(a),arguments),f=this;b=this._options.showConfirm(d),b instanceof qq.Promise?b.then(function(){f._sendDeleteRequest.apply(f,e)}):b!==!1&&f._sendDeleteRequest.apply(f,e)},_addToList:function(a,b,c){var d,e=0,f=this._handler.isProxied(a)&&this._options.scaling.hideScaled;f||(this._options.display.prependFiles&&(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(e=this._filesInBatchAddedToUi-1),d={index:e}),c||(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),this._options.multiple||(this._handler.cancelAll(),this._clearList())),this._templating.addFile(a,this._options.formatFileName(b),d),c?this._thumbnailUrls[a]&&this._templating.updateThumbnail(a,this._thumbnailUrls[a],!0):this._templating.generatePreview(a,this.getFile(a)),this._filesInBatchAddedToUi+=1,(c||this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading)&&this._displayFileSize(a))},_clearList:function(){this._templating.clearFiles(),this.clearStoredFiles()},_displayFileSize:function(a,b,c){var d=this.getSize(a),e=this._formatSize(d);d>=0&&(void 0!==b&&void 0!==c&&(e=this._formatProgress(b,c)),this._templating.updateSize(a,e))},_formatProgress:function(a,b){function c(a,b){d=d.replace(a,b)}var d=this._options.text.formatProgress;return c("{percent}",Math.round(100*(a/b))),c("{total_size}",this._formatSize(b)),d},_controlFailureTextDisplay:function(a,b){var c,d,e,f,g;c=this._options.failedUploadTextDisplay.mode,d=this._options.failedUploadTextDisplay.maxChars,e=this._options.failedUploadTextDisplay.responseProperty,"custom"===c?(f=b[e],f?f.length>d&&(g=f.substring(0,d)+"..."):f=this._options.text.failUpload,this._templating.setStatusText(a,g||f),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(a,f)):"default"===c?this._templating.setStatusText(a,this._options.text.failUpload):"none"!==c&&this.log("failedUploadTextDisplay.mode value of '"+c+"' is not valid","warn")},_showTooltip:function(a,b){this._templating.getFileContainer(a).title=b},_showCancelLink:function(a){(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&this._templating.showCancel(a)},_itemError:function(){var a=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(a)},_batchError:function(a){this._parent.prototype._batchError.apply(this,arguments),this._options.showMessage(a)},_setupPastePrompt:function(){var a=this;this._options.callbacks.onPasteReceived=function(){var b=a._options.paste.namePromptMessage,c=a._options.paste.defaultName;return a._options.showPrompt(b,c)}},_fileOrBlobRejected:function(){this._totalFilesInBatch-=1,this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(a){this._totalFilesInBatch=a.length,this._filesInBatchAddedToUi=0,this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(a){var b=this._thumbnailUrls[a];this._templating.updateThumbnail(a,b)},_addCannedFile:function(){var a=this._parent.prototype._addCannedFile.apply(this,arguments);return this._addToList(a,this.getName(a),!0),this._templating.hideSpinner(a),this._templating.hideCancel(a),this._markFileAsSuccessful(a),a},_setSize:function(a,b){this._parent.prototype._setSize.apply(this,arguments),this._templating.updateSize(a,this._formatSize(b))}}}(),qq.FineUploader=function(a,b){"use strict";this._parent=b?qq[b].FineUploaderBasic:qq.FineUploaderBasic,this._parent.apply(this,arguments),qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{placeholders:{waitUntilResponse:!1,notAvailablePath:null,waitingPath:null}},scaling:{hideScaled:!1},showMessage:function(a){setTimeout(function(){window.alert(a)},0)},showConfirm:function(a){return window.confirm(a)},showPrompt:function(a,b){return window.prompt(a,b)}},!0),qq.extend(this._options,a,!0),this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text}),!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()),this._setupClickAndEditEventHandlers(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(qq.PasteSupport?this._setupPastePrompt():qq.log("Paste support module not found.","info")),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)},qq.extend(qq.FineUploader.prototype,qq.basePublicApi),qq.extend(qq.FineUploader.prototype,qq.basePrivateApi),qq.extend(qq.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi),qq.Templating=function(a){"use strict";function b(){var a,b,c,d,e,f,g,h,i;if(A("Parsing template"),null==P.templateIdOrEl)throw new Error("You MUST specify either a template element or ID!");if(qq.isString(P.templateIdOrEl)){if(a=document.getElementById(P.templateIdOrEl),null===a)throw new Error(qq.format("Cannot find template script at ID '{}'!",P.templateIdOrEl));b=a.innerHTML}else{if(void 0===P.templateIdOrEl.innerHTML)throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");b=P.templateIdOrEl.innerHTML}if(b=qq.trimStr(b),d=document.createElement("div"),d.appendChild(qq.toElement(b)),P.button&&(f=qq(d).getByClass(Q.button)[0],f&&qq(f).remove()),qq.DragAndDrop&&qq.supportedFeatures.fileDrop||(i=qq(d).getByClass(Q.dropProcessing)[0],i&&qq(i).remove()),g=qq(d).getByClass(Q.drop)[0],g&&!qq.DragAndDrop&&(A("DnD module unavailable.","info"),qq(g).remove()),g&&!qq.supportedFeatures.fileDrop&&qq(g).hasAttribute(M)&&qq(g).css({display:"none"}),h=qq(d).getByClass(Q.thumbnail)[0],G?h&&(O=parseInt(h.getAttribute(K)),O=O>0?O:null,H=qq(h).hasAttribute(L)):h&&qq(h).remove(),G=G&&h,B=qq(d).getByClass(Q.editFilenameInput).length>0,C=qq(d).getByClass(Q.retry).length>0,c=qq(d).getByClass(Q.list)[0],null==c)throw new Error("Could not find the file list container in the template!");return e=c.innerHTML,c.innerHTML="",A("Template parsing complete"),{template:qq.trimStr(d.innerHTML),fileTemplate:qq.trimStr(e)}}function c(a){return qq(F).getByClass(J+a)[0]}function d(a,b){return a&&qq(a).getByClass(b)[0]}function e(a,b){var c=F,d=c.firstChild;b>0&&(d=qq(c).children()[b].nextSibling),c.insertBefore(a,d)}function f(a){return d(c(a),Q.cancel)}function g(a){return d(c(a),Q.pause)}function h(a){return d(c(a),Q.continueButton)}function i(a){return null==a?d(E,Q.totalProgressBarContainer)||d(E,Q.totalProgressBar):d(c(a),Q.progressBarContainer)||d(c(a),Q.progressBar)}function j(a){return d(c(a),Q.spinner)}function k(a){return d(c(a),Q.editNameIcon)}function l(a){return d(c(a),Q.size)}function m(a){return d(c(a),Q.deleteButton)}function n(a){return d(c(a),Q.retry)}function o(a){return d(c(a),Q.file)}function p(){return d(E,Q.dropProcessing)}function q(a){return G&&d(c(a),Q.thumbnail)}function r(a){a&&qq(a).addClass(P.classes.hide)}function s(a){a&&qq(a).removeClass(P.classes.hide)}function t(a,b){var c=i(a),d=null==a?Q.totalProgressBar:Q.progressBar;c&&!qq(c).hasClass(d)&&(c=qq(c).getByClass(d)[0]),c&&qq(c).css({width:b+"%"})}function u(){var a=P.placeholders.thumbnailNotAvailable,b=P.placeholders.waitingForThumbnail,c={maxSize:O,scale:H};G&&(a?P.imageGenerator.generate(a,new Image,c).then(function(a){S.success(a)},function(){S.failure(),A("Problem loading 'not available' placeholder image at "+a,"error")}):S.failure(),b?P.imageGenerator.generate(b,new Image,c).then(function(a){T.success(a)},function(){T.failure(),A("Problem loading 'waiting for thumbnail' placeholder image at "+b,"error")}):T.failure())}function v(a){var b=new qq.Promise;return T.then(function(c){x(c,a),a.src?b.success():(a.src=c.src,a.onload=function(){s(a),b.success()})},function(){r(a),b.success()}),b}function w(a,b){var c=R[a]||(new qq.Promise).failure(),d=new qq.Promise;return S.then(function(a){c.then(function(){d.success()},function(){x(a,b),b.onload=function(){d.success()},b.src=a.src,s(b)})}),d}function x(a,b){var c=a.style.maxWidth,d=a.style.maxHeight;d&&c&&!b.style.maxWidth&&!b.style.maxHeight&&qq(b).css({maxWidth:c,maxHeight:d})}function y(a,b){var c=q(a),d=q(b);A(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",a,b,b)),R[b].then(function(){R[a].success(),A(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",b,a)),c.src=d.src,s(c)},function(){R[a].failure(),P.placeholders.waitUntilUpdate||w(a,c)})}function z(a,b,c){var d=q(a);return A("Generating new thumbnail for "+a),b.qqThumbnailId=a,P.imageGenerator.generate(b,d,c).then(function(){s(d),R[a].success()},function(){R[a].failure(),P.placeholders.waitUntilUpdate||w(a,d)})}var A,B,C,D,E,F,G,H,I="qq-file-id",J="qq-file-id-",K="qq-max-size",L="qq-server-scale",M="qq-hide-dropzone",N=!1,O=-1,P={log:null,templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},Q={button:"qq-upload-button-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},R={},S=new qq.Promise,T=new qq.Promise;qq.extend(P,a),A=P.log,E=P.containerEl,G=void 0!==P.imageGenerator,D=b(),u(),qq.extend(this,{render:function(){A("Rendering template in DOM."),E.innerHTML=D.template,r(p()),this.hideTotalProgress(),F=P.fileContainerEl||d(E,Q.list),A("Template rendering complete")},renderFailure:function(a){var b=qq.toElement(a);E.innerHTML="",E.appendChild(b)},reset:function(){this.render()},clearFiles:function(){F.innerHTML=""},disableCancel:function(){N=!0},addFile:function(a,b,c){var f=qq.toElement(D.fileTemplate),j=d(f,Q.file);qq(f).addClass(J+a),j&&qq(j).setText(b),f.setAttribute(I,a),c?e(f,c.index):F.appendChild(f),r(i(a)),r(l(a)),r(m(a)),r(n(a)),r(g(a)),r(h(a)),N&&this.hideCancel(a)},removeFile:function(a){qq(c(a)).remove()},getFileId:function(a){var b=a;if(b){for(;null==b.getAttribute(I);)b=b.parentNode;return parseInt(b.getAttribute(I))}},getFileList:function(){return F},markFilenameEditable:function(a){var b=o(a);b&&qq(b).addClass(P.classes.editable)},updateFilename:function(a,b){var c=o(a);c&&qq(c).setText(b)},hideFilename:function(a){r(o(a))},showFilename:function(a){s(o(a))},isFileName:function(a){return qq(a).hasClass(Q.file)},getButton:function(){return P.button||d(E,Q.button)},hideDropProcessing:function(){r(p())},showDropProcessing:function(){s(p())},getDropZone:function(){return d(E,Q.drop)},isEditFilenamePossible:function(){return B},isRetryPossible:function(){return C},getFileContainer:function(a){return c(a)},showEditIcon:function(a){var b=k(a);b&&qq(b).addClass(P.classes.editable)},hideEditIcon:function(a){var b=k(a);b&&qq(b).removeClass(P.classes.editable)},isEditIcon:function(a){return qq(a).hasClass(Q.editNameIcon)},getEditInput:function(a){return d(c(a),Q.editFilenameInput)},isEditInput:function(a){return qq(a).hasClass(Q.editFilenameInput)},updateProgress:function(a,b,c){var d,e=i(a);e&&(d=Math.round(100*(b/c)),b===c?r(e):s(e),t(a,d))},updateTotalProgress:function(a,b){this.updateProgress(null,a,b)},hideProgress:function(a){var b=i(a);b&&r(b)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(a){t(a,0)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(a){if(!N){var b=f(a);b&&qq(b).removeClass(P.classes.hide)}},hideCancel:function(a){r(f(a))},isCancel:function(a){return qq(a).hasClass(Q.cancel)},allowPause:function(a){s(g(a)),r(h(a))},uploadPaused:function(a){this.setStatusText(a,P.text.paused),this.allowContinueButton(a),r(j(a))},hidePause:function(a){r(g(a))},isPause:function(a){return qq(a).hasClass(Q.pause)},isContinueButton:function(a){return qq(a).hasClass(Q.continueButton)},allowContinueButton:function(a){s(h(a)),r(g(a))},uploadContinued:function(a){this.setStatusText(a,""),this.allowPause(a),s(j(a))},showDeleteButton:function(a){s(m(a))},hideDeleteButton:function(a){r(m(a))},isDeleteButton:function(a){return qq(a).hasClass(Q.deleteButton)},isRetry:function(a){return qq(a).hasClass(Q.retry)},updateSize:function(a,b){var c=l(a);c&&(s(c),qq(c).setText(b))},setStatusText:function(a,b){var e=d(c(a),Q.statusText);e&&(null==b?qq(e).clearText():qq(e).setText(b))},hideSpinner:function(a){r(j(a))},showSpinner:function(a){s(j(a))},generatePreview:function(a,b){var c=b&&b.qqThumbnailId,d=q(a),e={maxSize:O,scale:!0,orient:!0};qq.supportedFeatures.imagePreviews?d&&v(d).done(function(){R[a]=new qq.Promise,null!=c?y(a,c):z(a,b,e)}):d&&v(d)},updateThumbnail:function(a,b,c){var d=q(a),e={maxSize:O,scale:H};if(d){if(b)return c&&v(d),P.imageGenerator.generate(b,d,e).then(function(){s(d)},function(){w(a,d)});w(a,d)}}})},qq.UploadHandlerForm=function(a,b){"use strict";function c(a,b){var c;try{var d=b.contentDocument||b.contentWindow.document,f=d.body.innerHTML;k("converting iframe's innerHTML to JSON"),k("innerHTML = "+f),f&&f.match(/^<pre/i)&&(f=d.body.firstChild.firstChild.nodeValue),c=e._parseJsonResponse(a,f)}catch(g){k("Error when attempting to parse form upload response ("+g.message+")","error"),c={success:!1}}return c}function d(b,c){var d=a.paramsStore.get(b),f=a.demoMode?"GET":"POST",g=a.endpointStore.get(b),j=h(b);return d[a.uuidName]=i(b),d[a.filenameParam]=j,e._initFormForUpload({method:f,endpoint:g,params:d,paramsInBody:a.paramsInBody,targetName:c.name})}var e=this,f=b.onUploadComplete,g=b.onUuidChanged,h=b.getName,i=b.getUuid,j=f,k=b.log;qq.extend(this,new qq.AbstractUploadHandlerForm({options:{isCors:a.cors.expected,inputName:a.inputName},proxy:{onCancel:a.onCancel,onUuidChanged:g,getName:h,getUuid:i,log:k}})),qq.extend(this,{upload:function(b){var f,g=e._getFileState(b).input,i=h(b),l=e._createIframe(b);if(!g)throw new Error("file with passed id was not added, or already uploaded or canceled");a.onUpload(b,h(b)),f=d(b,l),f.appendChild(g),e._attachLoadEvent(l,function(d){k("iframe loaded");var f=d?d:c(b,l);e._detachLoadEvent(b),a.cors.expected||qq(l).remove(),(f.success||!a.onAutoRetry(b,i,f))&&(a.onComplete(b,i,f),j(b))}),k("Sending upload request for "+b),f.submit(),qq(f).remove()}})},qq.UploadHandlerXhr=function(a,b){"use strict";function c(){return null===a.resume.id||void 0===a.resume.id||qq.isFunction(a.resume.id)||qq.isObject(a.resume.id)?void 0:a.resume.id}function d(b,c,d){var e=K(b),f=I(b);c[a.chunking.paramNames.partIndex]=d.part,c[a.chunking.paramNames.partByteOffset]=d.start,c[a.chunking.paramNames.chunkSize]=d.size,c[a.chunking.paramNames.totalParts]=d.count,c[a.totalFileSizeName]=e,Q&&(c[a.filenameParam]=f)}function e(b){b[a.resume.paramNames.resuming]=!0}function f(b,c,d,e){var f=new FormData,g=a.demoMode?"GET":"POST",h=a.endpointStore.get(e),i=h,j=I(e),k=K(e);return b[a.uuidName]=J(e),b[a.filenameParam]=j,Q&&(b[a.totalFileSizeName]=k),a.paramsInBody||(Q||(b[a.inputName]=j),i=qq.obj2url(b,h)),c.open(g,i,!0),a.cors.expected&&a.cors.sendCredentials&&(c.withCredentials=!0),Q?(a.paramsInBody&&qq.obj2FormData(b,f),f.append(a.inputName,d),f):d}function g(b,c){var d=a.customHeaders,e=R.getFile(b);c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Cache-Control","no-cache"),Q||(c.setRequestHeader("Content-Type","application/octet-stream"),c.setRequestHeader("X-Mime-Type",e.type)),qq.each(d,function(a,b){c.setRequestHeader(a,b)})}function h(b,c,d){var e=I(b),f=K(b);R._getFileState(b).attemptingResume=!1,a.onProgress(b,e,f,f),a.onComplete(b,e,c,d),R._getFileState(b)&&delete R._getFileState(b).xhr,G(b)}function i(b){var c,h,i=R._getFileState(b).remainingChunkIdxs[0],k=R._getChunkData(b,i),l=R._createXhr(b),m=K(b),n=I(b);void 0===R._getFileState(b).loaded&&(R._getFileState(b).loaded=0),P&&R.getFile(b)&&t(b,k),l.onreadystatechange=s(b,l),l.upload.onprogress=function(c){if(c.lengthComputable){var d=c.loaded+R._getFileState(b).loaded,e=j(b,i,c.total);a.onProgress(b,n,d,e)}},a.onUploadChunk(b,n,R._getChunkDataForCallback(k)),h=a.paramsStore.get(b),d(b,h,k),R._getFileState(b).attemptingResume&&e(h),c=f(h,l,k.blob,b),g(b,l),M("Sending chunked upload request for item "+b+": bytes "+(k.start+1)+"-"+k.end+" of "+m),l.send(c)}function j(a,b,c){var d=R._getChunkData(a,b),e=d.size,f=c-e,g=K(a),h=d.count,i=R._getFileState(a).initialRequestOverhead,j=f-i;return R._getFileState(a).lastRequestOverhead=f,0===b?(R._getFileState(a).lastChunkIdxProgress=0,R._getFileState(a).initialRequestOverhead=f,R._getFileState(a).estTotalRequestsSize=g+h*f):R._getFileState(a).lastChunkIdxProgress!==b&&(R._getFileState(a).lastChunkIdxProgress=b,R._getFileState(a).estTotalRequestsSize+=j),R._getFileState(a).estTotalRequestsSize}function k(a){return Q?R._getFileState(a).lastRequestOverhead:0}function l(b,c,d){var e=R._getFileState(b).remainingChunkIdxs.shift(),f=R._getChunkData(b,e);R._getFileState(b).attemptingResume=!1,R._getFileState(b).loaded+=f.size+k(b),a.onUploadChunkSuccess(b,R._getChunkDataForCallback(f),c,d),R._getFileState(b).remainingChunkIdxs.length>0?i(b):(P&&u(b),h(b,c,d))}function m(a,b){return 200!==a.status||!b.success||b.reset}function n(a,b){var c;try{M(qq.format("Received response status {} with body: {}",b.status,b.responseText)),c=qq.parseJson(b.responseText),void 0!==c.newUuid&&H(a,c.newUuid)}catch(d){M("Error when attempting to parse xhr response text ("+d.message+")","error"),c={}}return c}function o(a){M("Server has ordered chunking effort to be restarted on next attempt for item ID "+a,"error"),P&&(u(a),R._getFileState(a).attemptingResume=!1),R._getFileState(a).remainingChunkIdxs=[],delete R._getFileState(a).loaded,delete R._getFileState(a).estTotalRequestsSize,delete R._getFileState(a).initialRequestOverhead}function p(a){R._getFileState(a).attemptingResume=!1,M("Server has declared that it cannot handle resume for item ID "+a+" - starting from the first chunk","error"),o(a),R.upload(a,!0)}function q(b,c,d){var e=I(b);a.onAutoRetry(b,e,c,d)||(200!==d.status&&(c.success=!1),h(b,c,d))}function r(a,b){var c,d=R._getFileState(a),e=d&&d.attemptingResume,f=d&&d.paused;d&&!f&&(M("xhr - server response received for "+a),M("responseText = "+b.responseText),c=n(a,b),m(b,c)?(c.reset&&o(a),e&&c.reset?p(a):q(a,c,b)):O?l(a,c,b):h(a,c,b))}function s(a,b){return function(){4===b.readyState&&r(a,b)}}function t(b,c){if(R.isResumable(b)){var d=J(b),e=R._getFileState(b).loaded,f=R._getFileState(b).initialRequestOverhead,g=R._getFileState(b).estTotalRequestsSize,h=w(b),i=d+N+c.part+N+e+N+f+N+g,j=a.resume.cookiesExpireIn;qq.setCookie(h,i,j)}}function u(a){if(R.isResumable(a)&&R.getFile(a)){var b=w(a);qq.deleteCookie(b)}}function v(a){var b,c,d,e,f,g,h=qq.getCookie(w(a)),i=I(a);if(h){if(b=h.split(N),5===b.length)return c=b[0],d=parseInt(b[1],10),e=parseInt(b[2],10),f=parseInt(b[3],10),g=parseInt(b[4],10),{uuid:c,part:d,lastByteSent:e,initialRequestOverhead:f,estTotalRequestsSize:g};M("Ignoring previously stored resume/chunk cookie for "+i+" - old cookie format","warn")}}function w(b){var c,d=I(b),e=K(b),f=a.chunking.partSize;return c="qqfilechunk"+N+encodeURIComponent(d)+N+e+N+f,void 0!==F&&(c+=N+F),c}function x(a,b){var c;for(c=R._getTotalChunks(a)-1;c>=b;c-=1)R._getFileState(a).remainingChunkIdxs.unshift(c);i(a)}function y(a,b,c,d){c=d.part,R._getFileState(a).loaded=d.lastByteSent,R._getFileState(a).estTotalRequestsSize=d.estTotalRequestsSize,R._getFileState(a).initialRequestOverhead=d.initialRequestOverhead,R._getFileState(a).attemptingResume=!0,M("Resuming "+b+" at partition index "+c),x(a,c)}function z(b,c,d){var e,f=I(b),g=R._getChunkData(b,c.part);e=a.onResume(b,f,R._getChunkDataForCallback(g)),e instanceof qq.Promise?(M("Waiting for onResume promise to be fulfilled for "+b),e.then(function(){y(b,f,d,c)},function(){M("onResume promise fulfilled - failure indicated.  Will not resume."),x(b,d)})):e!==!1?y(b,f,d,c):(M("onResume callback returned false.  Will not resume."),x(b,d))}function A(a,b){R._getFileState(a).remainingChunkIdxs&&0!==R._getFileState(a).remainingChunkIdxs.length?i(a):B(a,b)}function B(a,b){R._getFileState(a).remainingChunkIdxs=[],P&&!b&&R.getFile(a)&&R.isResumable(a)?C(a):x(a,0)}function C(a){var b=v(a);b?z(a,b,0):x(a,0)}function D(b){var c,d,e,h=R.getFile(b),i=I(b);R._getFileState(b).loaded=0,c=R._createXhr(b),c.upload.onprogress=function(c){c.lengthComputable&&(R._getFileState(b).loaded=c.loaded,a.onProgress(b,i,c.loaded,c.total))},c.onreadystatechange=s(b,c),d=a.paramsStore.get(b),e=f(d,c,h,b),g(b,c),M("Sending upload request for "+b),c.send(e)}function E(b,c){var d=I(b);R.isValid(b)&&(a.onUpload(b,d),O?A(b,c):D(b))}var F,G=b.onUploadComplete,H=b.onUuidChanged,I=b.getName,J=b.getUuid,K=b.getSize,L=b.getDataByUuid,M=b.log,N="|",O=a.chunking.enabled&&qq.supportedFeatures.chunking,P=a.resume.enabled&&O&&qq.supportedFeatures.resume,Q=a.forceMultipart||a.paramsInBody,R=this;F=c(),qq.extend(this,new qq.AbstractUploadHandlerXhr({options:{chunking:O?a.chunking:null},proxy:{onUpload:E,onCancel:a.onCancel,onUuidChanged:H,getName:I,getSize:K,getUuid:J,log:M}})),qq.override(this,function(b){return{add:function(a){var c;return b.add.apply(this,arguments),P&&(c=v(a),c&&(L(c.uuid)?R._markNotResumable(a):H(a,c.uuid))),a},getResumableFilesData:function(){var b=[],c=[];return O&&P?(b=void 0===F?qq.getCookieNames(new RegExp("^qqfilechunk\\"+N+".+\\"+N+"\\d+\\"+N+a.chunking.partSize+"=")):qq.getCookieNames(new RegExp("^qqfilechunk\\"+N+".+\\"+N+"\\d+\\"+N+a.chunking.partSize+"\\"+N+F+"=")),qq.each(b,function(a,b){var d=b.split(N),e=qq.getCookie(b).split(N);c.push({name:decodeURIComponent(d[1]),size:d[2],uuid:e[0],partIdx:e[1]})}),c):[]},expunge:function(a){P&&u(a),b.expunge(a)}}})},qq.PasteSupport=function(a){"use strict";function b(a){return a.type&&0===a.type.indexOf("image/")}function c(){qq(e.targetElement).attach("paste",function(a){var c=a.clipboardData;c&&qq.each(c.items,function(a,c){if(b(c)){var d=c.getAsFile();e.callbacks.pasteReceived(d)}})})}function d(){f&&f()}var e,f;e={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}},qq.extend(e,a),c(),qq.extend(this,{reset:function(){d()}})},qq.DragAndDrop=function(a){"use strict";function b(a,b){var c=Array.prototype.slice.call(a);i.callbacks.dropLog("Grabbed "+a.length+" dropped files."),b.dropDisabled(!1),i.callbacks.processingDroppedFilesComplete(c,b.getElement())}function c(a){var b,d=new qq.Promise;return a.isFile?a.file(function(b){var c=a.name,e=a.fullPath,f=e.indexOf(c);e=e.substr(0,f),"/"===e.charAt(0)&&(e=e.substr(1)),b.qqPath=e,m.push(b),d.success()},function(b){i.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".","error"),d.failure()}):a.isDirectory&&(b=a.createReader(),b.readEntries(function(a){var b=a.length;qq.each(a,function(a,e){c(e).done(function(){b-=1,0===b&&d.success()})}),a.length||d.success()},function(b){i.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+b.code+".","error"),d.failure()})),d}function d(a,b){var d=[],e=new qq.Promise;return i.callbacks.processingDroppedFiles(),b.dropDisabled(!0),a.files.length>1&&!i.allowMultipleItems?(i.callbacks.processingDroppedFilesComplete([]),i.callbacks.dropError("tooManyFilesError",""),b.dropDisabled(!1),e.failure()):(m=[],qq.isFolderDropSupported(a)?qq.each(a.items,function(a,b){var f=b.webkitGetAsEntry();f&&(f.isFile?m.push(b.getAsFile()):d.push(c(f).done(function(){d.pop(),0===d.length&&e.success()})))}):m=a.files,0===d.length&&e.success()),e}function e(a){var c=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:j,element:a,onEnter:function(b){qq(a).addClass(i.classes.dropActive),b.stopPropagation()},onLeaveNotDescendants:function(){qq(a).removeClass(i.classes.dropActive)},onDrop:function(a){d(a.dataTransfer,c).then(function(){b(m,c)},function(){i.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});return n.addDisposer(function(){c.dispose()}),qq(a).hasAttribute(k)&&qq(a).hide(),l.push(c),c}function f(a){var b;return qq.each(a.dataTransfer.types,function(a,c){return"Files"===c?(b=!0,!1):void 0}),b}function g(a){return qq.firefox()?!a.relatedTarget:qq.safari()?a.x<0||a.y<0:0===a.x&&0===a.y}function h(){var a=i.dropZoneElements,b=function(){setTimeout(function(){qq.each(a,function(a,b){qq(b).hasAttribute(k)&&qq(b).hide(),qq(b).removeClass(i.classes.dropActive)})},10)};qq.each(a,function(b,c){var d=e(c);!a.length||qq.ie()&&!qq.ie10()||n.attach(document,"dragenter",function(b){!d.dropDisabled()&&f(b)&&qq.each(a,function(a,b){b instanceof HTMLElement&&qq(b).css({display:"block"})})})}),n.attach(document,"dragleave",function(a){g(a)&&b()}),n.attach(qq(document).children()[0],"mouseenter",function(){b()}),n.attach(document,"drop",function(a){a.preventDefault(),b()}),n.attach(document,j,b)}var i,j="qq-hidezones",k="qq-hide-dropzone",l=[],m=[],n=new qq.DisposeSupport;i={dropZoneElements:[],allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(i,a,!0),h(),qq.extend(this,{setupExtraDropzone:function(a){i.dropZoneElements.push(a),e(a)},removeDropzone:function(a){var b,c=i.dropZoneElements;for(b in c)if(c[b]===a)return c.splice(b,1)},dispose:function(){n.dispose(),qq.each(l,function(a,b){b.dispose()})}})},qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(a,b){qq.log("Drag & drop error code '"+a+" with these specifics: '"+b+"'","error")},dropLog:function(a,b){qq.log(a,b)}}},qq.UploadDropZone=function(a){"use strict";function b(){return qq.safari()||qq.firefox()&&qq.windows()}function c(){k||(b?l.attach(document,"dragover",function(a){a.preventDefault()}):l.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),k=!0)}function d(a){if(qq.ie()&&!qq.ie10())return!1;var b,c=a.dataTransfer,d=qq.safari();return b=qq.ie10()||qq.ie11()?!0:"none"!==c.effectAllowed,c&&b&&(c.files||!d&&c.types.contains&&c.types.contains("Files"))}function e(a){return void 0!==a&&(j=a),j}function f(){function a(){b=document.createEvent("Event"),b.initEvent(h.HIDE_ZONES_EVENT_NAME,!0,!0)}var b;if(window.CustomEvent)try{b=new CustomEvent(h.HIDE_ZONES_EVENT_NAME)
}catch(c){a()}else a();document.dispatchEvent(b)}function g(){l.attach(i,"dragover",function(a){if(d(a)){var b=qq.ie()||qq.ie11()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy",a.stopPropagation(),a.preventDefault()}}),l.attach(i,"dragenter",function(a){if(!e()){if(!d(a))return;h.onEnter(a)}}),l.attach(i,"dragleave",function(a){if(d(a)){h.onLeave(a);var b=document.elementFromPoint(a.clientX,a.clientY);qq(this).contains(b)||h.onLeaveNotDescendants(a)}}),l.attach(i,"drop",function(a){if(!e()){if(!d(a))return;a.preventDefault(),a.stopPropagation(),h.onDrop(a),f()}})}var h,i,j,k,l=new qq.DisposeSupport;h={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(h,a),i=h.element,c(),g(),qq.extend(this,{dropDisabled:function(a){return e(a)},dispose:function(){l.dispose()},getElement:function(){return i}})},qq.DeleteFileAjaxRequester=function(a){"use strict";function b(){return"POST"===d.method.toUpperCase()?{_method:"DELETE"}:{}}var c,d={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(d,a),c=qq.extend(this,new qq.AjaxRequester({validMethods:["POST","DELETE"],method:d.method,endpointStore:d.endpointStore,paramsStore:d.paramsStore,mandatedParams:b(),maxConnections:d.maxConnections,customHeaders:d.customHeaders,demoMode:d.demoMode,log:d.log,onSend:d.onDelete,onComplete:d.onDeleteComplete,cors:d.cors})),qq.extend(this,{sendDelete:function(a,b,e){var f=e||{};d.log("Submitting delete file request for "+a),"DELETE"===d.method?c.initTransport(a).withPath(b).withParams(f).send():(f[d.uuidParamName]=b,c.initTransport(a).withParams(f).send())}})},function(){function a(a){var b=a.naturalWidth,c=a.naturalHeight;if(b*c>1048576){var d=document.createElement("canvas");d.width=d.height=1;var e=d.getContext("2d");return e.drawImage(a,-b+1,0),0===e.getImageData(0,0,1,1).data[3]}return!1}function b(a,b,c){var d=document.createElement("canvas");d.width=1,d.height=c;var e=d.getContext("2d");e.drawImage(a,0,0);for(var f=e.getImageData(0,0,1,c).data,g=0,h=c,i=c;i>g;){var j=f[4*(i-1)+3];0===j?h=i:g=i,i=h+g>>1}var k=i/c;return 0===k?1:k}function c(a,b,c){var e=document.createElement("canvas"),f=b.mime||"image/jpeg";return d(a,e,b,c),e.toDataURL(f,b.quality||.8)}function d(c,d,f,g){var h=c.naturalWidth,i=c.naturalHeight,j=f.width,k=f.height,l=d.getContext("2d");if(l.save(),e(d,j,k,f.orientation),qq.ios()){var m=a(c);m&&(h/=2,i/=2);var n=1024,o=document.createElement("canvas");o.width=o.height=n;for(var p=o.getContext("2d"),q=g?b(c,h,i):1,r=Math.ceil(n*j/h),s=Math.ceil(n*k/i/q),t=0,u=0;i>t;){for(var v=0,w=0;h>v;)p.clearRect(0,0,n,n),p.drawImage(c,-v,-t),l.drawImage(o,0,0,n,n,w,u,r,s),v+=n,w+=r;t+=n,u+=s}l.restore(),o=p=null}else l.drawImage(c,0,0,j,k);d.qqImageRendered&&d.qqImageRendered()}function e(a,b,c,d){switch(d){case 5:case 6:case 7:case 8:a.width=c,a.height=b;break;default:a.width=b,a.height=c}var e=a.getContext("2d");switch(d){case 2:e.translate(b,0),e.scale(-1,1);break;case 3:e.translate(b,c),e.rotate(Math.PI);break;case 4:e.translate(0,c),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-c);break;case 7:e.rotate(.5*Math.PI),e.translate(b,-c),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-b,0)}}function f(a,b){if(window.Blob&&a instanceof Blob){var c=new Image,d=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!d)throw Error("No createObjectURL function found to create blob url");c.src=d.createObjectURL(a),this.blob=a,a=c}if(!a.naturalWidth&&!a.naturalHeight){var e=this;a.onload=function(){var a=e.imageLoadListeners;a&&(e.imageLoadListeners=null,setTimeout(function(){for(var b=0,c=a.length;c>b;b++)a[b]()},0))},a.onerror=b,this.imageLoadListeners=[]}this.srcImage=a}f.prototype.render=function(a,b){if(this.imageLoadListeners){var e=this;return this.imageLoadListeners.push(function(){e.render(a,b)}),void 0}b=b||{};var f=this.srcImage.naturalWidth,g=this.srcImage.naturalHeight,h=b.width,i=b.height,j=b.maxWidth,k=b.maxHeight,l=!this.blob||"image/jpeg"===this.blob.type;h&&!i?i=g*h/f<<0:i&&!h?h=f*i/g<<0:(h=f,i=g),j&&h>j&&(h=j,i=g*h/f<<0),k&&i>k&&(i=k,h=f*i/g<<0);var m={width:h,height:i};for(var n in b)m[n]=b[n];var o=a.tagName.toLowerCase();"img"===o?a.src=c(this.srcImage,m,l):"canvas"===o&&d(this.srcImage,a,m,l),"function"==typeof this.onrender&&this.onrender(a)},"function"==typeof define&&define.amd?define([],function(){return f}):this.MegaPixImage=f}(),qq.ImageGenerator=function(a){"use strict";function b(a){return"img"===a.tagName.toLowerCase()}function c(a){return"canvas"===a.tagName.toLowerCase()}function d(){return void 0!==(new Image).crossOrigin}function e(){var a=document.createElement("canvas");return a.getContext&&a.getContext("2d")}function f(a){var b=a.split("/"),c=b[b.length-1],d=qq.getExtension(c);switch(d=d&&d.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function g(a){var b,c,d,e=document.createElement("a");return e.href=a,b=e.protocol,d=e.port,c=e.hostname,b.toLowerCase()!==window.location.protocol.toLowerCase()?!0:c.toLowerCase()!==window.location.hostname.toLowerCase()?!0:d===window.location.port||qq.ie()?!1:!0}function h(b,c){b.onload=function(){b.onload=null,b.onerror=null,c.success(b)},b.onerror=function(){b.onload=null,b.onerror=null,a("Problem drawing thumbnail!","error"),c.failure(b,"Problem drawing thumbnail!")}}function i(a,b){a.qqImageRendered=function(){b.success(a)}}function j(d,e){var f=b(d)||c(d);return b(d)?h(d,e):c(d)?i(d,e):(e.failure(d),a(qq.format("Element container of type {} is not supported!",d.tagName),"error")),f}function k(b,c,d){var e=new qq.Promise,f=new qq.Identify(b,a),g=d.maxSize,h=null==d.orient?!0:d.orient,i=function(){c.onerror=null,c.onload=null,a("Could not render preview, file may be too large!","error"),e.failure(c,"Browser cannot render image!")};return f.isPreviewable().then(function(d){var f={parse:function(){return(new qq.Promise).success()}},k=h?new qq.Exif(b,a):f,l=new MegaPixImage(b,i);j(c,e)&&k.parse().then(function(a){var b=a&&a.Orientation;l.render(c,{maxWidth:g,maxHeight:g,orientation:b,mime:d})},function(b){a(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",b)),l.render(c,{maxWidth:g,maxHeight:g,mime:d})})},function(){a("Not previewable"),e.failure(c,"Not previewable")}),e}function l(a,b,c,d){var e=new Image,h=new qq.Promise;j(e,h),g(a)&&(e.crossOrigin="anonymous"),e.src=a,h.then(function(){j(b,c);var g=new MegaPixImage(e);g.render(b,{maxWidth:d,maxHeight:d,mime:f(a)})})}function m(a,b,c,d){j(b,c),qq(b).css({maxWidth:d+"px",maxHeight:d+"px"}),b.src=a}function n(a,f,h){var i=new qq.Promise,k=h.scale,n=k?h.maxSize:null;return k&&b(f)?e()?g(a)&&!d()?m(a,f,i,n):l(a,f,i,n):m(a,f,i,n):c(f)?l(a,f,i,n):j(f,i)&&(f.src=a),i}qq.extend(this,{generate:function(b,c,d){return qq.isString(b)?(a("Attempting to update thumbnail based on server response."),n(b,c,d||{})):(a("Attempting to draw client-side image preview."),k(b,c,d||{}))}}),this._testing={},this._testing.isImg=b,this._testing.isCanvas=c,this._testing.isCrossOrigin=g,this._testing.determineMimeOfFileName=f},qq.Exif=function(a,b){"use strict";function c(a){for(var b=0,c=0;a.length>0;)b+=parseInt(a.substring(0,2),16)*Math.pow(2,c),a=a.substring(2,a.length),c+=8;return b}function d(b,c){var e=b,f=c;return void 0===e&&(e=2,f=new qq.Promise),qq.readBlobToHex(a,e,4).then(function(a){var b=/^ffe([0-9])/.exec(a);if(b)if("1"!==b[1]){var c=parseInt(a.slice(4,8),16);d(e+c+2,f)}else f.success(e);else f.failure("No EXIF header to be found!")}),f}function e(){var b=new qq.Promise;return qq.readBlobToHex(a,0,6).then(function(a){0!==a.indexOf("ffd8")?b.failure("Not a valid JPEG!"):d().then(function(a){b.success(a)},function(a){b.failure(a)})}),b}function f(b){var c=new qq.Promise;return qq.readBlobToHex(a,b+10,2).then(function(a){c.success("4949"===a)}),c}function g(b,d){var e=new qq.Promise;return qq.readBlobToHex(a,b+18,2).then(function(a){return d?e.success(c(a)):(e.success(parseInt(a,16)),void 0)}),e}function h(b,c){var d=b+20,e=12*c;return qq.readBlobToHex(a,d,e)}function i(a){for(var b=[],c=0;c+24<=a.length;)b.push(a.slice(c,c+24)),c+=24;return b}function j(a,b){var d=16,e=qq.extend([],k),f={};return qq.each(b,function(b,g){var h,i,j,k=g.slice(0,4),m=a?c(k):parseInt(k,16),n=e.indexOf(m);return n>=0&&(i=l[m].name,j=l[m].bytes,h=g.slice(d,d+2*j),f[i]=a?c(h):parseInt(h,16),e.splice(n,1)),0===e.length?!1:void 0}),f}var k=[274],l={274:{name:"Orientation",bytes:2}};qq.extend(this,{parse:function(){var c=new qq.Promise,d=function(a){b(qq.format("EXIF header parse failed: '{}' ",a)),c.failure(a)};return e().then(function(e){b(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===a.name?"blob":a.name)),f(e).then(function(a){b(qq.format("EXIF Byte order is {} endian",a?"little":"big")),g(e,a).then(function(f){b(qq.format("Found {} APP1 directory entries",f)),h(e,f).then(function(d){var e=i(d),f=j(a,e);b("Successfully parsed some EXIF tags"),c.success(f)},d)},d)},d)},d),c}}),this._testing={},this._testing.parseLittleEndian=c},qq.Identify=function(a,b){"use strict";function c(a,b){var c=!1,d=[].concat(a);return qq.each(d,function(a,d){return 0===b.indexOf(d)?(c=!0,!1):void 0}),c}qq.extend(this,{isPreviewable:function(){var d=this,e=new qq.Promise,f=!1,g=void 0===a.name?"blob":a.name;return b(qq.format("Attempting to determine if {} can be rendered in this browser",g)),b("First pass: check type attribute of blob object."),this.isPreviewableSync()?(b("Second pass: check for magic bytes in file header."),qq.readBlobToHex(a,0,4).then(function(a){qq.each(d.PREVIEWABLE_MIME_TYPES,function(b,d){return c(d,a)?(("image/tiff"!==b||qq.supportedFeatures.tiffPreviews)&&(f=!0,e.success(b)),!1):void 0}),b(qq.format("'{}' is {} able to be rendered in this browser",g,f?"":"NOT")),f||e.failure()},function(){b("Error reading file w/ name '"+a.name+"'.  Not able to be rendered in this browser."),e.failure()})):e.failure(),e},isPreviewableSync:function(){var c=a.type,d=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),c)>=0,e=!1;return d&&(e="image/tiff"===c?qq.supportedFeatures.tiffPreviews:!0),!e&&b(a.name+" is not previewable in this browser per the blob's type attr"),e}})},qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]},qq.ImageValidation=function(a,b){"use strict";function c(a){var b=!1;return qq.each(a,function(a,c){return c>0?(b=!0,!1):void 0}),b}function d(){var c=new qq.Promise;return new qq.Identify(a,b).isPreviewable().then(function(){var d=new Image,e=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;e?(d.onerror=function(){b("Cannot determine dimensions for image.  May be too large.","error"),c.failure()},d.onload=function(){c.success({width:this.width,height:this.height})},d.src=e.createObjectURL(a)):(b("No createObjectURL function available to generate image URL!","error"),c.failure())},c.failure),c}function e(a,b){var c;return qq.each(a,function(a,d){if(d>0){var e=/(max|min)(Width|Height)/.exec(a),f=e[2].charAt(0).toLowerCase()+e[2].slice(1),g=b[f];switch(e[1]){case"min":if(d>g)return c=a,!1;break;case"max":if(g>d)return c=a,!1}}}),c}this.validate=function(a){var f=new qq.Promise;return b("Attempting to validate image."),c(a)?d().then(function(b){var c=e(a,b);c?f.failure(c):f.success()},f.success):f.success(),f}},qq.Session=function(a){"use strict";function b(a){return qq.isArray(a)?!0:(d.log("Session response is not an array.","error"),void 0)}function c(a,c,e,f){var g=!1;c=c&&b(a),c&&qq.each(a,function(a,b){if(null==b.uuid)g=!0,d.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",a),"error");else if(null==b.name)g=!0,d.log(qq.format("Session response item {} did not include a valid name - ignoring.",a),"error");else try{return d.addFileRecord(b),!0}catch(c){g=!0,d.log(c.message,"error")}return!1}),f[c&&!g?"success":"failure"](a,e)}var d={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(){},log:function(){}};qq.extend(d,a,!0),this.refresh=function(){var a=new qq.Promise,b=function(b,d,e){c(b,d,e,a)},e=qq.extend({},d),f=new qq.SessionAjaxRequester(qq.extend(e,{onComplete:b}));return f.queryServer(),a}},qq.SessionAjaxRequester=function(a){"use strict";function b(a,b,c){var e=null;if(null!=b.responseText)try{e=qq.parseJson(b.responseText)}catch(f){d.log("Problem parsing session response: "+f.message,"error"),c=!0}d.onComplete(e,!c,b)}var c,d={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(){},log:function(){}};qq.extend(d,a),c=qq.extend(this,new qq.AjaxRequester({validMethods:["GET"],method:"GET",endpointStore:{get:function(){return d.endpoint}},customHeaders:d.customHeaders,log:d.log,onComplete:b,cors:d.cors})),qq.extend(this,{queryServer:function(){var a=qq.extend({},d.params);d.log("Session query request."),c.initTransport("sessionRefresh").withParams(a).withCacheBuster().send()}})},qq.FormSupport=function(a,b,c){"use strict";function d(a){a.getAttribute("action")&&(h.newEndpoint=a.getAttribute("action"))}function e(a,b){return!a.checkValidity||a.checkValidity()?!0:(c("Form did not pass validation checks - will not upload.","error"),b(),void 0)}function f(a){var c=a.submit;qq(a).attach("submit",function(d){d=d||window.event,d.preventDefault?d.preventDefault():d.returnValue=!1,e(a,c)&&b()}),a.submit=function(){e(a,c)&&b()}}function g(a){return a&&(qq.isString(a)&&(a=document.getElementById(a)),a&&(c("Attaching to form element."),d(a),i&&f(a))),a}var h=this,i=a.interceptSubmit,j=a.element,k=a.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:k,attachedToForm:!1,getFormInputsAsObject:function(){return null==j?null:h._form2Obj(j)}}),j=g(j),this.attachedToForm=!!j},qq.extend(qq.FormSupport.prototype,{_form2Obj:function(a){"use strict";var b={},c=function(a){var b=["button","image","reset","submit"];return qq.indexOf(b,a.toLowerCase())<0},d=function(a){return qq.indexOf(["checkbox","radio"],a.toLowerCase())>=0},e=function(a){return d(a.type)&&!a.checked?!0:a.disabled&&"hidden"!==a.type.toLowerCase()},f=function(a){var b=null;return qq.each(qq(a).children(),function(a,c){return"option"===c.tagName.toLowerCase()&&c.selected?(b=c.value,!1):void 0}),b};return qq.each(a.elements,function(a,d){if(qq.isInput(d,!0)&&c(d.type)&&!e(d))b[d.name]=d.value;else if("select"===d.tagName.toLowerCase()&&!e(d)){var g=f(d);null!==g&&(b[d.name]=g)}}),b}}),qq.Scaler=function(a,b){"use strict";var c=a.sendOriginal,d=a.orient,e=a.defaultType,f=a.defaultQuality/100,g=a.failureText,h=a.includeExif,i=this._getSortedSizes(a.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&i.length>0,getFileRecords:function(a,j,k){var l=this,m=[],n=k.blob?k.blob:k,o=new qq.Identify(n,b);return o.isPreviewableSync()&&qq.each(i,function(a,c){var i=l._determineOutputType({defaultType:e,requestedType:c.type,refType:n.type});m.push({uuid:qq.getUniqueId(),name:l._getName(j,{name:c.name,type:i,refType:n.type}),blob:new qq.BlobProxy(n,qq.bind(l._generateScaledImage,l,{maxSize:c.maxSize,orient:d,type:i,quality:f,failedText:g,includeExif:h,log:b}))})}),c&&m.push({uuid:a,name:j,blob:n}),m},handleNewFile:function(a,b,c,d,e,f,g){var h=this,i=(a.qqButtonId||a.blob&&a.blob.qqButtonId,[]),j=null,k=g.addFileToHandler,l=g.uploadData,m=g.paramsStore;qq.each(h.getFileRecords(c,b,a),function(b,c){var f,g=a,h=d;c.blob instanceof qq.BlobProxy&&(g=c.blob,h=-1),f=l.addFile(c.uuid,c.name,h),c.blob instanceof qq.BlobProxy?i.push(f):j=f,k(f,g),e.push({id:f,file:g})}),i.length&&(qq.each(i,function(a,b){null===j?l.setGroupIds(b,i):l.setGroupIds(b,i.concat([j]))}),null!==j&&l.setGroupIds(j,i.concat([j]))),null!==j&&(qq.each(i,function(a,b){var c={qqparentuuid:l.retrieve({id:j}).uuid,qqparentsize:l.retrieve({id:j}).size};c[f]=l.retrieve({id:b}).uuid,l.setParentId(b,j),m.addReadOnly(b,c)}),i.length&&!function(){var a={};a[f]=l.retrieve({id:j}).uuid,m.addReadOnly(j,a)}())}})},qq.extend(qq.Scaler.prototype,{scaleImage:function(a,b,c){"use strict";if(!qq.supportedFeatures.scaling)throw new qq.Error("Scaling is not supported in this browser!");var d=new qq.Promise,e=c.log,f=c.getFile(a),g=c.uploadData.retrieve({id:a}),h=g&&g.name,i=g&&g.uuid,j={sendOriginal:!1,orient:b.orient,defaultType:b.type||null,defaultQuality:b.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:b.maxSize}]},k=new qq.Scaler(j,e);return qq.Scaler&&qq.supportedFeatures.imagePreviews&&f?qq.bind(function(){var b;b=k.getFileRecords(i,h,f)[0],b?b.blob.create().then(d.success,d.failure):(e(a+" is not a scalable image!","error"),d.failure())},this)():(d.failure(),e("Could not generate requested scaled image for "+a+".  "+"Scaling is either not possible in this browser, or the file could not be located.","error")),d},_determineOutputType:function(a){"use strict";var b=a.requestedType,c=a.defaultType,d=a.refType;return c||b?b?qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),b)>=0?"image/tiff"===b?qq.supportedFeatures.tiffPreviews?b:c:b:c:c:"image/jpeg"!==d?"image/png":d},_getName:function(a,b){"use strict";var c=a.lastIndexOf("."),d=" ("+b.name+")",e=b.type||"image/png",f=b.refType,g="",h=qq.getExtension(a);return c>=0?(g=a.substr(0,c),f!==e&&(h=e.split("/")[1]),g+=d+"."+h):g=a+d,g},_getSortedSizes:function(a){"use strict";return a=qq.extend([],a),a.sort(function(a,b){return a.maxSize>b.maxSize?1:a.maxSize<b.maxSize?-1:0})},_generateScaledImage:function(a,b){"use strict";var c=this,d=a.log,e=a.maxSize,f=a.orient,g=a.type,h=a.quality,i=a.failedText,j=a.includeExif&&"image/jpeg"===b.type&&"image/jpeg"===g,k=new qq.Promise,l=new qq.ImageGenerator(d),m=document.createElement("canvas");return d("Attempting to generate scaled version for "+b.name),l.generate(b,m,{maxSize:e,orient:f}).then(function(){var a=m.toDataURL(g,h),e=function(){d("Success generating scaled version for "+b.name);var e=c._dataUriToBlob(a);k.success(e)};j?c._insertExifHeader(b,a,d).then(function(b){a=b,e()},function(){d("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error"),e()}):e()},function(){d("Failed attempt to generate scaled version for "+b.name,"error"),k.failure(i)}),k},_insertExifHeader:function(a,b,c){"use strict";var d=new FileReader,e=new qq.Promise,f="";return d.onload=function(){f=d.result,e.success(ExifRestorer.restore(f,b))},d.onerror=function(){c("Problem reading "+a.name+" during attempt to transfer EXIF data to scaled version.","error"),e.failure()},d.readAsDataURL(a),e},_dataUriToBlob:function(a){"use strict";var b,c,d,e;return b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):decodeURI(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new Uint8Array(d),qq.each(b,function(a,b){e[a]=b.charCodeAt(0)}),this._createBlob(d,c)},_createBlob:function(a,b){"use strict";var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,d=c&&new c;return d?(d.append(a),d.getBlob(b)):new Blob([a],{type:b})}});var ExifRestorer=function(){var a={};return a.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a.encode64=function(a){var b,c,d,e,f,g="",h="",i="",j=0;do b=a[j++],c=a[j++],h=a[j++],d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(i),b=c=h="",d=e=f=i="";while(j<a.length);return g},a.restore=function(a,b){var c="data:image/jpeg;base64,";if(!a.match(c))return b;var d=this.decode64(a.replace(c,"")),e=this.slice2Segments(d),f=this.exifManipulation(b,e);return c+this.encode64(f)},a.exifManipulation=function(a,b){var c=this.getExifArray(b),d=this.insertExif(a,c),e=new Uint8Array(d);return e},a.getExifArray=function(a){for(var b,c=0;c<a.length;c++)if(b=a[c],255==b[0]&225==b[1])return b;return[]},a.insertExif=function(a,b){var c=a.replace("data:image/jpeg;base64,",""),d=this.decode64(c),e=d.indexOf(255,3),f=d.slice(0,e),g=d.slice(e),h=f;return h=h.concat(b),h=h.concat(g)},a.slice2Segments=function(a){for(var b=0,c=[];;){if(255==a[b]&218==a[b+1])break;if(255==a[b]&216==a[b+1])b+=2;else{var d=256*a[b+2]+a[b+3],e=b+d+2,f=a.slice(b,e);c.push(f),b=e}if(b>a.length)break}return c},a.decode64=function(a){var b,c,d,e,f,g="",h="",i=0,j=[],k=/[^A-Za-z0-9\+\/\=]/g;if(k.exec(a))throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.KEY_STR.indexOf(a.charAt(i++)),e=this.KEY_STR.indexOf(a.charAt(i++)),f=this.KEY_STR.indexOf(a.charAt(i++)),h=this.KEY_STR.indexOf(a.charAt(i++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,g=(3&f)<<6|h,j.push(b),64!=f&&j.push(c),64!=h&&j.push(g),b=c=g="",d=e=f=h="";while(i<a.length);return j},a}();qq.TotalProgress=function(a,b){"use strict";var c={},d=0,e=0,f=function(a,b){var c=!0;return qq.each(a,function(a,d){return qq.indexOf(b,d)>=0?(c=!1,!1):void 0}),c},g=function(a){j(a,-1,-1),delete c[a]},h=function(b,c,d){(0===c.length||f(c,d))&&(a(e,e),this.reset())},i=function(a){var d=b(a);d>0&&(j(a,0,d),c[a]={loaded:0,total:d})},j=function(b,f,g){var h=c[b]?c[b].loaded:0,i=c[b]?c[b].total:0;-1===f&&-1===g?(d-=h,e-=i):(f&&(d+=f-h),g&&(e+=g-i)),a(d,e)};qq.extend(this,{onAllComplete:h,onStatusChange:function(a,b,c){c===qq.status.CANCELED?g(a):c===qq.status.SUBMITTED&&i(a)},onIndividualProgress:function(a,b,d){j(a,b,d),c[a]={loaded:b,total:d}},onNewSize:function(a){i(a)},reset:function(){c={},d=0,e=0}})},qq.UiEventHandler=function(a,b){"use strict";function c(a){d.attach(a,e.eventType,function(a){a=a||window.event;var b=a.target||a.srcElement;e.onHandled(b,a)})}var d=new qq.DisposeSupport,e={eventType:"click",attachTo:null,onHandled:function(){}};qq.extend(this,{addHandler:function(a){c(a)},dispose:function(){d.dispose()}}),qq.extend(b,{getFileIdFromItem:function(a){return a.qqFileId},getDisposeSupport:function(){return d}}),qq.extend(e,a),e.attachTo&&c(e.attachTo)},qq.FileButtonsClickHandler=function(a){"use strict";function b(a,b){qq.each(e,function(c,e){var f,g=c.charAt(0).toUpperCase()+c.slice(1);return d.templating["is"+g](a)?(f=d.templating.getFileId(a),qq.preventDefault(b),d.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",d.onGetName(f),f)),e(f),!1):void 0})}var c={},d={templating:null,log:function(){},onDeleteFile:function(){},onCancel:function(){},onRetry:function(){},onPause:function(){},onContinue:function(){},onGetName:function(){}},e={cancel:function(a){d.onCancel(a)},retry:function(a){d.onRetry(a)},deleteButton:function(a){d.onDeleteFile(a)},pause:function(a){d.onPause(a)},continueButton:function(a){d.onContinue(a)}};qq.extend(d,a),d.eventType="click",d.onHandled=b,d.attachTo=d.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(d,c))},qq.FilenameClickHandler=function(a){"use strict";function b(a,b){if(d.templating.isFileName(a)||d.templating.isEditIcon(a)){var e=d.templating.getFileId(a),f=d.onGetUploadStatus(e);f===qq.status.SUBMITTED&&(d.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",d.onGetName(e),e)),qq.preventDefault(b),c.handleFilenameEdit(e,a,!0))}}var c={},d={templating:null,log:function(){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(){},onGetName:function(){}};qq.extend(d,a),d.eventType="click",d.onHandled=b,qq.extend(this,new qq.FilenameEditHandler(d,c))},qq.FilenameInputFocusInHandler=function(a,b){"use strict";function c(a){if(d.templating.isEditInput(a)){var c=d.templating.getFileId(a),e=d.onGetUploadStatus(c);e===qq.status.SUBMITTED&&(d.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",d.onGetName(c),c)),b.handleFilenameEdit(c,a))}}var d={templating:null,onGetUploadStatus:function(){},log:function(){}};b||(b={}),d.eventType="focusin",d.onHandled=c,qq.extend(d,a),qq.extend(this,new qq.FilenameEditHandler(d,b))},qq.FilenameInputFocusHandler=function(a){"use strict";a.eventType="focus",a.attachTo=null,qq.extend(this,new qq.FilenameInputFocusInHandler(a,{}))},qq.FilenameEditHandler=function(a,b){"use strict";function c(a){var b=h.onGetName(a),c=b.lastIndexOf(".");return c>0&&(b=b.substr(0,c)),b}function d(a){var b=h.onGetName(a);return qq.getExtension(b)}function e(a,b){var c,e=a.value;void 0!==e&&qq.trimStr(e).length>0&&(c=d(b),void 0!==c&&(e=e+"."+c),h.onSetName(b,e)),h.onEditingStatusChange(b,!1)}function f(a,c){b.getDisposeSupport().attach(a,"blur",function(){e(a,c)})}function g(a,c){b.getDisposeSupport().attach(a,"keyup",function(b){var d=b.keyCode||b.which;13===d&&e(a,c)})}var h={templating:null,log:function(){},onGetUploadStatus:function(){},onGetName:function(){},onSetName:function(){},onEditingStatusChange:function(){}};qq.extend(h,a),h.attachTo=h.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(h,b)),qq.extend(b,{handleFilenameEdit:function(a,b,d){var e=h.templating.getEditInput(a);h.onEditingStatusChange(a,!0),e.value=c(a),d&&e.focus(),f(e,a),g(e,a)}})},function(a){"use strict";function b(a){var b=h(a||{}),d=c(b);return e(d),g(b,d),l}function c(a){var b=f("uploaderType"),c=f("endpointType");return b?(b=b.charAt(0).toUpperCase()+b.slice(1).toLowerCase(),c?new qq[c]["FineUploader"+b](a):new qq["FineUploader"+b](a)):c?new qq[c].FineUploader(a):new qq.FineUploader(a)}function d(a,b){var c=l.data("fineuploader");return b?(void 0===c&&(c={}),c[a]=b,l.data("fineuploader",c),void 0):void 0===c?null:c[a]}function e(a){return d("uploader",a)}function f(a,b){return d(a,b)}function g(b,c){var d=b.callbacks={};a.each(c._options.callbacks,function(b,c){var e,f;e=/^on(\w+)/.exec(b)[1],e=e.substring(0,1).toLowerCase()+e.substring(1),f=l,d[b]=function(){var b,d,g=Array.prototype.slice.call(arguments),h=[];a.each(g,function(a,b){h.push(k(b))}),b=c.apply(this,g);try{d=f.triggerHandler(e,h)}catch(i){qq.log("Caught error in Fine Uploader jQuery event handler: "+i.message,"error")}return null!=b?b:d}}),c._options.callbacks=d}function h(b,c){var d,e;return d=void 0===c?"basic"!==b.uploaderType?{element:l[0]}:{}:c,a.each(b,function(b,c){a.inArray(b,m)>=0?f(b,c):c instanceof a?d[b]=c[0]:a.isPlainObject(c)?(d[b]={},h(c,d[b])):a.isArray(c)?(e=[],a.each(c,function(b,c){var d={};c instanceof a?a.merge(e,c):a.isPlainObject(c)?(h(c,d),e.push(d)):e.push(c)}),d[b]=e):d[b]=c}),void 0===c?d:void 0}function i(b){return"string"===a.type(b)&&!b.match(/^_/)&&void 0!==e()[b]}function j(a){var b,c=[],d=Array.prototype.slice.call(arguments,1);return h(d,c),b=e()[a].apply(e(),c),k(b)}function k(b){var c=b;return null==b||"object"!=typeof b||1!==b.nodeType&&9!==b.nodeType||!b.cloneNode||(c=a(b)),c}var l,m=["uploaderType","endpointType"];a.fn.fineUploader=function(c){var d=this,f=arguments,g=[];return this.each(function(h,k){if(l=a(k),e()&&i(c)){if(g.push(j.apply(d,f)),1===d.length)return!1}else"object"!=typeof c&&c?a.error("Method "+c+" does not exist on jQuery.fineUploader"):b.apply(d,f)}),1===g.length?g[0]:g.length>1?g:this}}(jQuery),function(a){"use strict";function b(a){a||(a={}),a.dropZoneElements=[i];var b=f(a);return e(b),d(new qq.DragAndDrop(b)),i}function c(a,b){var c=i.data(j);return b?(void 0===c&&(c={}),c[a]=b,i.data(j,c),void 0):void 0===c?null:c[a]}function d(a){return c("dndInstance",a)}function e(b){var c=b.callbacks={};a.each(new qq.DragAndDrop.callbacks,function(a){var b,d=a;b=i,c[a]=function(){var a=Array.prototype.slice.call(arguments),c=b.triggerHandler(d,a);return c}})}function f(b,c){var d,e;return d=void 0===c?{}:c,a.each(b,function(b,c){c instanceof a?d[b]=c[0]:a.isPlainObject(c)?(d[b]={},f(c,d[b])):a.isArray(c)?(e=[],a.each(c,function(b,c){c instanceof a?a.merge(e,c):e.push(c)}),d[b]=e):d[b]=c}),void 0===c?d:void 0}function g(b){return"string"===a.type(b)&&"dispose"===b&&void 0!==d()[b]}function h(a){var b=[],c=Array.prototype.slice.call(arguments,1);return f(c,b),d()[a].apply(d(),b)}var i,j="fineUploaderDnd";a.fn.fineUploaderDnd=function(c){var e=this,f=arguments,j=[];return this.each(function(k,l){if(i=a(l),d()&&g(c)){if(j.push(h.apply(e,f)),1===e.length)return!1}else"object"!=typeof c&&c?a.error("Method "+c+" does not exist in Fine Uploader's DnD module."):b.apply(e,f)}),1===j.length?j[0]:j.length>1?j:this}}(jQuery),qq.s3=qq.s3||{},qq.s3.util=qq.s3.util||function(){"use strict";return{AWS_PARAM_PREFIX:"x-amz-meta-",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",getBucket:function(a){var b,c=[/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i];return qq.each(c,function(c,d){var e=d.exec(a);return e?(b=e[1],!1):void 0}),b},getPolicy:function(a){var b={},c=[],d=qq.s3.util.getBucket(a.endpoint),e=a.key,f=a.acl,g=a.type,h=new Date,i=a.expectedStatus,j=a.sessionToken,k=a.params,l=qq.s3.util.getSuccessRedirectAbsoluteUrl(a.successRedirectUrl),m=a.minFileSize,n=a.maxFileSize,o=a.reducedRedundancy,p=a.serverSideEncryption;return b.expiration=qq.s3.util.getPolicyExpirationDate(h),c.push({acl:f}),c.push({bucket:d}),g&&c.push({"Content-Type":g}),i&&c.push({success_action_status:i.toString()}),l&&c.push({success_action_redirect:l}),o&&(c.push({}),c[c.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),j&&(c.push({}),c[c.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=j),p&&(c.push({}),c[c.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),c.push({key:e}),qq.each(k,function(a,b){var d=qq.s3.util.AWS_PARAM_PREFIX+a,e={};e[d]=encodeURIComponent(b),c.push(e)}),b.conditions=c,qq.s3.util.enforceSizeLimits(b,m,n),b},refreshPolicyCredentials:function(a,b){var c=!1;qq.each(a.conditions,function(a,d){qq.each(d,function(a){a===qq.s3.util.SESSION_TOKEN_PARAM_NAME&&(d[a]=b,c=!0)})}),c||(a.conditions.push({}),a.conditions[a.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=b)},generateAwsParams:function(a,b){var c={},d=a.params,e=new qq.Promise,f=qq.s3.util.getPolicy(a),g=a.sessionToken,h=a.type,i=a.key,j=a.accessKey,k=a.acl,l=a.expectedStatus,m=qq.s3.util.getSuccessRedirectAbsoluteUrl(a.successRedirectUrl),n=a.reducedRedundancy,o=a.serverSideEncryption,p=a.log;return c.key=i,c.AWSAccessKeyId=j,h&&(c["Content-Type"]=h),l&&(c.success_action_status=l),m&&(c.success_action_redirect=m),n&&(c[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),o&&(c[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),g&&(c[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=g),c.acl=k,qq.each(d,function(a,b){var d=qq.s3.util.AWS_PARAM_PREFIX+a;c[d]=encodeURIComponent(b)}),b(f).then(function(a,b,d){c.policy=a.policy,c.signature=a.signature,b&&(c.AWSAccessKeyId=b),d&&(c[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=d),e.success(c)},function(a){a=a||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.",p("Policy signing failed.  "+a,"error"),e.failure(a)}),e},enforceSizeLimits:function(a,b,c){var d=0>b?0:b,e=0>=c?9007199254740992:c;(b>0||c>0)&&a.conditions.push(["content-length-range",d.toString(),e.toString()])},getPolicyExpirationDate:function(a){if(a.setMinutes(a.getMinutes()+5),Date.prototype.toISOString)return a.toISOString();
var b=function(a){var b=String(a);return 1===b.length&&(b="0"+b),b};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(a){var b=a.contentDocument||a.contentWindow.document,c=b.location.search,d=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(c);return d?{bucket:d[1],key:d[2],etag:d[3].replace(/%22/g,"")}:void 0},getSuccessRedirectAbsoluteUrl:function(a){if(a){var b,c=document.createElement("div");return qq.ie7()?(c.innerHTML="<a href='"+a+"'></a>",b=c.firstChild,b.href):(b=document.createElement("a"),b.href=a,b.href=b.href,b.href)}},encodeQueryStringParam:function(a){var b=encodeURIComponent(a);return b=b.replace(/[!'()]/g,escape),b=b.replace(/\*/g,"%2A"),b.replace(/%20/g,"+")}}}(),qq.AbstractNonTraditionalUploadHandlerXhr=function(a){"use strict";var b=this,c=a.options,d=a.proxy,e=c.chunking,f=c.resume,g=c.namespace,h=d.onUuidChanged,i=c.resumeEnabled,j=d.getEndpoint,k=d.getName,l=d.getSize,m=d.getUuid,n=d.getDataByUuid,o=d.log,p=new qq.AbstractUploadHandlerXhr(a);qq.extend(this,p),qq.extend(this,{getResumableFilesData:function(){return b._getResumableFilesData()},getThirdPartyFileId:function(a){return b._getFileState(a).key},_shouldChunkThisFile:function(a){var c,d=b._getFileState(a);return d.chunking||(d.chunking={},c=b._getTotalChunks(a),c>1?(d.chunking.enabled=!0,d.chunking.parts=c):d.chunking.enabled=!1),d.chunking.enabled},_maybePrepareForResume:function(a){var c,d,e=b._getFileState(a);i&&void 0===e.key&&(c=b._getLocalStorageId(a),d=localStorage.getItem(c),d&&(d=JSON.parse(d),n(d.uuid)?b._markNotResumable(a):(o(qq.format("Identified file with ID {} and name of {} as resumable.",a,k(a))),h(a,d.uuid),e.key=d.key,e.loaded=d.loaded,e.chunking=d.chunking)))},_isUploading:function(){},_maybePersistChunkedState:function(a){var c,d,e=b._getFileState(a);i&&b.isResumable(a)&&(c=b._getLocalStorageId(a),d={name:k(a),size:l(a),uuid:m(a),key:e.key,loaded:e.loaded,chunking:e.chunking,lastUpdated:Date.now()},localStorage.setItem(c,JSON.stringify(d)))},_maybeDeletePersistedChunkData:function(a){var c;return i&&b.isResumable(a)&&(c=b._getLocalStorageId(a),c&&localStorage.getItem(c))?(localStorage.removeItem(c),!0):!1},_iterateResumeRecords:function(a){i&&qq.each(localStorage,function(b,c){if(0===b.indexOf(qq.format("qq{}resume-",g))){var d=JSON.parse(c);a(b,d)}})},_getResumableFilesData:function(){var a=[];return b._iterateResumeRecords(function(b,c){a.push({name:c.name,size:c.size,uuid:c.uuid,partIdx:c.chunking.lastSent+1,key:c.key})}),a},_removeExpiredChunkingRecords:function(){var a=f.recordsExpireIn;b._iterateResumeRecords(function(b,c){var d=new Date(c.lastUpdated);d.setDate(d.getDate()+a),d.getTime()<=Date.now()&&(o("Removing expired resume record with key "+b),localStorage.removeItem(b))})},_getLocalStorageId:function(a){var b=k(a),c=l(a),d=e.partSize,f=j(a);return qq.format("qq{}resume-{}-{}-{}-{}",g,b,c,d,f)}}),qq.override(this,function(a){return{add:function(c){a.add.apply(this,arguments),i&&b._maybePrepareForResume(c)}}})},function(){"use strict";qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(a,b){this._uploadSuccessParamsStore.set(a,b)}},qq.nonTraditionalBasePrivateApi={_onComplete:function(a,b,c,d){var e,f,g=c.success?!0:!1,h=this,i=arguments,j=this._options.uploadSuccess.endpoint,k=this._options.uploadSuccess.customHeaders,l=this._options.cors,m=new qq.Promise,n=this._uploadSuccessParamsStore.get(a),o=function(b){delete h._failedSuccessRequestCallbacks[a],qq.extend(c,b),qq.FineUploaderBasic.prototype._onComplete.apply(h,i),m.success(b)},p=function(f){var g=e;qq.extend(c,f),c&&c.reset&&(g=null),g?h._failedSuccessRequestCallbacks[a]=g:delete h._failedSuccessRequestCallbacks[a],h._onAutoRetry(a,b,c,d,g)||(qq.FineUploaderBasic.prototype._onComplete.apply(h,i),m.failure(f))};return g&&j?(f=new qq.UploadSuccessAjaxRequester({endpoint:j,customHeaders:k,cors:l,log:qq.bind(this.log,this)}),qq.extend(n,h._getEndpointSpecificParams(a,c,d),!0),e=qq.bind(function(){f.sendSuccessRequest(a,n).then(o,p)},h),e(),m):qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(a){var b=this._failedSuccessRequestCallbacks[a];return qq.FineUploaderBasic.prototype._manualRetry.call(this,a,b)}}}(),function(){"use strict";qq.s3.FineUploaderBasic=function(a){var b={request:{accessKey:null},objectProperties:{acl:"private",key:"uuid",reducedRedundancy:!1,serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{endpoint:null,customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},resume:{recordsExpireIn:7},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};qq.extend(b,a,!0),this.setCredentials(b.credentials,!0)||(this._currentCredentials.accessKey=b.request.accessKey),this._aclStore=this._createStore(b.objectProperties.acl),qq.FineUploaderBasic.call(this,b),this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params),this._failedSuccessRequestCallbacks={},this._cannedKeys={}},qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,{getKey:function(a){return null==this._cannedKeys[a]?this._handler.getThirdPartyFileId(a):this._cannedKeys[a]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this),this._failedSuccessRequestCallbacks=[]},setUploadSuccessParams:function(a,b){this._uploadSuccessParamsStore.set(a,b)},setCredentials:function(a,b) { return true; },setAcl:function(a,b){this._aclStore.set(a,b)},_createUploadHandler:function(){var a=this,b={objectProperties:this._options.objectProperties,aclStore:this._aclStore,signature:this._options.signature,iframeSupport:this._options.iframeSupport,getKeyName:qq.bind(this._determineKeyName,this),validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};return qq.override(this._endpointStore,function(a){return{get:function(b){var c=a.get(b);return true}}}),qq.override(this._paramsStore,function(a){return{get:function(b){var c=a.get(b),d={};return qq.each(c,function(a,b){d[a.toLowerCase()]=qq.isFunction(b)?b():b}),d}}}),b.signature.credentialsProvider={get:function(){return a._currentCredentials},onExpired:function(){var b=new qq.Promise,c=a._options.callbacks.onCredentialsExpired();return c instanceof qq.Promise?c.then(function(c){try{a.setCredentials(c),b.success()}catch(d){a.log("Invalid credentials returned from onCredentialsExpired callback! ("+d.message+")","error"),b.failure("onCredentialsExpired did not return valid credentials.")}},function(c){a.log("onCredentialsExpired callback indicated failure! ("+c+")","error"),b.failure("onCredentialsExpired callback failed.")}):(a.log("onCredentialsExpired callback did not return a promise!","error"),b.failure("Unexpected return value for onCredentialsExpired.")),b}},qq.FineUploaderBasic.prototype._createUploadHandler.call(this,b,"s3")},_determineKeyName:function(a,b){var c=new qq.Promise,d=this._options.objectProperties.key,e=qq.getExtension(b),f=c.failure,g=function(a,b){var d=a;void 0!==b&&(d+="."+b),c.success(d)};switch(d){case"uuid":g(this.getUuid(a),e);break;case"filename":g(b);break;default:qq.isFunction(d)?this._handleKeynameFunction(d,a,g,f):(this.log(d+" is not a valid value for the s3.keyname option!","error"),f())}return c},_handleKeynameFunction:function(a,b,c,d){var e=this,f=function(a){c(a)},g=function(a){e.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",b,a||"null"),"error"),d(a)},h=a.call(this,b);h instanceof qq.Promise?h.then(f,g):null==h?g():f(h)},_getEndpointSpecificParams:function(a,b,c){var d={key:this.getKey(a),uuid:this.getUuid(a),name:this.getName(a),bucket:qq.s3.util.getBucket(this._endpointStore.get(a))};return c&&c.getResponseHeader("ETag")?d.etag=c.getResponseHeader("ETag"):b.etag&&(d.etag=b.etag),d},_onSubmitDelete:function(a,b){var c={key:this.getKey(a),bucket:qq.s3.util.getBucket(this._endpointStore.get(a))};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,a,b,c)},_addCannedFile:function(a){var b;if(null==a.s3Key)throw new qq.Error("Did not find s3Key property in server session response.  This is required!");return b=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments),this._cannedKeys[b]=a.s3Key,b}})}(),qq.s3.RequestSigner=function(a){"use strict";function b(a,b,c){var d,e,f=b.responseText,g=j[a],h=g.promise;if(delete j[a],f)try{e=qq.parseJson(f)}catch(i){k.log("Error attempting to parse signature response: "+i,"error")}e&&e.invalid?(c=!0,d="Invalid policy document or request headers!"):e?k.expectingPolicy&&!e.policy?(c=!0,d="Response does not include the base64 encoded policy!"):e.signature||(c=!0,d="Response does not include the signature!"):(c=!0,d="Received an empty or invalid response from the server!"),c?(d&&k.log(d,"error"),h.failure(d)):h.success(e)}function c(a,b,c,d,e,f,g){var h,j="POST",k=[],l="";switch(a){case i.REQUEST_TYPE.MULTIPART_ABORT:j="DELETE",h=qq.format("uploadId={}",f);break;case i.REQUEST_TYPE.MULTIPART_INITIATE:h="uploads";break;case i.REQUEST_TYPE.MULTIPART_COMPLETE:h=qq.format("uploadId={}",f);break;case i.REQUEST_TYPE.MULTIPART_UPLOAD:j="PUT",h=qq.format("partNumber={}&uploadId={}",g,f)}return h=c+"?"+h,qq.each(e,function(a){k.push(a)}),k.sort(),qq.each(k,function(a,b){l+=b+":"+e[b]+"\n"}),{toSign:qq.format("{}\n\n{}\n\n{}/{}/{}",j,d||"",l||"\n",b,h),endOfUrl:h}}function d(a,b,c,d){var g;a.signatureConstructor?(d&&(g=a.signatureConstructor.getHeaders(),g[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=d,a.signatureConstructor.withHeaders(g)),f(a.signatureConstructor.getToSign().stringToSign,b)):(d&&qq.s3.util.refreshPolicyCredentials(a,d),e(a,b,c,d))}function e(a,b,c,d){var e=JSON.stringify(a),f=CryptoJS.enc.Utf8.parse(e),g=CryptoJS.enc.Base64.stringify(f),i=CryptoJS.HmacSHA1(g,h.get().secretKey),j=CryptoJS.enc.Base64.stringify(i);b.success({policy:g,signature:j},c,d)}function f(a,b){var c=CryptoJS.enc.Utf8.parse(a),d=CryptoJS.HmacSHA1(c,h.get().secretKey),e=CryptoJS.enc.Base64.stringify(d);b.success({signature:e})}var g,h,i=this,j={},k={expectingPolicy:!1,method:"POST",signatureSpec:{credentialsProvider:{},endpoint:null,customHeaders:{}},maxConnections:3,paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};qq.extend(k,a,!0),h=k.signatureSpec.credentialsProvider,g=qq.extend(this,new qq.AjaxRequester({method:k.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return k.signatureSpec.endpoint}},paramsStore:k.paramsStore,maxConnections:k.maxConnections,customHeaders:k.signatureSpec.customHeaders,log:k.log,onComplete:b,cors:k.cors,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{getSignature:function(a,b){var c=b,e=new qq.Promise;return h.get().secretKey&&window.CryptoJS?h.get().expiration.getTime()>Date.now()?d(b,e):h.onExpired().then(function(){d(b,e,h.get().accessKey,h.get().sessionToken)},function(){k.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error"),e.failure("Unable to sign request - expired credentials.")}):(k.log("Submitting S3 signature request for "+a),c.signatureConstructor&&(c={headers:c.signatureConstructor.getToSign().stringToSign}),g.initTransport(a).withParams(c).send(),j[a]={promise:e}),e},constructStringToSign:function(a,b,d){var e,f,g,i,j={};return{withHeaders:function(a){return j=a,this},withUploadId:function(a){return e=a,this},withContentType:function(a){return f=a,this},withPartNum:function(a){return g=a,this},getToSign:function(){var k=h.get().sessionToken;return j["x-amz-date"]=(new Date).toUTCString(),k&&(j[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=k),i=c(a,b,d,f,j,e,g),{headers:function(){return f&&(j["Content-Type"]=f),j}(),endOfUrl:i.endOfUrl,stringToSign:i.toSign}},getHeaders:function(){return qq.extend({},j)},getEndOfUrl:function(){return i&&i.endOfUrl}}}})},qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"},qq.UploadSuccessAjaxRequester=function(a){"use strict";function b(a,b,c){var f,g=d[a],h=b.responseText,i={success:!0},j={success:!1};delete d[a],e.log(qq.format("Received the following response body to an upload success request for id {}: {}",a,h));try{f=qq.parseJson(h),c||f&&(f.error||f.success===!1)?(e.log("Upload success request was rejected by the server.","error"),g.failure(qq.extend(f,j))):(e.log("Upload success was acknowledged by the server."),g.success(qq.extend(f,i)))}catch(k){c?(e.log(qq.format("Your server indicated failure in its upload success request response for id {}!",a),"error"),g.failure(j)):(e.log("Upload success was acknowledged by the server."),g.success(i))}}var c,d=[],e={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};qq.extend(e,a),c=qq.extend(this,new qq.AjaxRequester({method:e.method,endpointStore:{get:function(){return e.endpoint}},paramsStore:e.paramsStore,maxConnections:e.maxConnections,customHeaders:e.customHeaders,log:e.log,onComplete:b,cors:e.cors,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{sendSuccessRequest:function(a,b){var f=new qq.Promise;return e.log("Submitting upload success request/notification for "+a),c.initTransport(a).withParams(b).send(),d[a]=f,f}})},qq.s3.InitiateMultipartAjaxRequester=function(a){"use strict";function b(a){var b,c=qq.s3.util.getBucket(g.endpointStore.get(a)),d={},f=new qq.Promise,h=g.getKey(a);return d["x-amz-acl"]=g.aclStore.get(a),g.reducedRedundancy&&(d[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),g.serverSideEncryption&&(d[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),d[qq.s3.util.AWS_PARAM_PREFIX+g.filenameParam]=encodeURIComponent(g.getName(a)),qq.each(g.paramsStore.get(a),function(a,b){d[qq.s3.util.AWS_PARAM_PREFIX+a]=encodeURIComponent(b)}),b=e.constructStringToSign(e.REQUEST_TYPE.MULTIPART_INITIATE,c,h).withContentType(g.getContentType(a)).withHeaders(d),e.getSignature(a,{signatureConstructor:b}).then(function(a){d=b.getHeaders(),d.Authorization="AWS "+g.signatureSpec.credentialsProvider.get().accessKey+":"+a.signature,f.success(d,b.getEndOfUrl())},f.failure),f}function c(a,b,c){var d,e,h,i,j,k=f[a],l=new DOMParser,m=l.parseFromString(b.responseText,"application/xml");delete f[a],c?(j=b.status,e=m.getElementsByTagName("Message"),e.length>0&&(i=e[0].textContent)):(d=m.getElementsByTagName("UploadId"),d.length>0?h=d[0].textContent:i="Upload ID missing from request"),void 0===h?(i?g.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",a,i),"error"):g.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",a,j),"error"),k.failure("Problem initiating upload request with Amazon.",b)):(g.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",a,h)),k.success(h,b))}var d,e,f={},g={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(){},getKey:function(){},getName:function(){},log:function(){}};qq.extend(g,a),e=new qq.s3.RequestSigner({signatureSpec:g.signatureSpec,cors:g.cors,log:g.log}),d=qq.extend(this,new qq.AjaxRequester({method:g.method,contentType:null,endpointStore:g.endpointStore,maxConnections:g.maxConnections,allowXRequestedWithAndCacheControl:!1,log:g.log,onComplete:c,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{send:function(a){var c=new qq.Promise;return b(a).then(function(b,e){g.log("Submitting S3 initiate multipart upload request for "+a),f[a]=c,d.initTransport(a).withPath(e).withHeaders(b).send()},c.failure),c}})},qq.s3.CompleteMultipartAjaxRequester=function(a){"use strict";function b(a,b){var c={},d=new qq.Promise,e=h.endpointStore.get(a),g=qq.s3.util.getBucket(e),i=f.constructStringToSign(f.REQUEST_TYPE.MULTIPART_COMPLETE,g,h.getKey(a)).withUploadId(b).withContentType("application/xml; charset=UTF-8");return f.getSignature(a,{signatureConstructor:i}).then(function(a){c=i.getHeaders(),c.Authorization="AWS "+h.signatureSpec.credentialsProvider.get().accessKey+":"+a.signature,d.success(c,i.getEndOfUrl())},d.failure),d}function c(a,b,c){var d=g[a],e=new DOMParser,f=h.endpointStore.get(a),i=qq.s3.util.getBucket(f),j=(h.getKey(a),e.parseFromString(b.responseText,"application/xml")),k=j.getElementsByTagName("Bucket"),l=j.getElementsByTagName("Key");delete g[a],h.log(qq.format("Complete response status {}, body = {}",b.status,b.responseText)),c?h.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",a,b.status),"error"):k.length&&l.length?k[0].textContent!==i&&(c=!0,h.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",a),"error")):(c=!0,h.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",a),"error")),c?d.failure("Problem asking Amazon to combine the parts!",b):d.success(b)}function d(a){var b=document.implementation.createDocument(null,"CompleteMultipartUpload",null);return qq.each(a,function(a,c){var d=c.part,e=c.etag,f=b.createElement("Part"),g=b.createElement("PartNumber"),h=b.createTextNode(d),i=b.createTextNode(e),j=b.createElement("ETag");j.appendChild(i),g.appendChild(h),f.appendChild(g),f.appendChild(j),qq(b).children()[0].appendChild(f)}),(new XMLSerializer).serializeToString(b)}var e,f,g={},h={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(){},log:function(){}};qq.extend(h,a),f=new qq.s3.RequestSigner({signatureSpec:h.signatureSpec,cors:h.cors,log:h.log}),e=qq.extend(this,new qq.AjaxRequester({method:h.method,contentType:"application/xml; charset=UTF-8",endpointStore:h.endpointStore,maxConnections:h.maxConnections,allowXRequestedWithAndCacheControl:!1,log:h.log,onComplete:c,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{send:function(a,c,f){var i=new qq.Promise;return b(a,c).then(function(b,c){var j=d(f);h.log("Submitting S3 complete multipart upload request for "+a),g[a]=i,delete b["Content-Type"],e.initTransport(a).withPath(c).withHeaders(b).withPayload(j).send()},i.failure),i}})},qq.s3.AbortMultipartAjaxRequester=function(a){"use strict";function b(a,b){var c={},d=new qq.Promise,g=f.endpointStore.get(a),h=qq.s3.util.getBucket(g),i=e.constructStringToSign(e.REQUEST_TYPE.MULTIPART_ABORT,h,f.getKey(a)).withUploadId(b);return e.getSignature(a,{signatureConstructor:i}).then(function(a){c=i.getHeaders(),c.Authorization="AWS "+f.signatureSpec.credentialsProvider.get().accessKey+":"+a.signature,d.success(c,i.getEndOfUrl())},d.failure),d}function c(a,b,c){var d,e=new DOMParser,g=e.parseFromString(b.responseText,"application/xml"),h=g.getElementsByTagName("Error");f.log(qq.format("Abort response status {}, body = {}",b.status,b.responseText)),c?f.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",a,b.status),"error"):h.length?(c=!0,d=g.getElementsByTagName("Message")[0].textContent,f.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",a,d),"error")):f.log(qq.format("Abort MPU request succeeded for file ID {}.",a))}var d,e,f={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(){},log:function(){}};qq.extend(f,a),e=new qq.s3.RequestSigner({signatureSpec:f.signatureSpec,cors:f.cors,log:f.log}),d=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:f.method,contentType:null,endpointStore:f.endpointStore,maxConnections:f.maxConnections,allowXRequestedWithAndCacheControl:!1,log:f.log,onComplete:c,successfulResponseCodes:{DELETE:[204]}})),qq.extend(this,{send:function(a,c){b(a,c).then(function(b,c){f.log("Submitting S3 Abort multipart upload request for "+a),d.initTransport(a).withPath(c).withHeaders(b).send()})}})},qq.s3.UploadHandlerForm=function(a,b){"use strict";function c(b,c){var d=a.endpointStore.get(b),e=qq.s3.util.getBucket(d);try{var f=c.contentDocument||c.contentWindow.document;f.body.innerHTML;var g=qq.s3.util.parseIframeResponse(c);if(g.bucket===e&&g.key===qq.s3.util.encodeQueryStringParam(h._getFileState(b).key))return!0;m("Response from AWS included an unexpected bucket or key name.","error")}catch(i){m("Error when attempting to parse form upload response ("+i.message+")","error")}return!1}function d(a){var b=r.get(a);return b[q]=k(a),qq.s3.util.generateAwsParams({endpoint:s.get(a),params:b,key:h._getFileState(a).key,accessKey:z.get().accessKey,sessionToken:z.get().sessionToken,acl:t.get(a),minFileSize:w.minSizeLimit,maxFileSize:w.maxSizeLimit,successRedirectUrl:y,reducedRedundancy:u,serverSideEncryption:v,log:m},qq.bind(A.getSignature,this,a))}function e(b,c){var e=new qq.Promise,f=a.demoMode?"GET":"POST",i=a.endpointStore.get(b),j=k(b);return d(b).then(function(a){var b=h._initFormForUpload({method:f,endpoint:i,params:a,paramsInBody:!0,targetName:c.name});e.success(b)},function(a){e.failure(a),g(b,c,j,{error:a})}),e}function f(a){var b=k(a),d=h._createIframe(a),f=h._getFileState(a).input;e(a,d).then(function(e){o(a,b),e.appendChild(f),h._attachLoadEvent(d,function(e){m("iframe loaded"),e?e.success===!1&&m("Amazon likely rejected the upload request","error"):(e={},e.success=c(a,d),e.success===!1?m("A success response was received by Amazon, but it was invalid in some way.","error"):qq.extend(e,qq.s3.util.parseIframeResponse(d))),g(a,d,b,e)}),m("Sending upload request for "+a),e.submit(),qq(e).remove()})}function g(b,c,d,e){h._detachLoadEvent(b),c&&qq(c).remove(),(e.success||!a.onAutoRetry(b,d,e))&&(n(b,d,e),i(b))}var h=this,i=b.onUploadComplete,j=b.onUuidChanged,k=b.getName,l=b.getUuid,m=b.log,n=a.onComplete,o=a.onUpload,p=a.getKeyName,q=a.filenameParam,r=a.paramsStore,s=a.endpointStore,t=a.aclStore,u=a.objectProperties.reducedRedundancy,v=a.objectProperties.serverSideEncryption,w=a.validation,x=a.signature,y=a.iframeSupport.localBlankPagePath,z=a.signature.credentialsProvider,A=new qq.s3.RequestSigner({signatureSpec:x,cors:a.cors,log:m});if(void 0===y)throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");qq.extend(this,new qq.AbstractUploadHandlerForm({options:{isCors:!1,inputName:"file"},proxy:{onCancel:a.onCancel,onUuidChanged:j,getName:k,getUuid:l,log:m}})),qq.extend(this,{upload:function(a){var b=h._getFileState(a).input,c=k(a);if(!b)throw new Error("file with passed id was not added, or already uploaded or canceled");this.isValid(a)&&(h._getFileState(a).key?f(a):p(a,c).then(function(b){h._getFileState(a).key=b,f(a)},function(b){g(a,null,c,{error:b})}))},getThirdPartyFileId:function(a){return h._getFileState(a).key}})},qq.s3.UploadHandlerXhr=function(a,b){"use strict";function c(a){return encodeURIComponent(d(a))}function d(a){return T._getFileState(a).key}function e(a,b){T._getFileState(a).key=b}function f(a){T.getFile(a),T._createXhr(a),T._shouldChunkThisFile(a)?(void 0===T._getFileState(a).loaded&&(T._getFileState(a).loaded=0),p(a)):(T._getFileState(a).loaded=0,m(a))}function g(a){var b=T._getFileState(a).xhr;return function(){4===b.readyState&&(T._getFileState(a).chunking.enabled?w(a):i(a))}}function h(a){return"EntityTooSmall"===a||"InvalidPart"===a||"InvalidPartOrder"===a||"NoSuchUpload"===a}function i(b,c,d){var e=d||T._getFileState(b).xhr,f=z(b),g=B(b),i=j(b,d),k=c||j(b),l=T._getFileState(b).paused,m=!l&&(null!=c||i.success!==!0);m&&h(i.code)&&(D("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),T._maybeDeletePersistedChunkData(b),delete T._getFileState(b).loaded,delete T._getFileState(b).chunking),m&&a.onAutoRetry(b,f,k,e)||(D(qq.format("Upload attempt for file ID {} to S3 is complete",b)),m||l||(k.success=!0,F(b,f,g,g),T._maybeDeletePersistedChunkData(b),delete T._getFileState(b).loaded,delete T._getFileState(b).chunking),l?qq.log(qq.format("Detected pause on {} ({}).",b,f)):(G(b,f,k,e),T._getFileState(b)&&delete T._getFileState(b).xhr,x(b)))}function j(a,b){var c,d=b||T._getFileState(a).xhr,e={};try{D(qq.format("Received response status {} with body: {}",d.status,d.responseText)),d.status===E?e.success=!0:(c=k(d.responseText),c&&(e.error=c.message,e.code=c.code))}catch(f){D("Error when attempting to parse xhr response text ("+f.message+")","error")}return e}function k(a){var b,c,d=new DOMParser,e=d.parseFromString(a,"application/xml"),f=e.getElementsByTagName("Error"),g={};return f.length?(b=e.getElementsByTagName("Code"),c=e.getElementsByTagName("Message"),c.length&&(g.message=c[0].textContent),b.length&&(g.code=b[0].textContent),g):void 0}function l(a){var b=z(a);T.isValid(a)&&(T._maybePrepareForResume(a),void 0!==d(a)?(H(a,b),f(a)):I(a,b).then(function(c){e(a,c),H(a,b),f(a)},function(b){i(a,{error:b})}))}function m(a){var b=T._getFileState(a).xhr,c=z(a),d=T.getFile(a);b.upload.onprogress=function(b){b.lengthComputable&&(T._getFileState(a).loaded=b.loaded,F(a,c,b.loaded,b.total))},b.onreadystatechange=g(a),o(a,d).then(function(c){D("Sending upload request for "+a),b.send(c)})}function n(a){var b=K.get(a);return b[J]=z(a),qq.s3.util.generateAwsParams({endpoint:L.get(a),params:b,type:T._getMimeType(a),key:d(a),accessKey:U.get().accessKey,sessionToken:U.get().sessionToken,acl:M.get(a),expectedStatus:E,minFileSize:P.minSizeLimit,maxFileSize:P.maxSizeLimit,reducedRedundancy:N,serverSideEncryption:O,log:D},qq.bind(V.getSignature,this,a))}function o(a,b){var c=new FormData,d=L.get(a),e=d,f=T._getFileState(a).xhr,g=new qq.Promise;return n(a).then(function(a){f.open("POST",e,!0),qq.obj2FormData(a,c),c.append("file",b),g.success(c)},function(b){g.failure(b),i(a,{error:b})}),g}function p(a){v(a).then(function(){r(a)},function(b,c){i(a,{error:b},c)})}function q(a){return T._getFileState(a).chunking.lastSent>=0?T._getFileState(a).chunking.lastSent+1:0}function r(a){var b=T._getFileState(a).chunking.parts,c=q(a);b>c?t(a):s(a)}function s(a){var b=T._getFileState(a).chunking.uploadId,c=T._getFileState(a).chunking.etags;Y.send(a,b,c).then(function(b){i(a,null,b)},function(b,c){i(a,{error:b},c)})}function t(b){var c=q(b),d=z(b),e=T._getFileState(b).xhr,f=B(b),h=T._getChunkData(b,c),j=a.endpointStore.get(b);u(b).then(function(c,i){var k=j+"/"+i;a.onUploadChunk(b,d,T._getChunkDataForCallback(h)),e.upload.onprogress=function(c){if(c.lengthComputable){var e=c.loaded+T._getFileState(b).loaded;a.onProgress(b,d,e,f)}},e.onreadystatechange=g(b),e.open("PUT",k,!0),qq.each(c,function(a,b){e.setRequestHeader(a,b)}),D(qq.format("Sending part {} of {} for file ID {} - {} ({} bytes)",h.part+1,h.count,b,d,h.size)),e.send(h.blob)},function(){i(b,{error:"Problem signing the chunk!"},e)})}function u(b){var d={},e=a.endpointStore.get(b),f=qq.s3.util.getBucket(e),g=c(b),h=new qq.Promise,i=W.constructStringToSign(W.REQUEST_TYPE.MULTIPART_UPLOAD,f,g).withPartNum(q(b)+1).withUploadId(T._getFileState(b).chunking.uploadId);return W.getSignature(b,{signatureConstructor:i}).then(function(a){d=i.getHeaders(),d.Authorization="AWS "+U.get().accessKey+":"+a.signature,h.success(d,i.getEndOfUrl())},h.failure),h}function v(a){return T._getFileState(a).chunking.uploadId?(new qq.Promise).success(T._getFileState(a).chunking.uploadId):X.send(a).then(function(b){T._getFileState(a).chunking.uploadId=b})}function w(b){var c,d=q(b),e=T._getFileState(b).xhr,f=j(b),g=T._getChunkData(b,d);f.success?(T._getFileState(b).chunking.lastSent=d,c=e.getResponseHeader("ETag"),T._getFileState(b).chunking.etags||(T._getFileState(b).chunking.etags=[]),T._getFileState(b).chunking.etags.push({part:d+1,etag:c}),T._getFileState(b).loaded+=g.size,T._maybePersistChunkedState(b),a.onUploadChunkSuccess(b,T._getChunkDataForCallback(g),f,e),r(b)):(f.error&&D(f.error,"error"),i(b))}var x=b.onUploadComplete,y=b.onUuidChanged,z=b.getName,A=b.getUuid,B=b.getSize,C=b.getDataByUuid,D=b.log,E=200,F=a.onProgress,G=a.onComplete,H=a.onUpload,I=a.getKeyName,J=a.filenameParam,K=a.paramsStore,L=a.endpointStore,M=a.aclStore,N=a.objectProperties.reducedRedundancy,O=a.objectProperties.serverSideEncryption,P=a.validation,Q=a.signature,R=a.chunking.enabled&&qq.supportedFeatures.chunking,S=a.resume.enabled&&R&&qq.supportedFeatures.resume&&void 0!==window.localStorage,T=this,U=a.signature.credentialsProvider,V=new qq.s3.RequestSigner({expectingPolicy:!0,signatureSpec:Q,cors:a.cors,log:D}),W=new qq.s3.RequestSigner({signatureSpec:Q,cors:a.cors,log:D}),X=new qq.s3.InitiateMultipartAjaxRequester({filenameParam:J,endpointStore:L,paramsStore:K,signatureSpec:Q,aclStore:M,reducedRedundancy:N,serverSideEncryption:O,cors:a.cors,log:D,getContentType:function(a){return T._getMimeType(a)},getKey:function(a){return c(a)},getName:function(a){return z(a)}}),Y=new qq.s3.CompleteMultipartAjaxRequester({endpointStore:L,signatureSpec:Q,cors:a.cors,log:D,getKey:function(a){return c(a)}}),Z=new qq.s3.AbortMultipartAjaxRequester({endpointStore:L,signatureSpec:Q,cors:a.cors,log:D,getKey:function(a){return c(a)}});qq.extend(this,new qq.AbstractNonTraditionalUploadHandlerXhr({options:{namespace:"s3",chunking:R?a.chunking:null,resumeEnabled:S},proxy:{onUpload:l,onCancel:a.onCancel,onUuidChanged:y,getName:z,getSize:B,getUuid:A,getEndpoint:L.get,getDataByUuid:C,log:D}})),qq.override(this,function(a){return{expunge:function(b){var c=T._getFileState(b).chunking&&T._getFileState(b).chunking.uploadId,d=T._maybeDeletePersistedChunkData(b);void 0!==c&&d&&Z.send(b,c),a.expunge(b)},_getLocalStorageId:function(b){var c=a._getLocalStorageId(b),d=L.get(b),e=qq.s3.util.getBucket(d);return c+"-"+e}}})},function(){"use strict";qq.s3.FineUploader=function(a){var b={failedUploadTextDisplay:{mode:"custom"}};qq.extend(b,a,!0),qq.FineUploader.call(this,b,"s3"),qq.supportedFeatures.ajaxUploading||void 0!==b.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>")},qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype),qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi),qq.extend(qq.s3.FineUploader.prototype,{_onComplete:function(a){var b=qq.FineUploader.prototype._onComplete.apply(this,arguments);return b instanceof qq.Promise&&(this._templating.hideProgress(a),this._templating.setStatusText(a,this._options.text.waitingForResponse)),b}})}(),function(a){"use strict";a.fn.fineUploaderS3=function(b){return"object"==typeof b&&(b.endpointType="s3"),a.fn.fineUploader.apply(this,arguments)}}(jQuery),qq.azure=qq.azure||{},qq.azure.util=qq.azure.util||function(){"use strict";return{AZURE_PARAM_PREFIX:"x-ms-meta-",getParamsAsHeaders:function(a){var b={};return qq.each(a,function(a,c){var d=qq.azure.util.AZURE_PARAM_PREFIX+a;qq.isFunction(c)?b[d]=encodeURIComponent(String(c())):qq.isObject(c)?qq.extend(b,qq.azure.util.getParamsAsHeaders(c)):b[d]=encodeURIComponent(String(c))}),b},parseAzureError:function(a,b){var c,d,e=new DOMParser,f=e.parseFromString(a,"application/xml"),g=f.getElementsByTagName("Error")[0],h={};
return b("Received error response: "+a,"error"),g?(d=g.getElementsByTagName("Message")[0],d&&(h.message=d.textContent),c=g.getElementsByTagName("Code")[0],c&&(h.code=c.textContent),b("Parsed Azure error: "+JSON.stringify(h),"error"),h):void 0}}}(),function(){"use strict";qq.azure.FineUploaderBasic=function(a){if(!qq.supportedFeatures.ajaxUploading)throw new qq.Error("Uploading directly to Azure is not possible in this browser.");var b={signature:{endpoint:null,customHeaders:{}},blobProperties:{name:"uuid"},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},chunking:{partSize:4e6,minFileSize:4000001},resume:{recordsExpireIn:7}};qq.extend(b,a,!0),qq.FineUploaderBasic.call(this,b),this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params),this._failedSuccessRequestCallbacks={},this._cannedBlobNames={}},qq.extend(qq.azure.FineUploaderBasic.prototype,qq.basePublicApi),qq.extend(qq.azure.FineUploaderBasic.prototype,qq.basePrivateApi),qq.extend(qq.azure.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi),qq.extend(qq.azure.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi),qq.extend(qq.azure.FineUploaderBasic.prototype,{getBlobName:function(a){return null==this._cannedBlobNames[a]?this._handler.getThirdPartyFileId(a):this._cannedBlobNames[a]},_getEndpointSpecificParams:function(a){return{blob:this.getBlobName(a),uuid:this.getUuid(a),name:this.getName(a),container:this._endpointStore.get(a)}},_createUploadHandler:function(){return qq.FineUploaderBasic.prototype._createUploadHandler.call(this,{signature:this._options.signature,onGetBlobName:qq.bind(this._determineBlobName,this),deleteBlob:qq.bind(this._deleteBlob,this,!0)},"azure")},_determineBlobName:function(a){var b=this._options.blobProperties.name,c=this.getUuid(a),d=this.getName(a),e=qq.getExtension(d);if(!qq.isString(b))return b.call(this,a);switch(b){case"uuid":return(new qq.Promise).success(c+"."+e);case"filename":return(new qq.Promise).success(d);default:return new qq.Promise.failure("Invalid blobName option value - "+b)}},_addCannedFile:function(a){var b;if(null==a.blobName)throw new qq.Error("Did not find blob name property in server session response.  This is required!");return b=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments),this._cannedBlobNames[b]=a.blobName,b},_deleteBlob:function(a,b){var c=this,d={},e={get:function(a){return c._endpointStore.get(a)+"/"+c.getBlobName(a)}},f={get:function(a){return d[a]}},g=function(a,b){d[a]=b,i.send(a)},h=function(b,d,e){a?(c.log("Will cancel upload, but cannot remove uncommitted parts from Azure due to issue retrieving SAS","error"),qq.FineUploaderBasic.prototype._onCancel.call(c,b,c.getName(b))):(c._onDeleteComplete(b,e,!0),c._options.callbacks.onDeleteComplete(b,e,!0))},i=new qq.azure.DeleteBlob({endpointStore:f,log:qq.bind(c.log,c),onDelete:function(a){c._onDelete(a),c._options.callbacks.onDelete(a)},onDeleteComplete:function(b,e,f){delete d[b],f&&(a?c.log("Will cancel upload, but failed to remove uncommitted parts from Azure.","error"):qq.azure.util.parseAzureError(e.responseText,qq.bind(c.log,c))),a?(qq.FineUploaderBasic.prototype._onCancel.call(c,b,c.getName(b)),c.log("Deleted uncommitted blob chunks for "+b)):(c._onDeleteComplete(b,e,f),c._options.callbacks.onDeleteComplete(b,e,f))}}),j=new qq.azure.GetSas({cors:this._options.cors,endpointStore:{get:function(){return c._options.signature.endpoint}},restRequestVerb:i.method,log:qq.bind(c.log,c)});j.request(b,e.get(b)).then(qq.bind(g,c,b),qq.bind(h,c,b))},_createDeleteHandler:function(){var a=this;return{sendDelete:function(b){a._deleteBlob(!1,b)}}}})}(),qq.azure.UploadHandlerXhr=function(a,b){"use strict";function c(a){var b=o.get(a),c=new qq.Promise,d=function(d){k._getFileState(a).key=d,c.success(b+"/"+d)},e=function(a){c.failure(a)};return w(a).then(d,e),c}function d(a){k._shouldChunkThisFile(a)?(void 0===k._getFileState(a).loaded&&(k._getFileState(a).loaded=0,k._getFileState(a).chunking.blockIds=[]),z(a,G(a)),h(a)):f(a)}function e(a,b){var d=function(a){l("GET SAS request succeeded."),b(a)},e=function(b,c){l("GET SAS request failed: "+b,"error"),F(a,c,"Problem communicating with local server")},f=function(b){O.request(a,b).then(d,e)},g=function(b){l(qq.format("Failed to determine blob name for ID {} - {}",a,b),"error"),F(a,null,"Problem determining name of file to upload")};c(a).then(f,g)}function f(a){var b=k.getFile(a);e(a,function(c){var d=L.upload(a,c,b);k._registerXhr(a,d,L)})}function g(a){return k._getFileState(a).chunking.lastSent>=0?k._getFileState(a).chunking.lastSent+1:0}function h(a){var b=k._getFileState(a).chunking.parts,c=g(a);k.isValid(a)&&b>c?i(a,c):j(a)}function i(a,b){e(a,function(c){var d=k._getChunkData(a,b),e=M.upload(a,c,b,d.blob);k._registerXhr(a,e,M)})}function j(a){e(a,function(b){var c=k._getMimeType(a),d=k._getFileState(a).chunking.blockIds,e=N.send(a,b,d,c);k._registerXhr(a,e,N)})}var k=this,l=b.log,m=a.cors,n=b.onUploadComplete,o=a.endpointStore,p=a.paramsStore,q=a.signature,r=a.filenameParam,s=a.chunking.minFileSize,t=a.chunking.enabled&&qq.supportedFeatures.chunking,u=a.deleteBlob,v=a.resume.enabled&&t&&qq.supportedFeatures.resume&&void 0!==window.localStorage,w=a.onGetBlobName,x=a.onProgress,y=a.onComplete,z=a.onUpload,A=a.onUploadChunk,B=a.onUploadChunkSuccess,C=b.onUuidChanged,D=function(a){var b=p.get(a);return b[r]=G(a),b},E=function(a){k._getFileState(a)&&delete k._getFileState(a).xhr,n(a)},F=function(b,c,d){var e,f=k._getFileState(b).paused;d?(e=qq.azure.util.parseAzureError(c.responseText,l),403!==c.status&&a.onAutoRetry(b,G(b),{error:d,azureError:e&&e.message},c)||(403===c.status&&l("Server responded with 403 - will NOT auto-retry.","error"),y(b,G(b),{success:!1,error:d,azureError:e&&e.message},c),E(b))):(k._maybeDeletePersistedChunkData(b),f?qq.log(qq.format("Detected pause on {} ({}).",b,G(b))):(y(b,G(b),{success:!0},c),E(b)))},G=b.getName,H=b.getUuid,I=b.getSize,J=b.getDataByUuid,K=function(a,b,c){k._shouldChunkThisFile(a)?x(a,G(a),b+k._getFileState(a).loaded,I(a)):(k._getFileState(a).loaded=b,x(a,G(a),b,c))},L=new qq.azure.PutBlob({getBlobMetadata:D,onProgress:K,onUpload:function(a){z(a,G(a))},onComplete:function(a,b,c){c?l("Put Blob call failed for "+a,"error"):l("Put Blob call succeeded for "+a),F.call(this,a,b,c?"Problem sending file to Azure":null)},log:l}),M=new qq.azure.PutBlock({onProgress:K,onUpload:function(a){var b=g(a),c=k._getChunkData(a,b);A(a,G(a),k._getChunkDataForCallback(c))},onComplete:function(a,b,c,d){var e=g(a),f=k._getChunkData(a,e),i=k._getChunkDataForCallback(f);c?(l("Put Block call failed for "+a,"error"),F.call(this,a,b,"Problem uploading block")):(k._getFileState(a).chunking.blockIds.push(d),l("Put Block call succeeded for "+a),k._getFileState(a).chunking.lastSent=e,k._getFileState(a).loaded+=f.size,k._maybePersistChunkedState(a),B(a,i,{},b),h(a))},log:l}),N=new qq.azure.PutBlockList({getBlobMetadata:D,onComplete:function(a,b,c){c?(l("Attempt to combine chunks failed for id "+a,"error"),F.call(this,a,b,"Problem combining file pieces")):(l("Success combining chunks for id "+a),F.call(this,a,b))},log:l}),O=new qq.azure.GetSas({cors:m,endpointStore:{get:function(){return q.endpoint}},customHeaders:q.customHeaders,restRequestVerb:L.method,log:l});qq.extend(this,new qq.AbstractNonTraditionalUploadHandlerXhr({options:{namespace:"azure",chunking:t?a.chunking:null,resumeEnabled:v},proxy:{onUpload:d,onCancel:a.onCancel,onUuidChanged:C,getName:G,getSize:I,getUuid:H,getEndpoint:o.get,getDataByUuid:J,log:l}})),qq.override(this,function(a){return{expunge:function(b){var c=k._getFileState(b).canceled,d=k._getFileState(b).chunking,e=d&&d.blockIds||[];c&&e.length>0&&u(b),k._maybeDeletePersistedChunkData(b),a.expunge(b)},_shouldChunkThisFile:function(b){return t&&I(b)>=s?a._shouldChunkThisFile(b):!1}}})},qq.azure.GetSas=function(a){"use strict";function b(a,b,c){var d=e[a];c?d.failure("Received response code "+b.status,b):b.responseText.length?d.success(b.responseText):d.failure("Empty response.",b),delete e[a]}var c,d={cors:{expected:!1,sendCredentials:!1},customHeaders:{},restRequestVerb:"PUT",endpointStore:null,log:function(){}},e={};qq.extend(d,a),c=qq.extend(this,new qq.AjaxRequester({validMethods:["GET"],method:"GET",successfulResponseCodes:{GET:[200]},contentType:null,customHeaders:d.customHeaders,endpointStore:d.endpointStore,cors:d.cors,log:d.log,onComplete:b})),qq.extend(this,{request:function(a,b){var f=new qq.Promise,g=d.restRequestVerb;return d.log(qq.format("Submitting GET SAS request for a {} REST request related to file ID {}.",g,a)),e[a]=f,c.initTransport(a).withParams({bloburi:b,_method:g}).withCacheBuster().send(),f}})},qq.azure.DeleteBlob=function(a){"use strict";var b,c="DELETE",d={endpointStore:{},onDelete:function(){},onDeleteComplete:function(){},log:function(){}};qq.extend(d,a),b=qq.extend(this,new qq.AjaxRequester({validMethods:[c],method:c,successfulResponseCodes:function(){var a={};return a[c]=[202],a}(),contentType:null,endpointStore:d.endpointStore,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:d.log,onSend:d.onDelete,onComplete:d.onDeleteComplete})),qq.extend(this,{method:c,send:function(a){return d.log("Submitting Delete Blob request for "+a),b.initTransport(a).send()}})},qq.azure.PutBlob=function(a){"use strict";var b,c="PUT",d={getBlobMetadata:function(){},onProgress:function(){},onUpload:function(){},onComplete:function(){},log:function(){}},e={},f={get:function(a){return e[a]}};qq.extend(d,a),b=qq.extend(this,new qq.AjaxRequester({validMethods:[c],method:c,successfulResponseCodes:function(){var a={};return a[c]=[201],a}(),contentType:null,customHeaders:function(a){var b=d.getBlobMetadata(a),c=qq.azure.util.getParamsAsHeaders(b);return c["x-ms-blob-type"]="BlockBlob",c},endpointStore:f,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:d.log,onSend:d.onUpload,onComplete:function(a){delete e[a],d.onComplete.apply(this,arguments)},onProgress:d.onProgress})),qq.extend(this,{method:c,upload:function(a,c,f){return d.log("Submitting Put Blob request for "+a),e[a]=c,b.initTransport(a).withPayload(f).withHeaders({"Content-Type":f.type}).send()}})},qq.azure.PutBlockList=function(a){"use strict";function b(a){var b=document.implementation.createDocument(null,"BlockList",null);return qq.each(a,function(a,c){var d=b.createElement("Latest"),e=b.createTextNode(c);d.appendChild(e),qq(b).children()[0].appendChild(d)}),(new XMLSerializer).serializeToString(b)}var c,d="PUT",e={},f={getBlobMetadata:function(){},onComplete:function(){},log:function(){}},g={},h={get:function(a){return g[a]}};qq.extend(f,a),c=qq.extend(this,new qq.AjaxRequester({validMethods:[d],method:d,successfulResponseCodes:function(){var a={};return a[d]=[201],a}(),customHeaders:function(a){var b=f.getBlobMetadata(a);return qq.azure.util.getParamsAsHeaders(b)},contentType:"text/plain",endpointStore:h,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:f.log,onSend:function(){},onComplete:function(a){delete g[a],f.onComplete.apply(this,arguments),delete e[a]}})),qq.extend(this,{method:d,send:function(a,d,e,h){var i=b(e);return f.log(qq.format("Submitting Put Block List request for {}",a)),g[a]=qq.format("{}&comp=blocklist",d),c.initTransport(a).withPayload(i).withHeaders({"x-ms-blob-content-type":h}).send()}})},qq.azure.PutBlock=function(a){"use strict";function b(a){var b=5,c=new Array(b+1).join("0"),d=(c+a).slice(-b);return btoa(d)}var c,d="PUT",e={},f={onProgress:function(){},onUpload:function(){},onComplete:function(){},log:function(){}},g={},h={get:function(a){return g[a]}};qq.extend(f,a),c=qq.extend(this,new qq.AjaxRequester({validMethods:[d],method:d,successfulResponseCodes:function(){var a={};return a[d]=[201],a}(),contentType:null,endpointStore:h,allowXRequestedWithAndCacheControl:!1,cors:{expected:!0},log:f.log,onSend:f.onUpload,onComplete:function(a,b,c){delete g[a],f.onComplete.call(this,a,b,c,e[a]),delete e[a]},onProgress:f.onProgress})),qq.extend(this,{method:d,upload:function(a,d,h,i){var j=b(h);return f.log(qq.format("Submitting Put Block request for {} = part {}",a,h)),g[a]=qq.format("{}&comp=block&blockid={}",d,encodeURIComponent(j)),e[a]=j,c.initTransport(a).withPayload(i).send()}})},function(){"use strict";qq.azure.FineUploader=function(a){var b={failedUploadTextDisplay:{mode:"custom"}};qq.extend(b,a,!0),qq.FineUploader.call(this,b,"azure")},qq.extend(qq.azure.FineUploader.prototype,qq.azure.FineUploaderBasic.prototype),qq.extend(qq.azure.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.azure.FineUploader.prototype,qq.uiPrivateApi),qq.extend(qq.azure.FineUploader.prototype,{})}(),function(a){"use strict";a.fn.fineUploaderAzure=function(b){return"object"==typeof b&&(b.endpointType="azure"),a.fn.fineUploader.apply(this,arguments)}}(jQuery);var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=255&c[f>>>2]>>>24-8*(f%4);b[d+f>>>2]|=g<<24-8*((d+f)%4)}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(0|4294967296*a.random());return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=255&b[e>>>2]>>>24-8*(e%4);d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=255&b[e>>>2]>>>24-8*(e%4);d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}});var l=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=a.enc;d.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;c>f;f+=3)for(var g=255&b[f>>>2]>>>24-8*(f%4),h=255&b[f+1>>>2]>>>24-8*((f+1)%4),i=255&b[f+2>>>2]>>>24-8*((f+2)%4),j=g<<16|h<<8|i,k=0;4>k&&c>f+.75*k;k++)e.push(d.charAt(63&j>>>6*(3-k)));var l=d.charAt(64);if(l)for(;e.length%4;)e.push(l);return e.join("")},parse:function(a){var b=a.length,d=this._map,e=d.charAt(64);if(e){var f=a.indexOf(e);-1!=f&&(b=f)}for(var g=[],h=0,i=0;b>i;i++)if(i%4){var j=d.indexOf(a.charAt(i-1))<<2*(i%4),k=d.indexOf(a.charAt(i))>>>6-2*(i%4);g[h>>>2]|=(j|k)<<24-8*(h%4),h++}return c.create(g,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=a.enc,e=d.Utf8,f=a.algo;f.HMAC=c.extend({init:function(a,b){a=this._hasher=new a.init,"string"==typeof b&&(b=e.parse(b));var c=a.blockSize,d=4*c;b.sigBytes>d&&(b=a.finalize(b)),b.clamp();for(var f=this._oKey=b.clone(),g=this._iKey=b.clone(),h=f.words,i=g.words,j=0;c>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher,c=b.finalize(a);b.reset();var d=b.finalize(this._oKey.clone().concat(c));return d}})}(),function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=b.Hasher,e=a.algo,f=[],g=e.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)f[j]=0|a[b+j];else{var k=f[j-3]^f[j-8]^f[j-14]^f[j-16];f[j]=k<<1|k>>>31}var l=(d<<5|d>>>27)+i+f[j];l+=20>j?(e&g|~e&h)+1518500249:40>j?(e^g^h)+1859775393:60>j?(e&g|e&h|g&h)-1894007588:(e^g^h)-899497514,i=h,h=g,g=e<<30|e>>>2,e=d,d=l}c[0]=0|c[0]+d,c[1]=0|c[1]+e,c[2]=0|c[2]+g,c[3]=0|c[3]+h,c[4]=0|c[4]+i},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(g),a.HmacSHA1=d._createHmacHelper(g)}();

(function (za, N, l) {
    var M = function (g) {
        function S(a) { var b, c, d = {}; g.each(a, function (e) { if ((b = e.match(/^([^A-Z]+?)([A-Z])/)) && -1 !== "a aa ai ao as b fn i m o s ".indexOf(b[1] + " ")) c = e.replace(b[0], b[2].toLowerCase()), d[c] = e, "o" === b[1] && S(a[e]) }); a._hungarianMap = d } function G(a, b, c) { a._hungarianMap || S(a); var d; g.each(b, function (e) { d = a._hungarianMap[e]; if (d !== l && (c || b[d] === l)) "o" === d.charAt(0) ? (b[d] || (b[d] = {}), g.extend(!0, b[d], b[e]), G(a[d], b[d], c)) : b[d] = b[e] }) } function M(a) {
            var b = p.defaults.oLanguage, c = a.sZeroRecords;
            !a.sEmptyTable && (c && "No data available in table" === b.sEmptyTable) && D(a, a, "sZeroRecords", "sEmptyTable"); !a.sLoadingRecords && (c && "Loading..." === b.sLoadingRecords) && D(a, a, "sZeroRecords", "sLoadingRecords"); a.sInfoThousands && (a.sThousands = a.sInfoThousands); (a = a.sDecimal) && bb(a)
        } function cb(a) {
            w(a, "ordering", "bSort"); w(a, "orderMulti", "bSortMulti"); w(a, "orderClasses", "bSortClasses"); w(a, "orderCellsTop", "bSortCellsTop"); w(a, "order", "aaSorting"); w(a, "orderFixed", "aaSortingFixed"); w(a, "paging", "bPaginate");
            w(a, "pagingType", "sPaginationType"); w(a, "pageLength", "iDisplayLength"); w(a, "searching", "bFilter")
        } function db(a) { w(a, "orderable", "bSortable"); w(a, "orderData", "aDataSort"); w(a, "orderSequence", "asSorting"); w(a, "orderDataType", "sortDataType") } function eb(a) {
            var a = a.oBrowser, b = g("<div/>").css({ position: "absolute", top: 0, left: 0, height: 1, width: 1, overflow: "hidden" }).append(g("<div/>").css({ position: "absolute", top: 1, left: 1, width: 100, overflow: "scroll" }).append(g('<div class="test"/>').css({ width: "100%", height: 10 }))).appendTo("body"),
            c = b.find(".test"); a.bScrollOversize = 100 === c[0].offsetWidth; a.bScrollbarLeft = 1 !== c.offset().left; b.remove()
        } function fb(a, b, c, d, e, f) { var h, i = !1; c !== l && (h = c, i = !0); for (; d !== e;) a.hasOwnProperty(d) && (h = i ? b(h, a[d], d, a) : a[d], i = !0, d += f); return h } function Aa(a, b) {
            var c = p.defaults.column, d = a.aoColumns.length, c = g.extend({}, p.models.oColumn, c, { nTh: b ? b : N.createElement("th"), sTitle: c.sTitle ? c.sTitle : b ? b.innerHTML : "", aDataSort: c.aDataSort ? c.aDataSort : [d], mData: c.mData ? c.mData : d, idx: d }); a.aoColumns.push(c); c = a.aoPreSearchCols;
            c[d] = g.extend({}, p.models.oSearch, c[d]); fa(a, d, null)
        } function fa(a, b, c) {
            var d = a.aoColumns[b], b = a.oClasses, e = g(d.nTh); if (!d.sWidthOrig) { d.sWidthOrig = e.attr("width") || null; var f = (e.attr("style") || "").match(/width:\s*(\d+[pxem%])/); f && (d.sWidthOrig = f[1]) } c !== l && null !== c && (db(c), G(p.defaults.column, c), c.mDataProp !== l && !c.mData && (c.mData = c.mDataProp), c.sType && (d._sManualType = c.sType), c.className && !c.sClass && (c.sClass = c.className), g.extend(d, c), D(d, c, "sWidth", "sWidthOrig"), "number" === typeof c.iDataSort &&
            (d.aDataSort = [c.iDataSort]), D(d, c, "aDataSort")); var c = d.mData, h = T(c), i = d.mRender ? T(d.mRender) : null, f = function (a) { return "string" === typeof a && -1 !== a.indexOf("@") }; d._bAttrSrc = g.isPlainObject(c) && (f(c.sort) || f(c.type) || f(c.filter)); d.fnGetData = function (a, b) { var c = h(a, b); return d.mRender && b && "" !== b ? i(c, b, a) : c }; d.fnSetData = Ba(c); a.oFeatures.bSort || (d.bSortable = !1, e.addClass(b.sSortableNone)); a = -1 !== g.inArray("asc", d.asSorting); e = -1 !== g.inArray("desc", d.asSorting); !d.bSortable || !a && !e ? (d.sSortingClass =
            b.sSortableNone, d.sSortingClassJUI = "") : a && !e ? (d.sSortingClass = b.sSortableAsc, d.sSortingClassJUI = b.sSortJUIAscAllowed) : !a && e ? (d.sSortingClass = b.sSortableDesc, d.sSortingClassJUI = b.sSortJUIDescAllowed) : (d.sSortingClass = b.sSortable, d.sSortingClassJUI = b.sSortJUI)
        } function U(a) { if (!1 !== a.oFeatures.bAutoWidth) { var b = a.aoColumns; Ca(a); for (var c = 0, d = b.length; c < d; c++) b[c].nTh.style.width = b[c].sWidth } b = a.oScroll; ("" !== b.sY || "" !== b.sX) && V(a); t(a, null, "column-sizing", [a]) } function ga(a, b) {
            var c = W(a, "bVisible");
            return "number" === typeof c[b] ? c[b] : null
        } function X(a, b) { var c = W(a, "bVisible"), c = g.inArray(b, c); return -1 !== c ? c : null } function Y(a) { return W(a, "bVisible").length } function W(a, b) { var c = []; g.map(a.aoColumns, function (a, e) { a[b] && c.push(e) }); return c } function Da(a) {
            var b = a.aoColumns, c = a.aoData, d = p.ext.type.detect, e, f, h, i, j, g, m, o, k; e = 0; for (f = b.length; e < f; e++) if (m = b[e], k = [], !m.sType && m._sManualType) m.sType = m._sManualType; else if (!m.sType) {
                h = 0; for (i = d.length; h < i; h++) {
                    j = 0; for (g = c.length; j < g && !(k[j] === l && (k[j] =
                    A(a, j, e, "type")), o = d[h](k[j], a), !o || "html" === o) ; j++); if (o) { m.sType = o; break }
                } m.sType || (m.sType = "string")
            }
        } function gb(a, b, c, d) {
            var e, f, h, i, j, n, m = a.aoColumns; if (b) for (e = b.length - 1; 0 <= e; e--) {
                n = b[e]; var o = n.targets !== l ? n.targets : n.aTargets; g.isArray(o) || (o = [o]); f = 0; for (h = o.length; f < h; f++) if ("number" === typeof o[f] && 0 <= o[f]) { for (; m.length <= o[f];) Aa(a); d(o[f], n) } else if ("number" === typeof o[f] && 0 > o[f]) d(m.length + o[f], n); else if ("string" === typeof o[f]) {
                    i = 0; for (j = m.length; i < j; i++) ("_all" == o[f] || g(m[i].nTh).hasClass(o[f])) &&
                    d(i, n)
                }
            } if (c) { e = 0; for (a = c.length; e < a; e++) d(e, c[e]) }
        } function H(a, b, c, d) { var e = a.aoData.length, f = g.extend(!0, {}, p.models.oRow, { src: c ? "dom" : "data" }); f._aData = b; a.aoData.push(f); for (var b = a.aoColumns, f = 0, h = b.length; f < h; f++) c && Ea(a, e, f, A(a, e, f)), b[f].sType = null; a.aiDisplayMaster.push(e); a.oFeatures.bDeferRender || Fa(a, e, c, d); return e } function ha(a, b) { var c; b instanceof g || (b = g(b)); return b.map(function (b, e) { c = ia(a, e); return H(a, c.data, e, c.cells) }) } function A(a, b, c, d) {
            var c = a.aoColumns[c], e = a.aoData[b]._aData,
            f = c.fnGetData(e, d); if (f === l) return a.iDrawError != a.iDraw && null === c.sDefaultContent && (O(a, 0, "Requested unknown parameter " + ("function" == typeof c.mData ? "{function}" : "'" + c.mData + "'") + " for row " + b, 4), a.iDrawError = a.iDraw), c.sDefaultContent; if ((f === e || null === f) && null !== c.sDefaultContent) f = c.sDefaultContent; else if ("function" === typeof f) return f(); return null === f && "display" == d ? "" : f
        } function Ea(a, b, c, d) { a.aoColumns[c].fnSetData(a.aoData[b]._aData, d) } function Ga(a) {
            return g.map(a.match(/(\\.|[^\.])+/g),
            function (a) { return a.replace("\\.", ".") })
        } function T(a) {
            if (g.isPlainObject(a)) { var b = {}; g.each(a, function (a, c) { c && (b[a] = T(c)) }); return function (a, c, f) { var h = b[c] || b._; return h !== l ? h(a, c, f) : a } } if (null === a) return function (a) { return a }; if ("function" === typeof a) return function (b, c, f) { return a(b, c, f) }; if ("string" === typeof a && (-1 !== a.indexOf(".") || -1 !== a.indexOf("[") || -1 !== a.indexOf("("))) {
                var c = function (a, b, f) {
                    var h, i; if ("" !== f) {
                        i = Ga(f); for (var j = 0, g = i.length; j < g; j++) {
                            f = i[j].match(Z); h = i[j].match(P); if (f) {
                                i[j] =
                                i[j].replace(Z, ""); "" !== i[j] && (a = a[i[j]]); h = []; i.splice(0, j + 1); i = i.join("."); j = 0; for (g = a.length; j < g; j++) h.push(c(a[j], b, i)); a = f[0].substring(1, f[0].length - 1); a = "" === a ? h : h.join(a); break
                            } else if (h) { i[j] = i[j].replace(P, ""); a = a[i[j]](); continue } if (null === a || a[i[j]] === l) return l; a = a[i[j]]
                        }
                    } return a
                }; return function (b, e) { return c(b, e, a) }
            } return function (b) { return b[a] }
        } function Ba(a) {
            if (g.isPlainObject(a)) return Ba(a._); if (null === a) return function () { }; if ("function" === typeof a) return function (b, d) {
                a(b, "set",
                d)
            }; if ("string" === typeof a && (-1 !== a.indexOf(".") || -1 !== a.indexOf("[") || -1 !== a.indexOf("("))) {
                var b = function (a, d, e) {
                    var e = Ga(e), f; f = e[e.length - 1]; for (var h, i, j = 0, g = e.length - 1; j < g; j++) { h = e[j].match(Z); i = e[j].match(P); if (h) { e[j] = e[j].replace(Z, ""); a[e[j]] = []; f = e.slice(); f.splice(0, j + 1); h = f.join("."); i = 0; for (g = d.length; i < g; i++) f = {}, b(f, d[i], h), a[e[j]].push(f); return } i && (e[j] = e[j].replace(P, ""), a = a[e[j]](d)); if (null === a[e[j]] || a[e[j]] === l) a[e[j]] = {}; a = a[e[j]] } if (f.match(P)) a[f.replace(P, "")](d); else a[f.replace(Z,
                    "")] = d
                }; return function (c, d) { return b(c, d, a) }
            } return function (b, d) { b[a] = d }
        } function Ha(a) { return B(a.aoData, "_aData") } function ja(a) { a.aoData.length = 0; a.aiDisplayMaster.length = 0; a.aiDisplay.length = 0 } function ka(a, b, c) { for (var d = -1, e = 0, f = a.length; e < f; e++) a[e] == b ? d = e : a[e] > b && a[e]--; -1 != d && c === l && a.splice(d, 1) } function la(a, b, c, d) {
            var e = a.aoData[b], f; if ("dom" === c || (!c || "auto" === c) && "dom" === e.src) e._aData = ia(a, e).data; else { var h = e.anCells; if (h) { c = 0; for (f = h.length; c < f; c++) h[c].innerHTML = A(a, b, c, "display") } } e._aSortData =
            null; e._aFilterData = null; a = a.aoColumns; if (d !== l) a[d].sType = null; else { c = 0; for (f = a.length; c < f; c++) a[c].sType = null } Ia(e)
        } function ia(a, b) {
            var c = [], d = [], e = b.firstChild, f, h, i, j = 0, n, m = a.aoColumns, o = function (a, b, c) { "string" === typeof a && (b = a.indexOf("@"), -1 !== b && (a = a.substring(b + 1), i["@" + a] = c.getAttribute(a))) }, k = function (a) { h = m[j]; n = g.trim(a.innerHTML); h && h._bAttrSrc ? (i = { display: n }, o(h.mData.sort, i, a), o(h.mData.type, i, a), o(h.mData.filter, i, a), c.push(i)) : c.push(n); d.push(a); j++ }; if (e) for (; e;) f = e.nodeName.toUpperCase(),
            ("TD" == f || "TH" == f) && k(e), e = e.nextSibling; else { d = b.anCells; e = 0; for (f = d.length; e < f; e++) k(d[e]) } return { data: c, cells: d }
        } function Fa(a, b, c, d) {
            var e = a.aoData[b], f = e._aData, h = [], i, j, g, m, o; if (null === e.nTr) {
                i = c || N.createElement("tr"); e.nTr = i; e.anCells = h; i._DT_RowIndex = b; Ia(e); m = 0; for (o = a.aoColumns.length; m < o; m++) {
                    g = a.aoColumns[m]; j = c ? d[m] : N.createElement(g.sCellType); h.push(j); if (!c || g.mRender || g.mData !== m) j.innerHTML = A(a, b, m, "display"); g.sClass && (j.className += " " + g.sClass); g.bVisible && !c ? i.appendChild(j) :
                    !g.bVisible && c && j.parentNode.removeChild(j); g.fnCreatedCell && g.fnCreatedCell.call(a.oInstance, j, A(a, b, m, "display"), f, b, m)
                } t(a, "aoRowCreatedCallback", null, [i, f, b])
            } e.nTr.setAttribute("role", "row")
        } function Ia(a) { var b = a.nTr, c = a._aData; if (b) { c.DT_RowId && (b.id = c.DT_RowId); if (c.DT_RowClass) { var d = c.DT_RowClass.split(" "); a.__rowc = a.__rowc ? Ja(a.__rowc.concat(d)) : d; g(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass) } c.DT_RowData && g(b).data(c.DT_RowData) } } function hb(a) {
            var b, c, d, e, f, h = a.nTHead,
            i = a.nTFoot, j = 0 === g("th, td", h).length, n = a.oClasses, m = a.aoColumns; j && (e = g("<tr/>").appendTo(h)); b = 0; for (c = m.length; b < c; b++) f = m[b], d = g(f.nTh).addClass(f.sClass), j && d.appendTo(e), a.oFeatures.bSort && (d.addClass(f.sSortingClass), !1 !== f.bSortable && (d.attr("tabindex", a.iTabIndex).attr("aria-controls", a.sTableId), Ka(a, f.nTh, b))), f.sTitle != d.html() && d.html(f.sTitle), La(a, "header")(a, d, f, n); j && $(a.aoHeader, h); g(h).find(">tr").attr("role", "row"); g(h).find(">tr>th, >tr>td").addClass(n.sHeaderTH); g(i).find(">tr>th, >tr>td").addClass(n.sFooterTH);
            if (null !== i) { a = a.aoFooter[0]; b = 0; for (c = a.length; b < c; b++) f = m[b], f.nTf = a[b].cell, f.sClass && g(f.nTf).addClass(f.sClass) }
        } function I(a, b, c) {
            var d, e, f, h = [], i = [], j = a.aoColumns.length, n; if (b) {
                c === l && (c = !1); d = 0; for (e = b.length; d < e; d++) { h[d] = b[d].slice(); h[d].nTr = b[d].nTr; for (f = j - 1; 0 <= f; f--) !a.aoColumns[f].bVisible && !c && h[d].splice(f, 1); i.push([]) } d = 0; for (e = h.length; d < e; d++) {
                    if (a = h[d].nTr) for (; f = a.firstChild;) a.removeChild(f); f = 0; for (b = h[d].length; f < b; f++) if (n = j = 1, i[d][f] === l) {
                        a.appendChild(h[d][f].cell); for (i[d][f] =
                        1; h[d + j] !== l && h[d][f].cell == h[d + j][f].cell;) i[d + j][f] = 1, j++; for (; h[d][f + n] !== l && h[d][f].cell == h[d][f + n].cell;) { for (c = 0; c < j; c++) i[d + c][f + n] = 1; n++ } g(h[d][f].cell).attr("rowspan", j).attr("colspan", n)
                    }
                }
            }
        } function J(a) {
            var b = t(a, "aoPreDrawCallback", "preDraw", [a]); if (-1 !== g.inArray(!1, b)) C(a, !1); else {
                var b = [], c = 0, d = a.asStripeClasses, e = d.length, f = a.oLanguage, h = a.iInitDisplayStart, i = "ssp" == z(a), j = a.aiDisplay; a.bDrawing = !0; h !== l && -1 !== h && (a._iDisplayStart = i ? h : h >= a.fnRecordsDisplay() ? 0 : h, a.iInitDisplayStart =
                -1); var h = a._iDisplayStart, n = a.fnDisplayEnd(); if (a.bDeferLoading) a.bDeferLoading = !1, a.iDraw++, C(a, !1); else if (i) { if (!a.bDestroying && !ib(a)) return } else a.iDraw++; if (0 !== j.length) { f = i ? a.aoData.length : n; for (i = i ? 0 : h; i < f; i++) { var m = j[i], o = a.aoData[m]; null === o.nTr && Fa(a, m); m = o.nTr; if (0 !== e) { var k = d[c % e]; o._sRowStripe != k && (g(m).removeClass(o._sRowStripe).addClass(k), o._sRowStripe = k) } t(a, "aoRowCallback", null, [m, o._aData, c, i]); b.push(m); c++ } } else c = f.sZeroRecords, 1 == a.iDraw && "ajax" == z(a) ? c = f.sLoadingRecords :
                f.sEmptyTable && 0 === a.fnRecordsTotal() && (c = f.sEmptyTable), b[0] = g("<tr/>", { "class": e ? d[0] : "" }).append(g("<td />", { valign: "top", colSpan: Y(a), "class": a.oClasses.sRowEmpty }).html(c))[0]; t(a, "aoHeaderCallback", "header", [g(a.nTHead).children("tr")[0], Ha(a), h, n, j]); t(a, "aoFooterCallback", "footer", [g(a.nTFoot).children("tr")[0], Ha(a), h, n, j]); d = g(a.nTBody); d.children().detach(); d.append(g(b)); t(a, "aoDrawCallback", "draw", [a]); a.bSorted = !1; a.bFiltered = !1; a.bDrawing = !1
            }
        } function K(a, b) {
            var c = a.oFeatures, d = c.bFilter;
            c.bSort && jb(a); d ? aa(a, a.oPreviousSearch) : a.aiDisplay = a.aiDisplayMaster.slice(); !0 !== b && (a._iDisplayStart = 0); J(a)
        } function kb(a) {
            var b = a.oClasses, c = g(a.nTable), c = g("<div/>").insertBefore(c), d = a.oFeatures, e = g("<div/>", { id: a.sTableId + "_wrapper", "class": b.sWrapper + (a.nTFoot ? "" : " " + b.sNoFooter) }); a.nHolding = c[0]; a.nTableWrapper = e[0]; a.nTableReinsertBefore = a.nTable.nextSibling; for (var f = a.sDom.split(""), h, i, j, n, m, o, k = 0; k < f.length; k++) {
                h = null; i = f[k]; if ("<" == i) {
                    j = g("<div/>")[0]; n = f[k + 1]; if ("'" == n || '"' == n) {
                        m =
                        ""; for (o = 2; f[k + o] != n;) m += f[k + o], o++; "H" == m ? m = b.sJUIHeader : "F" == m && (m = b.sJUIFooter); -1 != m.indexOf(".") ? (n = m.split("."), j.id = n[0].substr(1, n[0].length - 1), j.className = n[1]) : "#" == m.charAt(0) ? j.id = m.substr(1, m.length - 1) : j.className = m; k += o
                    } e.append(j); e = g(j)
                } else if (">" == i) e = e.parent(); else if ("l" == i && d.bPaginate && d.bLengthChange) h = lb(a); else if ("f" == i && d.bFilter) h = mb(a); else if ("r" == i && d.bProcessing) h = nb(a); else if ("t" == i) h = ob(a); else if ("i" == i && d.bInfo) h = pb(a); else if ("p" == i && d.bPaginate) h = qb(a); else if (0 !==
                p.ext.feature.length) { j = p.ext.feature; o = 0; for (n = j.length; o < n; o++) if (i == j[o].cFeature) { h = j[o].fnInit(a); break } } h && (j = a.aanFeatures, j[i] || (j[i] = []), j[i].push(h), e.append(h))
            } c.replaceWith(e)
        } function $(a, b) {
            var c = g(b).children("tr"), d, e, f, h, i, j, n, m, o, k; a.splice(0, a.length); f = 0; for (j = c.length; f < j; f++) a.push([]); f = 0; for (j = c.length; f < j; f++) {
                d = c[f]; for (e = d.firstChild; e;) {
                    if ("TD" == e.nodeName.toUpperCase() || "TH" == e.nodeName.toUpperCase()) {
                        m = 1 * e.getAttribute("colspan"); o = 1 * e.getAttribute("rowspan"); m = !m ||
                        0 === m || 1 === m ? 1 : m; o = !o || 0 === o || 1 === o ? 1 : o; h = 0; for (i = a[f]; i[h];) h++; n = h; k = 1 === m ? !0 : !1; for (i = 0; i < m; i++) for (h = 0; h < o; h++) a[f + h][n + i] = { cell: e, unique: k }, a[f + h].nTr = d
                    } e = e.nextSibling
                }
            }
        } function ma(a, b, c) { var d = []; c || (c = a.aoHeader, b && (c = [], $(c, b))); for (var b = 0, e = c.length; b < e; b++) for (var f = 0, h = c[b].length; f < h; f++) if (c[b][f].unique && (!d[f] || !a.bSortCellsTop)) d[f] = c[b][f].cell; return d } function na(a, b, c) {
            t(a, "aoServerParams", "serverParams", [b]); if (b && g.isArray(b)) {
                var d = {}, e = /(.*?)\[\]$/; g.each(b, function (a, b) {
                    var c =
                    b.name.match(e); c ? (c = c[0], d[c] || (d[c] = []), d[c].push(b.value)) : d[b.name] = b.value
                }); b = d
            } var f, h = a.ajax, i = a.oInstance; if (g.isPlainObject(h) && h.data) { f = h.data; var j = g.isFunction(f) ? f(b) : f, b = g.isFunction(f) && j ? j : g.extend(!0, b, j); delete h.data } j = {
                data: b, success: function (b) { var d = b.error || b.sError; d && a.oApi._fnLog(a, 0, d); a.json = b; t(a, null, "xhr", [a, b]); c(b) }, dataType: "json", cache: !1, type: a.sServerMethod, error: function (b, c) {
                    var d = a.oApi._fnLog; "parsererror" == c ? d(a, 0, "Invalid JSON response", 1) : 4 === b.readyState &&
                    d(a, 0, "Ajax error", 7); C(a, !1)
                }
            }; a.oAjaxData = b; t(a, null, "preXhr", [a, b]); a.fnServerData ? a.fnServerData.call(i, a.sAjaxSource, g.map(b, function (a, b) { return { name: b, value: a } }), c, a) : a.sAjaxSource || "string" === typeof h ? a.jqXHR = g.ajax(g.extend(j, { url: h || a.sAjaxSource })) : g.isFunction(h) ? a.jqXHR = h.call(i, b, c, a) : (a.jqXHR = g.ajax(g.extend(j, h)), h.data = f)
        } function ib(a) { if (a.bAjaxDataGet) { a.iDraw++; C(a, !0); var b = rb(a); na(a, b, function (b) { sb(a, b) }, a); return !1 } return !0 } function rb(a) {
            var b = a.aoColumns, c = b.length, d = a.oFeatures,
            e = a.oPreviousSearch, f = a.aoPreSearchCols, h, i = [], j, n, m, o = Q(a); h = a._iDisplayStart; j = !1 !== d.bPaginate ? a._iDisplayLength : -1; var k = function (a, b) { i.push({ name: a, value: b }) }; k("sEcho", a.iDraw); k("iColumns", c); k("sColumns", B(b, "sName").join(",")); k("iDisplayStart", h); k("iDisplayLength", j); var l = { draw: a.iDraw, columns: [], order: [], start: h, length: j, search: { value: e.sSearch, regex: e.bRegex } }; for (h = 0; h < c; h++) n = b[h], m = f[h], j = "function" == typeof n.mData ? "function" : n.mData, l.columns.push({
                data: j, name: n.sName, searchable: n.bSearchable,
                orderable: n.bSortable, search: { value: m.sSearch, regex: m.bRegex }
            }), k("mDataProp_" + h, j), d.bFilter && (k("sSearch_" + h, m.sSearch), k("bRegex_" + h, m.bRegex), k("bSearchable_" + h, n.bSearchable)), d.bSort && k("bSortable_" + h, n.bSortable); d.bFilter && (k("sSearch", e.sSearch), k("bRegex", e.bRegex)); d.bSort && (g.each(o, function (a, b) { l.order.push({ column: b.col, dir: b.dir }); k("iSortCol_" + a, b.col); k("sSortDir_" + a, b.dir) }), k("iSortingCols", o.length)); b = p.ext.legacy.ajax; return null === b ? a.sAjaxSource ? i : l : b ? i : l
        } function sb(a, b) {
            var c =
            b.sEcho !== l ? b.sEcho : b.draw, d = b.iTotalRecords !== l ? b.iTotalRecords : b.recordsTotal, e = b.iTotalDisplayRecords !== l ? b.iTotalDisplayRecords : b.recordsFiltered; if (c) { if (1 * c < a.iDraw) return; a.iDraw = 1 * c } ja(a); a._iRecordsTotal = parseInt(d, 10); a._iRecordsDisplay = parseInt(e, 10); c = oa(a, b); d = 0; for (e = c.length; d < e; d++) H(a, c[d]); a.aiDisplay = a.aiDisplayMaster.slice(); a.bAjaxDataGet = !1; J(a); a._bInitComplete || pa(a, b); a.bAjaxDataGet = !0; C(a, !1)
        } function oa(a, b) {
            var c = g.isPlainObject(a.ajax) && a.ajax.dataSrc !== l ? a.ajax.dataSrc :
            a.sAjaxDataProp; return "data" === c ? b.aaData || b[c] : "" !== c ? T(c)(b) : b
        } function mb(a) {
            var b = a.oClasses, c = a.sTableId, d = a.oPreviousSearch, e = a.aanFeatures, f = '<input type="search" class="' + b.sFilterInput + '"/>', h = a.oLanguage.sSearch, h = h.match(/_INPUT_/) ? h.replace("_INPUT_", f) : h + f, b = g("<div/>", { id: !e.f ? c + "_filter" : null, "class": b.sFilter }).append(g("<label/>").append(h)), e = function () {
                var b = !this.value ? "" : this.value; b != d.sSearch && (aa(a, { sSearch: b, bRegex: d.bRegex, bSmart: d.bSmart, bCaseInsensitive: d.bCaseInsensitive }),
                a._iDisplayStart = 0, J(a))
            }, i = g("input", b).val(d.sSearch.replace('"', "&quot;")).bind("keyup.DT search.DT input.DT paste.DT cut.DT", "ssp" === z(a) ? Ma(e, 400) : e).bind("keypress.DT", function (a) { if (13 == a.keyCode) return !1 }).attr("aria-controls", c); g(a.nTable).on("filter.DT", function () { try { i[0] !== N.activeElement && i.val(d.sSearch) } catch (a) { } }); return b[0]
        } function aa(a, b, c) {
            var d = a.oPreviousSearch, e = a.aoPreSearchCols, f = function (a) { d.sSearch = a.sSearch; d.bRegex = a.bRegex; d.bSmart = a.bSmart; d.bCaseInsensitive = a.bCaseInsensitive };
            Da(a); if ("ssp" != z(a)) { tb(a, b.sSearch, c, b.bEscapeRegex !== l ? !b.bEscapeRegex : b.bRegex, b.bSmart, b.bCaseInsensitive); f(b); for (b = 0; b < e.length; b++) ub(a, e[b].sSearch, b, e[b].bEscapeRegex !== l ? !e[b].bEscapeRegex : e[b].bRegex, e[b].bSmart, e[b].bCaseInsensitive); vb(a) } else f(b); a.bFiltered = !0; t(a, null, "search", [a])
        } function vb(a) { for (var b = p.ext.search, c = a.aiDisplay, d, e, f = 0, h = b.length; f < h; f++) for (var i = c.length - 1; 0 <= i; i--) e = c[i], d = a.aoData[e], b[f](a, d._aFilterData, e, d._aData) || c.splice(i, 1) } function ub(a, b, c, d,
        e, f) { if ("" !== b) for (var h = a.aiDisplay, d = Na(b, d, e, f), e = h.length - 1; 0 <= e; e--) b = a.aoData[h[e]]._aFilterData[c], d.test(b) || h.splice(e, 1) } function tb(a, b, c, d, e, f) { var d = Na(b, d, e, f), e = a.oPreviousSearch.sSearch, f = a.aiDisplayMaster, h; 0 !== p.ext.search.length && (c = !0); h = wb(a); if (0 >= b.length) a.aiDisplay = f.slice(); else { if (h || c || e.length > b.length || 0 !== b.indexOf(e) || a.bSorted) a.aiDisplay = f.slice(); b = a.aiDisplay; for (c = b.length - 1; 0 <= c; c--) d.test(a.aoData[b[c]]._sFilterRow) || b.splice(c, 1) } } function Na(a, b, c, d) {
            a = b ? a :
            Oa(a); c && (a = "^(?=.*?" + g.map(a.match(/"[^"]+"|[^ ]+/g) || "", function (a) { return '"' === a.charAt(0) ? a.match(/^"(.*)"$/)[1] : a }).join(")(?=.*?") + ").*$"); return RegExp(a, d ? "i" : "")
        } function Oa(a) { return a.replace(Sb, "\\$1") } function wb(a) {
            var b = a.aoColumns, c, d, e, f, h, i, j, g, m = p.ext.type.search; c = !1; d = 0; for (f = a.aoData.length; d < f; d++) if (g = a.aoData[d], !g._aFilterData) {
                i = []; e = 0; for (h = b.length; e < h; e++) c = b[e], c.bSearchable ? (j = A(a, d, e, "filter"), j = m[c.sType] ? m[c.sType](j) : null !== j ? j : "") : j = "", j.indexOf && -1 !== j.indexOf("&") &&
                (qa.innerHTML = j, j = Tb ? qa.textContent : qa.innerText), j.replace && (j = j.replace(/[\r\n]/g, "")), i.push(j); g._aFilterData = i; g._sFilterRow = i.join("  "); c = !0
            } return c
        } function pb(a) { var b = a.sTableId, c = a.aanFeatures.i, d = g("<div/>", { "class": a.oClasses.sInfo, id: !c ? b + "_info" : null }); c || (a.aoDrawCallback.push({ fn: xb, sName: "information" }), d.attr("role", "status").attr("aria-live", "polite"), g(a.nTable).attr("aria-describedby", b + "_info")); return d[0] } function xb(a) {
            var b = a.aanFeatures.i; if (0 !== b.length) {
                var c = a.oLanguage,
                d = a._iDisplayStart + 1, e = a.fnDisplayEnd(), f = a.fnRecordsTotal(), h = a.fnRecordsDisplay(), i = h ? c.sInfo : c.sInfoEmpty; h !== f && (i += " " + c.sInfoFiltered); i += c.sInfoPostFix; i = yb(a, i); c = c.fnInfoCallback; null !== c && (i = c.call(a.oInstance, a, d, e, f, h, i)); g(b).html(i)
            }
        } function yb(a, b) {
            var c = a.fnFormatNumber, d = a._iDisplayStart + 1, e = a._iDisplayLength, f = a.fnRecordsDisplay(), h = -1 === e; return b.replace(/_START_/g, c.call(a, d)).replace(/_END_/g, c.call(a, a.fnDisplayEnd())).replace(/_MAX_/g, c.call(a, a.fnRecordsTotal())).replace(/_TOTAL_/g,
            c.call(a, f)).replace(/_PAGE_/g, c.call(a, h ? 1 : Math.ceil(d / e))).replace(/_PAGES_/g, c.call(a, h ? 1 : Math.ceil(f / e)))
        } function ra(a) {
            var b, c, d = a.iInitDisplayStart, e = a.aoColumns, f; c = a.oFeatures; if (a.bInitialised) {
                kb(a); hb(a); I(a, a.aoHeader); I(a, a.aoFooter); C(a, !0); c.bAutoWidth && Ca(a); b = 0; for (c = e.length; b < c; b++) f = e[b], f.sWidth && (f.nTh.style.width = s(f.sWidth)); K(a); e = z(a); "ssp" != e && ("ajax" == e ? na(a, [], function (c) { var f = oa(a, c); for (b = 0; b < f.length; b++) H(a, f[b]); a.iInitDisplayStart = d; K(a); C(a, !1); pa(a, c) }, a) : (C(a,
                !1), pa(a)))
            } else setTimeout(function () { ra(a) }, 200)
        } function pa(a, b) { a._bInitComplete = !0; b && U(a); t(a, "aoInitComplete", "init", [a, b]) } function Pa(a, b) { var c = parseInt(b, 10); a._iDisplayLength = c; Qa(a); t(a, null, "length", [a, c]) } function lb(a) {
            for (var b = a.oClasses, c = a.sTableId, d = a.aLengthMenu, e = g.isArray(d[0]), f = e ? d[0] : d, e = e ? d[1] : d, d = g("<select/>", { name: c + "_length", "aria-controls": c, "class": b.sLengthSelect }), h = 0, i = f.length; h < i; h++) d[0][h] = new Option(e[h], f[h]); var j = g("<div><label/></div>").addClass(b.sLength);
            a.aanFeatures.l || (j[0].id = c + "_length"); b = a.oLanguage.sLengthMenu.split(/(_MENU_)/); j.children().append(1 < b.length ? [b[0], d, b[2]] : b[0]); g("select", j).val(a._iDisplayLength).bind("change.DT", function () { Pa(a, g(this).val()); J(a) }); g(a.nTable).bind("length.dt.DT", function (a, b, c) { g("select", j).val(c) }); return j[0]
        } function qb(a) {
            var b = a.sPaginationType, c = p.ext.pager[b], d = "function" === typeof c, e = function (a) { J(a) }, b = g("<div/>").addClass(a.oClasses.sPaging + b)[0], f = a.aanFeatures; d || c.fnInit(a, b, e); f.p || (b.id =
            a.sTableId + "_paginate", a.aoDrawCallback.push({ fn: function (a) { if (d) { var b = a._iDisplayStart, j = a._iDisplayLength, g = a.fnRecordsDisplay(), m = -1 === j, b = m ? 0 : Math.ceil(b / j), j = m ? 1 : Math.ceil(g / j), g = c(b, j), o, m = 0; for (o = f.p.length; m < o; m++) La(a, "pageButton")(a, f.p[m], m, g, b, j) } else c.fnUpdate(a, e) }, sName: "pagination" })); return b
        } function Ra(a, b, c) {
            var d = a._iDisplayStart, e = a._iDisplayLength, f = a.fnRecordsDisplay(); 0 === f || -1 === e ? d = 0 : "number" === typeof b ? (d = b * e, d > f && (d = 0)) : "first" == b ? d = 0 : "previous" == b ? (d = 0 <= e ? d - e : 0, 0 >
            d && (d = 0)) : "next" == b ? d + e < f && (d += e) : "last" == b ? d = Math.floor((f - 1) / e) * e : O(a, 0, "Unknown paging action: " + b, 5); b = a._iDisplayStart !== d; a._iDisplayStart = d; b && (t(a, null, "page", [a]), c && J(a)); return b
        } function nb(a) { return g("<div/>", { id: !a.aanFeatures.r ? a.sTableId + "_processing" : null, "class": a.oClasses.sProcessing }).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0] } function C(a, b) { a.oFeatures.bProcessing && g(a.aanFeatures.r).css("display", b ? "block" : "none"); t(a, null, "processing", [a, b]) } function ob(a) {
            var b =
            g(a.nTable); b.attr("role", "grid"); var c = a.oScroll; if ("" === c.sX && "" === c.sY) return a.nTable; var d = c.sX, e = c.sY, f = a.oClasses, h = b.children("caption"), i = h.length ? h[0]._captionSide : null, j = g(b[0].cloneNode(!1)), n = g(b[0].cloneNode(!1)), m = b.children("tfoot"); c.sX && "100%" === b.attr("width") && b.removeAttr("width"); m.length || (m = null); c = g("<div/>", { "class": f.sScrollWrapper }).append(g("<div/>", { "class": f.sScrollHead }).css({ overflow: "hidden", position: "relative", border: 0, width: d ? !d ? null : s(d) : "100%" }).append(g("<div/>",
            { "class": f.sScrollHeadInner }).css({ "box-sizing": "content-box", width: c.sXInner || "100%" }).append(j.removeAttr("id").css("margin-left", 0).append(b.children("thead")))).append("top" === i ? h : null)).append(g("<div/>", { "class": f.sScrollBody }).css({ overflow: "auto", height: !e ? null : s(e), width: !d ? null : s(d) }).append(b)); m && c.append(g("<div/>", { "class": f.sScrollFoot }).css({ overflow: "hidden", border: 0, width: d ? !d ? null : s(d) : "100%" }).append(g("<div/>", { "class": f.sScrollFootInner }).append(n.removeAttr("id").css("margin-left",
            0).append(b.children("tfoot")))).append("bottom" === i ? h : null)); var b = c.children(), o = b[0], f = b[1], k = m ? b[2] : null; d && g(f).scroll(function () { var a = this.scrollLeft; o.scrollLeft = a; m && (k.scrollLeft = a) }); a.nScrollHead = o; a.nScrollBody = f; a.nScrollFoot = k; a.aoDrawCallback.push({ fn: V, sName: "scrolling" }); return c[0]
        } function V(a) {
            var b = a.oScroll, c = b.sX, d = b.sXInner, e = b.sY, f = b.iBarWidth, h = g(a.nScrollHead), i = h[0].style, j = h.children("div"), n = j[0].style, m = j.children("table"), j = a.nScrollBody, o = g(j), k = j.style, l = g(a.nScrollFoot).children("div"),
            p = l.children("table"), r = g(a.nTHead), q = g(a.nTable), ba = q[0], L = ba.style, t = a.nTFoot ? g(a.nTFoot) : null, ca = a.oBrowser, v = ca.bScrollOversize, x, u, y, w, z, A = [], B = [], C = [], D, E = function (a) { a = a.style; a.paddingTop = "0"; a.paddingBottom = "0"; a.borderTopWidth = "0"; a.borderBottomWidth = "0"; a.height = 0 }; q.children("thead, tfoot").remove(); z = r.clone().prependTo(q); x = r.find("tr"); y = z.find("tr"); z.find("th, td").removeAttr("tabindex"); t && (w = t.clone().prependTo(q), u = t.find("tr"), w = w.find("tr")); c || (k.width = "100%", h[0].style.width =
            "100%"); g.each(ma(a, z), function (b, c) { D = ga(a, b); c.style.width = a.aoColumns[D].sWidth }); t && F(function (a) { a.style.width = "" }, w); b.bCollapse && "" !== e && (k.height = o[0].offsetHeight + r[0].offsetHeight + "px"); h = q.outerWidth(); if ("" === c) { if (L.width = "100%", v && (q.find("tbody").height() > j.offsetHeight || "scroll" == o.css("overflow-y"))) L.width = s(q.outerWidth() - f) } else "" !== d ? L.width = s(d) : h == o.width() && o.height() < q.height() ? (L.width = s(h - f), q.outerWidth() > h - f && (L.width = s(h))) : L.width = s(h); h = q.outerWidth(); F(E, y); F(function (a) {
                C.push(a.innerHTML);
                A.push(s(g(a).css("width")))
            }, y); F(function (a, b) { a.style.width = A[b] }, x); g(y).height(0); t && (F(E, w), F(function (a) { B.push(s(g(a).css("width"))) }, w), F(function (a, b) { a.style.width = B[b] }, u), g(w).height(0)); F(function (a, b) { a.innerHTML = '<div class="dataTables_sizing" style="height:0;overflow:hidden;">' + C[b] + "</div>"; a.style.width = A[b] }, y); t && F(function (a, b) { a.innerHTML = ""; a.style.width = B[b] }, w); if (q.outerWidth() < h) {
                u = j.scrollHeight > j.offsetHeight || "scroll" == o.css("overflow-y") ? h + f : h; if (v && (j.scrollHeight >
                j.offsetHeight || "scroll" == o.css("overflow-y"))) L.width = s(u - f); ("" === c || "" !== d) && O(a, 1, "Possible column misalignment", 6)
            } else u = "100%"; k.width = s(u); i.width = s(u); t && (a.nScrollFoot.style.width = s(u)); !e && v && (k.height = s(ba.offsetHeight + f)); e && b.bCollapse && (k.height = s(e), b = c && ba.offsetWidth > j.offsetWidth ? f : 0, ba.offsetHeight < j.offsetHeight && (k.height = s(ba.offsetHeight + b))); b = q.outerWidth(); m[0].style.width = s(b); n.width = s(b); m = q.height() > j.clientHeight || "scroll" == o.css("overflow-y"); ca = "padding" + (ca.bScrollbarLeft ?
            "Left" : "Right"); n[ca] = m ? f + "px" : "0px"; t && (p[0].style.width = s(b), l[0].style.width = s(b), l[0].style[ca] = m ? f + "px" : "0px"); o.scroll(); if (a.bSorted || a.bFiltered) j.scrollTop = 0
        } function F(a, b, c) { for (var d = 0, e = 0, f = b.length, h, i; e < f;) { h = b[e].firstChild; for (i = c ? c[e].firstChild : null; h;) 1 === h.nodeType && (c ? a(h, i, d) : a(h, d), d++), h = h.nextSibling, i = c ? i.nextSibling : null; e++ } } function Ca(a) {
            var b = a.nTable, c = a.aoColumns, d = a.oScroll, e = d.sY, f = d.sX, h = d.sXInner, i = c.length, d = W(a, "bVisible"), j = g("th", a.nTHead), n = b.getAttribute("width"),
            m = b.parentNode, o = !1, k, l; for (k = 0; k < d.length; k++) l = c[d[k]], null !== l.sWidth && (l.sWidth = zb(l.sWidthOrig, m), o = !0); if (!o && !f && !e && i == Y(a) && i == j.length) for (k = 0; k < i; k++) c[k].sWidth = s(j.eq(k).width()); else {
                i = g(b.cloneNode(!1)).css("visibility", "hidden").removeAttr("id").append(g(a.nTHead).clone(!1)).append(g(a.nTFoot).clone(!1)).append(g("<tbody><tr/></tbody>")); i.find("tfoot th, tfoot td").css("width", ""); var p = i.find("tbody tr"), j = ma(a, i.find("thead")[0]); for (k = 0; k < d.length; k++) l = c[d[k]], j[k].style.width =
                null !== l.sWidthOrig && "" !== l.sWidthOrig ? s(l.sWidthOrig) : ""; if (a.aoData.length) for (k = 0; k < d.length; k++) o = d[k], l = c[o], g(Ab(a, o)).clone(!1).append(l.sContentPadding).appendTo(p); i.appendTo(m); f && h ? i.width(h) : f ? (i.css("width", "auto"), i.width() < m.offsetWidth && i.width(m.offsetWidth)) : e ? i.width(m.offsetWidth) : n && i.width(n); Bb(a, i[0]); if (f) { for (k = h = 0; k < d.length; k++) l = c[d[k]], e = g(j[k]).outerWidth(), h += null === l.sWidthOrig ? e : parseInt(l.sWidth, 10) + e - g(j[k]).width(); i.width(s(h)); b.style.width = s(h) } for (k = 0; k < d.length; k++) if (l =
                c[d[k]], e = g(j[k]).width()) l.sWidth = s(e); b.style.width = s(i.css("width")); i.remove()
            } n && (b.style.width = s(n)); if ((n || f) && !a._reszEvt) g(za).bind("resize.DT-" + a.sInstance, Ma(function () { U(a) })), a._reszEvt = !0
        } function Ma(a, b) { var c = b || 200, d, e; return function () { var b = this, h = +new Date, i = arguments; d && h < d + c ? (clearTimeout(e), e = setTimeout(function () { d = l; a.apply(b, i) }, c)) : d ? (d = h, a.apply(b, i)) : d = h } } function zb(a, b) {
            if (!a) return 0; var c = g("<div/>").css("width", s(a)).appendTo(b || N.body), d = c[0].offsetWidth; c.remove();
            return d
        } function Bb(a, b) { var c = a.oScroll; if (c.sX || c.sY) c = !c.sX ? c.iBarWidth : 0, b.style.width = s(g(b).outerWidth() - c) } function Ab(a, b) { var c = Cb(a, b); if (0 > c) return null; var d = a.aoData[c]; return !d.nTr ? g("<td/>").html(A(a, c, b, "display"))[0] : d.anCells[b] } function Cb(a, b) { for (var c, d = -1, e = -1, f = 0, h = a.aoData.length; f < h; f++) c = A(a, f, b, "display") + "", c = c.replace(Ub, ""), c.length > d && (d = c.length, e = f); return e } function s(a) { return null === a ? "0px" : "number" == typeof a ? 0 > a ? "0px" : a + "px" : a.match(/\d$/) ? a + "px" : a } function Db() {
            if (!p.__scrollbarWidth) {
                var a =
                g("<p/>").css({ width: "100%", height: 200, padding: 0 })[0], b = g("<div/>").css({ position: "absolute", top: 0, left: 0, width: 200, height: 150, padding: 0, overflow: "hidden", visibility: "hidden" }).append(a).appendTo("body"), c = a.offsetWidth; b.css("overflow", "scroll"); a = a.offsetWidth; c === a && (a = b[0].clientWidth); b.remove(); p.__scrollbarWidth = c - a
            } return p.__scrollbarWidth
        } function Q(a) {
            var b, c, d = [], e = a.aoColumns, f, h, i, j; b = a.aaSortingFixed; c = g.isPlainObject(b); var n = []; f = function (a) {
                a.length && !g.isArray(a[0]) ? n.push(a) : n.push.apply(n,
                a)
            }; g.isArray(b) && f(b); c && b.pre && f(b.pre); f(a.aaSorting); c && b.post && f(b.post); for (a = 0; a < n.length; a++) { j = n[a][0]; f = e[j].aDataSort; b = 0; for (c = f.length; b < c; b++) h = f[b], i = e[h].sType || "string", d.push({ src: j, col: h, dir: n[a][1], index: n[a][2], type: i, formatter: p.ext.type.order[i + "-pre"] }) } return d
        } function jb(a) {
            var b, c, d = [], e = p.ext.type.order, f = a.aoData, h = 0, i, g = a.aiDisplayMaster, n; Da(a); n = Q(a); b = 0; for (c = n.length; b < c; b++) i = n[b], i.formatter && h++, Eb(a, i.col); if ("ssp" != z(a) && 0 !== n.length) {
                b = 0; for (c = g.length; b < c; b++) d[g[b]] =
                b; h === n.length ? g.sort(function (a, b) { var c, e, h, g, i = n.length, j = f[a]._aSortData, l = f[b]._aSortData; for (h = 0; h < i; h++) if (g = n[h], c = j[g.col], e = l[g.col], c = c < e ? -1 : c > e ? 1 : 0, 0 !== c) return "asc" === g.dir ? c : -c; c = d[a]; e = d[b]; return c < e ? -1 : c > e ? 1 : 0 }) : g.sort(function (a, b) { var c, h, g, i, j = n.length, l = f[a]._aSortData, p = f[b]._aSortData; for (g = 0; g < j; g++) if (i = n[g], c = l[i.col], h = p[i.col], i = e[i.type + "-" + i.dir] || e["string-" + i.dir], c = i(c, h), 0 !== c) return c; c = d[a]; h = d[b]; return c < h ? -1 : c > h ? 1 : 0 })
            } a.bSorted = !0
        } function Fb(a) {
            for (var b, c,
            d = a.aoColumns, e = Q(a), a = a.oLanguage.oAria, f = 0, h = d.length; f < h; f++) { c = d[f]; var i = c.asSorting; b = c.sTitle.replace(/<.*?>/g, ""); var g = c.nTh; g.removeAttribute("aria-sort"); c.bSortable && (0 < e.length && e[0].col == f ? (g.setAttribute("aria-sort", "asc" == e[0].dir ? "ascending" : "descending"), c = i[e[0].index + 1] || i[0]) : c = i[0], b += "asc" === c ? a.sSortAscending : a.sSortDescending); g.setAttribute("aria-label", b) }
        } function Sa(a, b, c, d) {
            var e = a.aaSorting, f = a.aoColumns[b].asSorting, h = function (a) {
                var b = a._idx; b === l && (b = g.inArray(a[1],
                f)); return b + 1 >= f.length ? 0 : b + 1
            }; c && a.oFeatures.bSortMulti ? (c = g.inArray(b, B(e, "0")), -1 !== c ? (b = h(e[c]), e[c][1] = f[b], e[c]._idx = b) : (e.push([b, f[0], 0]), e[e.length - 1]._idx = 0)) : e.length && e[0][0] == b ? (b = h(e[0]), e.length = 1, e[0][1] = f[b], e[0]._idx = b) : (e.length = 0, e.push([b, f[0]]), e[0]._idx = 0); K(a); "function" == typeof d && d(a)
        } function Ka(a, b, c, d) {
            var e = a.aoColumns[c]; Ta(b, {}, function (b) {
                !1 !== e.bSortable && (a.oFeatures.bProcessing ? (C(a, !0), setTimeout(function () { Sa(a, c, b.shiftKey, d); "ssp" !== z(a) && C(a, !1) }, 0)) : Sa(a,
                c, b.shiftKey, d))
            })
        } function sa(a) { var b = a.aLastSort, c = a.oClasses.sSortColumn, d = Q(a), e = a.oFeatures, f, h; if (e.bSort && e.bSortClasses) { e = 0; for (f = b.length; e < f; e++) h = b[e].src, g(B(a.aoData, "anCells", h)).removeClass(c + (2 > e ? e + 1 : 3)); e = 0; for (f = d.length; e < f; e++) h = d[e].src, g(B(a.aoData, "anCells", h)).addClass(c + (2 > e ? e + 1 : 3)) } a.aLastSort = d } function Eb(a, b) {
            var c = a.aoColumns[b], d = p.ext.order[c.sSortDataType], e; d && (e = d.call(a.oInstance, a, b, X(a, b))); for (var f, h = p.ext.type.order[c.sType + "-pre"], g = 0, j = a.aoData.length; g <
            j; g++) if (c = a.aoData[g], c._aSortData || (c._aSortData = []), !c._aSortData[b] || d) f = d ? e[g] : A(a, g, b, "sort"), c._aSortData[b] = h ? h(f) : f
        } function ta(a) {
            if (a.oFeatures.bStateSave && !a.bDestroying) {
                var b = { iCreate: +new Date, iStart: a._iDisplayStart, iLength: a._iDisplayLength, aaSorting: g.extend(!0, [], a.aaSorting), oSearch: g.extend(!0, {}, a.oPreviousSearch), aoSearchCols: g.extend(!0, [], a.aoPreSearchCols), abVisCols: B(a.aoColumns, "bVisible") }; t(a, "aoStateSaveParams", "stateSaveParams", [a, b]); a.fnStateSaveCallback.call(a.oInstance,
                a, b)
            }
        } function Gb(a) {
            var b, c, d = a.aoColumns; if (a.oFeatures.bStateSave) {
                var e = a.fnStateLoadCallback.call(a.oInstance, a); if (e && (b = t(a, "aoStateLoadParams", "stateLoadParams", [a, e]), -1 === g.inArray(!1, b) && (b = a.iStateDuration, !(0 < b && e.iCreate < +new Date - 1E3 * b) && d.length === e.aoSearchCols.length))) {
                    a.oLoadedState = g.extend(!0, {}, e); a._iDisplayStart = e.iStart; a.iInitDisplayStart = e.iStart; a._iDisplayLength = e.iLength; a.aaSorting = g.map(e.aaSorting, function (a) { return a[0] >= d.length ? [0, a[1]] : a }); g.extend(a.oPreviousSearch,
                    e.oSearch); g.extend(!0, a.aoPreSearchCols, e.aoSearchCols); var f = e.abVisCols; b = 0; for (c = f.length; b < c; b++) d[b].bVisible = f[b]; t(a, "aoStateLoaded", "stateLoaded", [a, e])
                }
            }
        } function ua(a) { var b = p.settings, a = g.inArray(a, B(b, "nTable")); return -1 !== a ? b[a] : null } function O(a, b, c, d) {
            c = "DataTables warning: " + (null !== a ? "table id=" + a.sTableId + " - " : "") + c; d && (c += ". For more information about this error, please see http://datatables.net/tn/" + d); if (b) za.console && console.log && console.log(c); else if (a = p.ext, "alert" == (a.sErrMode ||
            a.errMode)) return false; else throw Error(c);
        } function D(a, b, c, d) { g.isArray(c) ? g.each(c, function (c, d) { g.isArray(d) ? D(a, b, d[0], d[1]) : D(a, b, d) }) : (d === l && (d = c), b[c] !== l && (a[d] = b[c])) } function Hb(a, b, c) { var d, e; for (e in b) b.hasOwnProperty(e) && (d = b[e], g.isPlainObject(d) ? (g.isPlainObject(a[e]) || (a[e] = {}), g.extend(!0, a[e], d)) : a[e] = c && "data" !== e && "aaData" !== e && g.isArray(d) ? d.slice() : d); return a } function Ta(a, b, c) {
            g(a).bind("click.DT", b, function (b) { a.blur(); c(b) }).bind("keypress.DT", b, function (a) {
                13 === a.which &&
                (a.preventDefault(), c(a))
            }).bind("selectstart.DT", function () { return !1 })
        } function y(a, b, c, d) { c && a[b].push({ fn: c, sName: d }) } function t(a, b, c, d) { var e = []; b && (e = g.map(a[b].slice().reverse(), function (b) { return b.fn.apply(a.oInstance, d) })); null !== c && g(a.nTable).trigger(c + ".dt", d); return e } function Qa(a) { var b = a._iDisplayStart, c = a.fnDisplayEnd(), d = a._iDisplayLength; c === a.fnRecordsDisplay() && (b = c - d); if (-1 === d || 0 > b) b = 0; a._iDisplayStart = b } function La(a, b) {
            var c = a.renderer, d = p.ext.renderer[b]; return g.isPlainObject(c) &&
            c[b] ? d[c[b]] || d._ : "string" === typeof c ? d[c] || d._ : d._
        } function z(a) { return a.oFeatures.bServerSide ? "ssp" : a.ajax || a.sAjaxSource ? "ajax" : "dom" } function Ua(a, b) { var c = [], c = Ib.numbers_length, d = Math.floor(c / 2); b <= c ? c = R(0, b) : a <= d ? (c = R(0, c - 2), c.push("ellipsis"), c.push(b - 1)) : (a >= b - 1 - d ? c = R(b - (c - 2), b) : (c = R(a - 1, a + 2), c.push("ellipsis"), c.push(b - 1)), c.splice(0, 0, "ellipsis"), c.splice(0, 0, 0)); c.DT_el = "span"; return c } function bb(a) {
            g.each({
                num: function (b) { return va(b, a) }, "num-fmt": function (b) { return va(b, a, Va) }, "html-num": function (b) {
                    return va(b,
                    a, wa)
                }, "html-num-fmt": function (b) { return va(b, a, wa, Va) }
            }, function (b, c) { u.type.order[b + a + "-pre"] = c })
        } function Jb(a) { return function () { var b = [ua(this[p.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments)); return p.ext.internal[a].apply(this, b) } } var p, u, q, r, x, Wa = {}, Kb = /[\r\n]/g, wa = /<.*?>/g, Vb = /^[\d\+\-a-zA-Z]/, Sb = RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)", "g"), Va = /[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g, da = function (a) { return !a || "-" === a ? !0 : !1 }, Lb = function (a) {
            var b =
            parseInt(a, 10); return !isNaN(b) && isFinite(a) ? b : null
        }, Mb = function (a, b) { Wa[b] || (Wa[b] = RegExp(Oa(b), "g")); return "string" === typeof a ? a.replace(/\./g, "").replace(Wa[b], ".") : a }, Xa = function (a, b, c) { var d = "string" === typeof a; b && d && (a = Mb(a, b)); c && d && (a = a.replace(Va, "")); return !a || "-" === a || !isNaN(parseFloat(a)) && isFinite(a) }, Nb = function (a, b, c) { return da(a) ? !0 : a && "string" !== typeof a ? null : Xa(a.replace(wa, ""), b, c) ? !0 : null }, B = function (a, b, c) {
            var d = [], e = 0, f = a.length; if (c !== l) for (; e < f; e++) a[e] && a[e][b] && d.push(a[e][b][c]);
            else for (; e < f; e++) a[e] && d.push(a[e][b]); return d
        }, xa = function (a, b, c, d) { var e = [], f = 0, h = b.length; if (d !== l) for (; f < h; f++) e.push(a[b[f]][c][d]); else for (; f < h; f++) e.push(a[b[f]][c]); return e }, R = function (a, b) { var c = [], d; b === l ? (b = 0, d = a) : (d = b, b = a); for (var e = b; e < d; e++) c.push(e); return c }, Ja = function (a) { var b = [], c, d, e = a.length, f, h = 0; d = 0; a: for (; d < e; d++) { c = a[d]; for (f = 0; f < h; f++) if (b[f] === c) continue a; b.push(c); h++ } return b }, w = function (a, b, c) { a[b] !== l && (a[c] = a[b]) }, Z = /\[.*?\]$/, P = /\(\)$/, qa = g("<div>")[0], Tb = qa.textContent !==
        l, Ub = /<.*?>/g; p = function (a) {
            this.$ = function (a, b) { return this.api(!0).$(a, b) }; this._ = function (a, b) { return this.api(!0).rows(a, b).data() }; this.api = function (a) { return a ? new q(ua(this[u.iApiIndex])) : new q(this) }; this.fnAddData = function (a, b) { var c = this.api(!0), d = g.isArray(a) && (g.isArray(a[0]) || g.isPlainObject(a[0])) ? c.rows.add(a) : c.row.add(a); (b === l || b) && c.draw(); return d.flatten().toArray() }; this.fnAdjustColumnSizing = function (a) {
                var b = this.api(!0).columns.adjust(), c = b.settings()[0], d = c.oScroll; a === l ||
                a ? b.draw(!1) : ("" !== d.sX || "" !== d.sY) && V(c)
            }; this.fnClearTable = function (a) { var b = this.api(!0).clear(); (a === l || a) && b.draw() }; this.fnClose = function (a) { this.api(!0).row(a).child.hide() }; this.fnDeleteRow = function (a, b, c) { var d = this.api(!0), a = d.rows(a), e = a.settings()[0], g = e.aoData[a[0][0]]; a.remove(); b && b.call(this, e, g); (c === l || c) && d.draw(); return g }; this.fnDestroy = function (a) { this.api(!0).destroy(a) }; this.fnDraw = function (a) { this.api(!0).draw(!a) }; this.fnFilter = function (a, b, c, d, e, g) {
                e = this.api(!0); null ===
                b || b === l ? e.search(a, c, d, g) : e.column(b).search(a, c, d, g); e.draw()
            }; this.fnGetData = function (a, b) { var c = this.api(!0); if (a !== l) { var d = a.nodeName ? a.nodeName.toLowerCase() : ""; return b !== l || "td" == d || "th" == d ? c.cell(a, b).data() : c.row(a).data() || null } return c.data().toArray() }; this.fnGetNodes = function (a) { var b = this.api(!0); return a !== l ? b.row(a).node() : b.rows().nodes().flatten().toArray() }; this.fnGetPosition = function (a) {
                var b = this.api(!0), c = a.nodeName.toUpperCase(); return "TR" == c ? b.row(a).index() : "TD" == c || "TH" ==
                c ? (a = b.cell(a).index(), [a.row, a.columnVisible, a.column]) : null
            }; this.fnIsOpen = function (a) { return this.api(!0).row(a).child.isShown() }; this.fnOpen = function (a, b, c) { return this.api(!0).row(a).child(b, c).show().child()[0] }; this.fnPageChange = function (a, b) { var c = this.api(!0).page(a); (b === l || b) && c.draw(!1) }; this.fnSetColumnVis = function (a, b, c) { a = this.api(!0).column(a).visible(b); (c === l || c) && a.columns.adjust().draw() }; this.fnSettings = function () { return ua(this[u.iApiIndex]) }; this.fnSort = function (a) { this.api(!0).order(a).draw() };
            this.fnSortListener = function (a, b, c) { this.api(!0).order.listener(a, b, c) }; this.fnUpdate = function (a, b, c, d, e) { var g = this.api(!0); c === l || null === c ? g.row(b).data(a) : g.cell(b, c).data(a); (e === l || e) && g.columns.adjust(); (d === l || d) && g.draw(); return 0 }; this.fnVersionCheck = u.fnVersionCheck; var b = this, c = a === l, d = this.length; c && (a = {}); this.oApi = this.internal = u.internal; for (var e in p.ext.internal) e && (this[e] = Jb(e)); this.each(function () {
                var e = {}, h = 1 < d ? Hb(e, a, !0) : a, i = 0, j, n = this.getAttribute("id"), e = !1, m = p.defaults;
                if ("table" != this.nodeName.toLowerCase()) O(null, 0, "Non-table node initialisation (" + this.nodeName + ")", 2); else {
                    cb(m); db(m.column); G(m, m, !0); G(m.column, m.column, !0); G(m, h); var o = p.settings, i = 0; for (j = o.length; i < j; i++) { if (o[i].nTable == this) { j = h.bRetrieve !== l ? h.bRetrieve : m.bRetrieve; if (c || j) return o[i].oInstance; if (h.bDestroy !== l ? h.bDestroy : m.bDestroy) { o[i].oInstance.fnDestroy(); break } else { O(o[i], 0, "Cannot reinitialise DataTable", 3); return } } if (o[i].sTableId == this.id) { o.splice(i, 1); break } } if (null === n || "" ===
                    n) this.id = n = "DataTables_Table_" + p.ext._unique++; var k = g.extend(!0, {}, p.models.oSettings, { nTable: this, oApi: b.internal, oInit: h, sDestroyWidth: g(this)[0].style.width, sInstance: n, sTableId: n }); o.push(k); k.oInstance = 1 === b.length ? b : g(this).dataTable(); cb(h); h.oLanguage && M(h.oLanguage); h.aLengthMenu && !h.iDisplayLength && (h.iDisplayLength = g.isArray(h.aLengthMenu[0]) ? h.aLengthMenu[0][0] : h.aLengthMenu[0]); h = Hb(g.extend(!0, {}, m), h); D(k.oFeatures, h, "bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));
                    D(k, h, ["asStripeClasses", "ajax", "fnServerData", "fnFormatNumber", "sServerMethod", "aaSorting", "aaSortingFixed", "aLengthMenu", "sPaginationType", "sAjaxSource", "sAjaxDataProp", "iStateDuration", "sDom", "bSortCellsTop", "iTabIndex", "fnStateLoadCallback", "fnStateSaveCallback", "renderer", ["iCookieDuration", "iStateDuration"], ["oSearch", "oPreviousSearch"], ["aoSearchCols", "aoPreSearchCols"], ["iDisplayLength", "_iDisplayLength"], ["bJQueryUI", "bJUI"]]); D(k.oScroll, h, [["sScrollX", "sX"], ["sScrollXInner", "sXInner"],
                    ["sScrollY", "sY"], ["bScrollCollapse", "bCollapse"]]); D(k.oLanguage, h, "fnInfoCallback"); y(k, "aoDrawCallback", h.fnDrawCallback, "user"); y(k, "aoServerParams", h.fnServerParams, "user"); y(k, "aoStateSaveParams", h.fnStateSaveParams, "user"); y(k, "aoStateLoadParams", h.fnStateLoadParams, "user"); y(k, "aoStateLoaded", h.fnStateLoaded, "user"); y(k, "aoRowCallback", h.fnRowCallback, "user"); y(k, "aoRowCreatedCallback", h.fnCreatedRow, "user"); y(k, "aoHeaderCallback", h.fnHeaderCallback, "user"); y(k, "aoFooterCallback", h.fnFooterCallback,
                    "user"); y(k, "aoInitComplete", h.fnInitComplete, "user"); y(k, "aoPreDrawCallback", h.fnPreDrawCallback, "user"); n = k.oClasses; h.bJQueryUI ? (g.extend(n, p.ext.oJUIClasses, h.oClasses), h.sDom === m.sDom && "lfrtip" === m.sDom && (k.sDom = '<"H"lfr>t<"F"ip>'), k.renderer) ? g.isPlainObject(k.renderer) && !k.renderer.header && (k.renderer.header = "jqueryui") : k.renderer = "jqueryui" : g.extend(n, p.ext.classes, h.oClasses); g(this).addClass(n.sTable); if ("" !== k.oScroll.sX || "" !== k.oScroll.sY) k.oScroll.iBarWidth = Db(); !0 === k.oScroll.sX && (k.oScroll.sX =
                    "100%"); k.iInitDisplayStart === l && (k.iInitDisplayStart = h.iDisplayStart, k._iDisplayStart = h.iDisplayStart); null !== h.iDeferLoading && (k.bDeferLoading = !0, i = g.isArray(h.iDeferLoading), k._iRecordsDisplay = i ? h.iDeferLoading[0] : h.iDeferLoading, k._iRecordsTotal = i ? h.iDeferLoading[1] : h.iDeferLoading); "" !== h.oLanguage.sUrl ? (k.oLanguage.sUrl = h.oLanguage.sUrl, g.getJSON(k.oLanguage.sUrl, null, function (a) { M(a); G(m.oLanguage, a); g.extend(true, k.oLanguage, h.oLanguage, a); ra(k) }), e = !0) : g.extend(!0, k.oLanguage, h.oLanguage);
                    null === h.asStripeClasses && (k.asStripeClasses = [n.sStripeOdd, n.sStripeEven]); var i = k.asStripeClasses, r = g("tbody tr:eq(0)", this); -1 !== g.inArray(!0, g.map(i, function (a) { return r.hasClass(a) })) && (g("tbody tr", this).removeClass(i.join(" ")), k.asDestroyStripes = i.slice()); var o = [], q, i = this.getElementsByTagName("thead"); 0 !== i.length && ($(k.aoHeader, i[0]), o = ma(k)); if (null === h.aoColumns) { q = []; i = 0; for (j = o.length; i < j; i++) q.push(null) } else q = h.aoColumns; i = 0; for (j = q.length; i < j; i++) Aa(k, o ? o[i] : null); gb(k, h.aoColumnDefs,
                    q, function (a, b) { fa(k, a, b) }); if (r.length) { var s = function (a, b) { return a.getAttribute("data-" + b) ? b : null }; g.each(ia(k, r[0]).cells, function (a, b) { var c = k.aoColumns[a]; if (c.mData === a) { var d = s(b, "sort") || s(b, "order"), e = s(b, "filter") || s(b, "search"); if (d !== null || e !== null) { c.mData = { _: a + ".display", sort: d !== null ? a + ".@data-" + d : l, type: d !== null ? a + ".@data-" + d : l, filter: e !== null ? a + ".@data-" + e : l }; fa(k, a) } } }) } var u = k.oFeatures; h.bStateSave && (u.bStateSave = !0, Gb(k, h), y(k, "aoDrawCallback", ta, "state_save")); if (h.aaSorting ===
                    l) { o = k.aaSorting; i = 0; for (j = o.length; i < j; i++) o[i][1] = k.aoColumns[i].asSorting[0] } sa(k); u.bSort && y(k, "aoDrawCallback", function () { if (k.bSorted) { var a = Q(k), b = {}; g.each(a, function (a, c) { b[c.src] = c.dir }); t(k, null, "order", [k, a, b]); Fb(k) } }); y(k, "aoDrawCallback", function () { (k.bSorted || z(k) === "ssp" || u.bDeferRender) && sa(k) }, "sc"); eb(k); i = g(this).children("caption").each(function () { this._captionSide = g(this).css("caption-side") }); j = g(this).children("thead"); 0 === j.length && (j = g("<thead/>").appendTo(this)); k.nTHead =
                    j[0]; j = g(this).children("tbody"); 0 === j.length && (j = g("<tbody/>").appendTo(this)); k.nTBody = j[0]; j = g(this).children("tfoot"); if (0 === j.length && 0 < i.length && ("" !== k.oScroll.sX || "" !== k.oScroll.sY)) j = g("<tfoot/>").appendTo(this); 0 === j.length || 0 === j.children().length ? g(this).addClass(n.sNoFooter) : 0 < j.length && (k.nTFoot = j[0], $(k.aoFooter, k.nTFoot)); if (h.aaData) for (i = 0; i < h.aaData.length; i++) H(k, h.aaData[i]); else (k.bDeferLoading || "dom" == z(k)) && ha(k, g(k.nTBody).children("tr")); k.aiDisplay = k.aiDisplayMaster.slice();
                    k.bInitialised = !0; !1 === e && ra(k)
                }
            }); b = null; return this
        }; var Ob = [], v = Array.prototype, Wb = function (a) { var b, c, d = p.settings, e = g.map(d, function (a) { return a.nTable }); if (a) { if (a.nTable && a.oApi) return [a]; if (a.nodeName && "table" === a.nodeName.toLowerCase()) return b = g.inArray(a, e), -1 !== b ? [d[b]] : null; if (a && "function" === typeof a.settings) return a.settings().toArray(); "string" === typeof a ? c = g(a) : a instanceof g && (c = a) } else return []; if (c) return c.map(function () { b = g.inArray(this, e); return -1 !== b ? d[b] : null }).toArray() };
        p.Api = q = function (a, b) { if (!this instanceof q) throw "DT API must be constructed as a new object"; var c = [], d = function (a) { (a = Wb(a)) && c.push.apply(c, a) }; if (g.isArray(a)) for (var e = 0, f = a.length; e < f; e++) d(a[e]); else d(a); this.context = Ja(c); b && this.push.apply(this, b.toArray ? b.toArray() : b); this.selector = { rows: null, cols: null, opts: null }; q.extend(this, this, Ob) }; q.prototype = {
            concat: v.concat, context: [], each: function (a) {
                if (v.forEach) v.forEach.call(this, a, this); else for (var b = 0, c = this.length; b < c; b++) a.call(this, this[b],
                b, this); return this
            }, eq: function (a) { var b = this.context; return b.length > a ? new q(b[a], this[a]) : null }, filter: function (a) { var b = []; if (v.filter) b = v.filter.call(this, a, this); else for (var c = 0, d = this.length; c < d; c++) a.call(this, this[c], c, this) && b.push(this[c]); return new q(this.context, b) }, flatten: function () { var a = []; return new q(this.context, a.concat.apply(a, this.toArray())) }, join: v.join, indexOf: v.indexOf || function (a, b) { for (var c = b || 0, d = this.length; c < d; c++) if (this[c] === a) return c; return -1 }, iterator: function (a,
            b, c) {
                var d = [], e, f, h, g, j, n = this.context, m, o, k = this.selector; "string" === typeof a && (c = b, b = a, a = !1); f = 0; for (h = n.length; f < h; f++) if ("table" === b) e = c(n[f], f), e !== l && d.push(e); else if ("columns" === b || "rows" === b) e = c(n[f], this[f], f), e !== l && d.push(e); else if ("column" === b || "column-rows" === b || "row" === b || "cell" === b) { o = this[f]; "column-rows" === b && (m = Ya(n[f], k.opts)); g = 0; for (j = o.length; g < j; g++) e = o[g], e = "cell" === b ? c(n[f], e.row, e.column, f, g) : c(n[f], e, f, g, m), e !== l && d.push(e) } return d.length ? (a = new q(n, a ? d.concat.apply([],
                d) : d), b = a.selector, b.rows = k.rows, b.cols = k.cols, b.opts = k.opts, a) : this
            }, lastIndexOf: v.lastIndexOf || function (a, b) { return this.indexOf.apply(this.toArray.reverse(), arguments) }, length: 0, map: function (a) { var b = []; if (v.map) b = v.map.call(this, a, this); else for (var c = 0, d = this.length; c < d; c++) b.push(a.call(this, this[c], c)); return new q(this.context, b) }, pluck: function (a) { return this.map(function (b) { return b[a] }) }, pop: v.pop, push: v.push, reduce: v.reduce || function (a, b) { return fb(this, a, b, 0, this.length, 1) }, reduceRight: v.reduceRight ||
            function (a, b) { return fb(this, a, b, this.length - 1, -1, -1) }, reverse: v.reverse, selector: null, shift: v.shift, sort: v.sort, splice: v.splice, toArray: function () { return v.slice.call(this) }, to$: function () { return g(this) }, toJQuery: function () { return g(this) }, unique: function () { return new q(this.context, Ja(this)) }, unshift: v.unshift
        }; q.extend = function (a, b, c) {
            if (b && (b instanceof q || b.__dt_wrapper)) {
                var d, e, f, h = function (b, c) { return function () { var d = b.apply(a, arguments); q.extend(d, d, c.methodExt); return d } }; d = 0; for (e = c.length; d <
                e; d++) f = c[d], b[f.name] = "function" === typeof f.val ? h(f.val, f) : g.isPlainObject(f.val) ? {} : f.val, b[f.name].__dt_wrapper = !0, q.extend(a, b[f.name], f.propExt)
            }
        }; q.register = r = function (a, b) {
            if (g.isArray(a)) for (var c = 0, d = a.length; c < d; c++) q.register(a[c], b); else {
                for (var e = a.split("."), f = Ob, h, i, c = 0, d = e.length; c < d; c++) {
                    h = (i = -1 !== e[c].indexOf("()")) ? e[c].replace("()", "") : e[c]; var j; a: { j = 0; for (var n = f.length; j < n; j++) if (f[j].name === h) { j = f[j]; break a } j = null } j || (j = { name: h, val: {}, methodExt: [], propExt: [] }, f.push(j)); c ===
                    d - 1 ? j.val = b : f = i ? j.methodExt : j.propExt
                } q.ready && p.api.build()
            }
        }; q.registerPlural = x = function (a, b, c) { q.register(a, c); q.register(b, function () { var a = c.apply(this, arguments); return a === this ? this : a instanceof q ? a.length ? g.isArray(a[0]) ? new q(a.context, a[0]) : a[0] : l : a }) }; r("tables()", function (a) {
            var b; if (a) { b = q; var c = this.context; if ("number" === typeof a) a = [c[a]]; else var d = g.map(c, function (a) { return a.nTable }), a = g(d).filter(a).map(function () { var a = g.inArray(this, d); return c[a] }).toArray(); b = new b(a) } else b =
            this; return b
        }); r("table()", function (a) { var a = this.tables(a), b = a.context; return b.length ? new q(b[0]) : a }); x("tables().nodes()", "table().node()", function () { return this.iterator("table", function (a) { return a.nTable }) }); x("tables().body()", "table().body()", function () { return this.iterator("table", function (a) { return a.nTBody }) }); x("tables().header()", "table().header()", function () { return this.iterator("table", function (a) { return a.nTHead }) }); x("tables().footer()", "table().footer()", function () {
            return this.iterator("table",
            function (a) { return a.nTFoot })
        }); r("draw()", function (a) { return this.iterator("table", function (b) { K(b, !1 === a) }) }); r("page()", function (a) { return a === l ? this.page.info().page : this.iterator("table", function (b) { Ra(b, a) }) }); r("page.info()", function () { if (0 === this.context.length) return l; var a = this.context[0], b = a._iDisplayStart, c = a._iDisplayLength, d = a.fnRecordsDisplay(), e = -1 === c; return { page: e ? 0 : Math.floor(b / c), pages: e ? 1 : Math.ceil(d / c), start: b, end: a.fnDisplayEnd(), length: c, recordsTotal: a.fnRecordsTotal(), recordsDisplay: d } });
        r("page.len()", function (a) { return a === l ? 0 !== this.context.length ? this.context[0]._iDisplayLength : l : this.iterator("table", function (b) { Pa(b, a) }) }); var Pb = function (a, b, c) { "ssp" == z(a) ? K(a, b) : (C(a, !0), na(a, [], function (c) { ja(a); for (var c = oa(a, c), d = 0, h = c.length; d < h; d++) H(a, c[d]); K(a, b); C(a, !1) })); if (c) { var d = new q(a); d.one("draw", function () { c(d.ajax.json()) }) } }; r("ajax.json()", function () { var a = this.context; if (0 < a.length) return a[0].json }); r("ajax.params()", function () { var a = this.context; if (0 < a.length) return a[0].oAjaxData });
        r("ajax.reload()", function (a, b) { return this.iterator("table", function (c) { Pb(c, !1 === b, a) }) }); r("ajax.url()", function (a) { var b = this.context; if (a === l) { if (0 === b.length) return l; b = b[0]; return b.ajax ? g.isPlainObject(b.ajax) ? b.ajax.url : b.ajax : b.sAjaxSource } return this.iterator("table", function (b) { g.isPlainObject(b.ajax) ? b.ajax.url = a : b.ajax = a }) }); r("ajax.url().load()", function (a, b) { return this.iterator("table", function (c) { Pb(c, !1 === b, a) }) }); var Za = function (a, b) {
            var c = [], d, e, f, h, i, j; if (!a || "string" === typeof a ||
            a.length === l) a = [a]; f = 0; for (h = a.length; f < h; f++) { e = a[f] && a[f].split ? a[f].split(",") : [a[f]]; i = 0; for (j = e.length; i < j; i++) (d = b("string" === typeof e[i] ? g.trim(e[i]) : e[i])) && d.length && c.push.apply(c, d) } return c
        }, $a = function (a) { a || (a = {}); a.filter && !a.search && (a.search = a.filter); return { search: a.search || "none", order: a.order || "current", page: a.page || "all" } }, ab = function (a) { for (var b = 0, c = a.length; b < c; b++) if (0 < a[b].length) return a[0] = a[b], a.length = 1, a.context = [a.context[b]], a; a.length = 0; return a }, Ya = function (a, b) {
            var c,
            d, e, f = [], h = a.aiDisplay; c = a.aiDisplayMaster; var i = b.search; d = b.order; e = b.page; if ("ssp" == z(a)) return "removed" === i ? [] : R(0, c.length); if ("current" == e) { c = a._iDisplayStart; for (d = a.fnDisplayEnd() ; c < d; c++) f.push(h[c]) } else if ("current" == d || "applied" == d) f = "none" == i ? c.slice() : "applied" == i ? h.slice() : g.map(c, function (a) { return -1 === g.inArray(a, h) ? a : null }); else if ("index" == d || "original" == d) { c = 0; for (d = a.aoData.length; c < d; c++) "none" == i ? f.push(c) : (e = g.inArray(c, h), (-1 === e && "removed" == i || 1 === e && "applied" == i) && f.push(c)) } return f
        };
        r("rows()", function (a, b) { a === l ? a = "" : g.isPlainObject(a) && (b = a, a = ""); var b = $a(b), c = this.iterator("table", function (c) { var e = b; return Za(a, function (a) { var b = Lb(a); if (b !== null && !e) return [b]; var i = Ya(c, e); if (b !== null && g.inArray(b, i) !== -1) return [b]; if (!a) return i; for (var b = [], j = 0, n = i.length; j < n; j++) b.push(c.aoData[i[j]].nTr); return a.nodeName && g.inArray(a, b) !== -1 ? [a._DT_RowIndex] : g(b).filter(a).map(function () { return this._DT_RowIndex }).toArray() }) }); c.selector.rows = a; c.selector.opts = b; return c }); r("rows().nodes()",
        function () { return this.iterator("row", function (a, b) { return a.aoData[b].nTr || l }) }); r("rows().data()", function () { return this.iterator(!0, "rows", function (a, b) { return xa(a.aoData, b, "_aData") }) }); x("rows().cache()", "row().cache()", function (a) { return this.iterator("row", function (b, c) { var d = b.aoData[c]; return "search" === a ? d._aFilterData : d._aSortData }) }); x("rows().invalidate()", "row().invalidate()", function (a) { return this.iterator("row", function (b, c) { la(b, c, a) }) }); x("rows().indexes()", "row().index()", function () {
            return this.iterator("row",
            function (a, b) { return b })
        }); x("rows().remove()", "row().remove()", function () { var a = this; return this.iterator("row", function (b, c, d) { var e = b.aoData; e.splice(c, 1); for (var f = 0, h = e.length; f < h; f++) null !== e[f].nTr && (e[f].nTr._DT_RowIndex = f); g.inArray(c, b.aiDisplay); ka(b.aiDisplayMaster, c); ka(b.aiDisplay, c); ka(a[d], c, !1); Qa(b) }) }); r("rows.add()", function (a) {
            var b = this.iterator("table", function (b) {
                var c, f, h, g = []; f = 0; for (h = a.length; f < h; f++) c = a[f], c.nodeName && "TR" === c.nodeName.toUpperCase() ? g.push(ha(b, c)[0]) :
                g.push(H(b, c)); return g
            }), c = this.rows(-1); c.pop(); c.push.apply(c, b.toArray()); return c
        }); r("row()", function (a, b) { return ab(this.rows(a, b)) }); r("row().data()", function (a) { var b = this.context; if (a === l) return b.length && this.length ? b[0].aoData[this[0]]._aData : l; b[0].aoData[this[0]]._aData = a; la(b[0], this[0], "data"); return this }); r("row().node()", function () { var a = this.context; return a.length && this.length ? a[0].aoData[this[0]].nTr || null : null }); r("row.add()", function (a) {
            a instanceof g && a.length && (a = a[0]); var b =
            this.iterator("table", function (b) { return a.nodeName && "TR" === a.nodeName.toUpperCase() ? ha(b, a)[0] : H(b, a) }); return this.row(b[0])
        }); var Qb = function (a) {
            var b = this.context; if (b.length && this.length) {
                var c = b[0].aoData[this[0]]; if (c._details) {
                    (c._detailsShow = a) ? c._details.insertAfter(c.nTr) : c._details.remove(); var d = b[0], e = new q(d); e.off("draw.dt.DT_details column-visibility.dt.DT_details"); 0 < B(d.aoData, "_details").length && (e.on("draw.dt.DT_details", function () {
                        e.rows({ page: "current" }).eq(0).each(function (a) {
                            a =
                            d.aoData[a]; a._detailsShow && a._details.insertAfter(a.nTr)
                        })
                    }), e.on("column-visibility.dt.DT_details", function (a, b) { for (var c, d = Y(b), e = 0, g = b.aoData.length; e < g; e++) c = b.aoData[e], c._details && c._details.children("td[colspan]").attr("colspan", d) }))
                }
            } return this
        }; r("row().child()", function (a, b) {
            var c = this.context; if (a === l) return c.length && this.length ? c[0].aoData[this[0]]._details : l; if (c.length && this.length) {
                var d = c[0], c = c[0].aoData[this[0]], e = [], f = function (a, b) {
                    if (a.nodeName && "tr" === a.nodeName.toLowerCase()) e.push(a);
                    else { var c = g("<tr><td/></tr>"); g("td", c).addClass(b).html(a)[0].colSpan = Y(d); e.push(c[0]) }
                }; if (g.isArray(a) || a instanceof g) for (var h = 0, i = a.length; h < i; h++) f(a[h], b); else f(a, b); c._details && c._details.remove(); c._details = g(e); c._detailsShow && c._details.insertAfter(c.nTr)
            } return this
        }); r(["row().child.show()", "row().child().show()"], function () { Qb.call(this, !0); return this }); r(["row().child.hide()", "row().child().hide()"], function () { Qb.call(this, !1); return this }); r("row().child.isShown()", function () {
            var a =
            this.context; return a.length && this.length ? a[0].aoData[this[0]]._detailsShow || !1 : !1
        }); var Xb = /^(.*):(name|visIdx|visible)$/; r("columns()", function (a, b) {
            a === l ? a = "" : g.isPlainObject(a) && (b = a, a = ""); var b = $a(b), c = this.iterator("table", function (b) {
                var c = a, f = b.aoColumns, h = B(f, "sName"), i = B(f, "nTh"); return Za(c, function (a) {
                    var c = Lb(a); if (a === "") return R(f.length); if (c !== null) return [c >= 0 ? c : f.length + c]; var e = typeof a === "string" ? a.match(Xb) : ""; if (e) switch (e[2]) {
                        case "visIdx": case "visible": a = parseInt(e[1], 10);
                            if (a < 0) { c = g.map(f, function (a, b) { return a.bVisible ? b : null }); return [c[c.length + a]] } return [ga(b, a)]; case "name": return g.map(h, function (a, b) { return a === e[1] ? b : null })
                    } else return g(i).filter(a).map(function () { return g.inArray(this, i) }).toArray()
                })
            }); c.selector.cols = a; c.selector.opts = b; return c
        }); x("columns().header()", "column().header()", function () { return this.iterator("column", function (a, b) { return a.aoColumns[b].nTh }) }); x("columns().footer()", "column().footer()", function () {
            return this.iterator("column",
            function (a, b) { return a.aoColumns[b].nTf })
        }); x("columns().data()", "column().data()", function () { return this.iterator("column-rows", function (a, b, c, d, e) { for (var c = [], d = 0, f = e.length; d < f; d++) c.push(A(a, e[d], b, "")); return c }) }); x("columns().cache()", "column().cache()", function (a) { return this.iterator("column-rows", function (b, c, d, e, f) { return xa(b.aoData, f, "search" === a ? "_aFilterData" : "_aSortData", c) }) }); x("columns().nodes()", "column().nodes()", function () {
            return this.iterator("column-rows", function (a, b, c, d,
            e) { return xa(a.aoData, e, "anCells", b) })
        }); x("columns().visible()", "column().visible()", function (a) {
            return this.iterator("column", function (b, c) {
                var d; if (a === l) d = b.aoColumns[c].bVisible; else {
                    var e = b.aoColumns; d = e[c]; var f = b.aoData, h, i, j; if (a === l) d = d.bVisible; else {
                        if (d.bVisible !== a) {
                            if (a) { var n = g.inArray(!0, B(e, "bVisible"), c + 1); h = 0; for (i = f.length; h < i; h++) j = f[h].nTr, e = f[h].anCells, j && j.insertBefore(e[c], e[n] || null) } else g(B(b.aoData, "anCells", c)).detach(), d.bVisible = !1, I(b, b.aoHeader), I(b, b.aoFooter),
                            ta(b); d.bVisible = a; I(b, b.aoHeader); I(b, b.aoFooter); U(b); (b.oScroll.sX || b.oScroll.sY) && V(b); t(b, null, "column-visibility", [b, c, a]); ta(b)
                        } d = void 0
                    }
                } return d
            })
        }); x("columns().indexes()", "column().index()", function (a) { return this.iterator("column", function (b, c) { return "visible" === a ? X(b, c) : c }) }); r("columns.adjust()", function () { return this.iterator("table", function (a) { U(a) }) }); r("column.index()", function (a, b) {
            if (0 !== this.context.length) {
                var c = this.context[0]; if ("fromVisible" === a || "toData" === a) return ga(c,
                b); if ("fromData" === a || "toVisible" === a) return X(c, b)
            }
        }); r("column()", function (a, b) { return ab(this.columns(a, b)) }); r("cells()", function (a, b, c) {
            g.isPlainObject(a) && (a.row ? (c = b, b = null) : (c = a, a = null)); g.isPlainObject(b) && (c = b, b = null); if (null === b || b === l) return this.iterator("table", function (b) {
                var d = a, e = $a(c), f = b.aoData, h = Ya(b, e), e = xa(f, h, "anCells"), i = g([].concat.apply([], e)), j, m = b.aoColumns.length, n, l, p, r; return Za(d, function (a) {
                    if (a) { if (g.isPlainObject(a)) return [a] } else {
                        n = []; l = 0; for (p = h.length; l < p; l++) {
                            j =
                            h[l]; for (r = 0; r < m; r++) n.push({ row: j, column: r })
                        } return n
                    } return i.filter(a).map(function (a, b) { j = b.parentNode._DT_RowIndex; return { row: j, column: g.inArray(b, f[j].anCells) } }).toArray()
                })
            }); var d = this.columns(b, c), e = this.rows(a, c), f, h, i, j, n, m = this.iterator("table", function (a, b) { f = []; h = 0; for (i = e[b].length; h < i; h++) { j = 0; for (n = d[b].length; j < n; j++) f.push({ row: e[b][h], column: d[b][j] }) } return f }); g.extend(m.selector, { cols: b, rows: a, opts: c }); return m
        }); x("cells().nodes()", "cell().node()", function () {
            return this.iterator("cell",
            function (a, b, c) { return a.aoData[b].anCells[c] })
        }); r("cells().data()", function () { return this.iterator("cell", function (a, b, c) { return A(a, b, c) }) }); x("cells().cache()", "cell().cache()", function (a) { a = "search" === a ? "_aFilterData" : "_aSortData"; return this.iterator("cell", function (b, c, d) { return b.aoData[c][a][d] }) }); x("cells().indexes()", "cell().index()", function () { return this.iterator("cell", function (a, b, c) { return { row: b, column: c, columnVisible: X(a, c) } }) }); r(["cells().invalidate()", "cell().invalidate()"], function (a) {
            var b =
            this.selector; this.rows(b.rows, b.opts).invalidate(a); return this
        }); r("cell()", function (a, b, c) { return ab(this.cells(a, b, c)) }); r("cell().data()", function (a) { var b = this.context, c = this[0]; if (a === l) return b.length && c.length ? A(b[0], c[0].row, c[0].column) : l; Ea(b[0], c[0].row, c[0].column, a); la(b[0], c[0].row, "data", c[0].column); return this }); r("order()", function (a, b) {
            var c = this.context; if (a === l) return 0 !== c.length ? c[0].aaSorting : l; "number" === typeof a ? a = [[a, b]] : g.isArray(a[0]) || (a = Array.prototype.slice.call(arguments));
            return this.iterator("table", function (b) { b.aaSorting = a.slice() })
        }); r("order.listener()", function (a, b, c) { return this.iterator("table", function (d) { Ka(d, a, b, c) }) }); r(["columns().order()", "column().order()"], function (a) { var b = this; return this.iterator("table", function (c, d) { var e = []; g.each(b[d], function (b, c) { e.push([c, a]) }); c.aaSorting = e }) }); r("search()", function (a, b, c, d) {
            var e = this.context; return a === l ? 0 !== e.length ? e[0].oPreviousSearch.sSearch : l : this.iterator("table", function (e) {
                e.oFeatures.bFilter &&
                aa(e, g.extend({}, e.oPreviousSearch, { sSearch: a + "", bRegex: null === b ? !1 : b, bSmart: null === c ? !0 : c, bCaseInsensitive: null === d ? !0 : d }), 1)
            })
        }); r(["columns().search()", "column().search()"], function (a, b, c, d) { return this.iterator("column", function (e, f) { var h = e.aoPreSearchCols; if (a === l) return h[f].sSearch; e.oFeatures.bFilter && (g.extend(h[f], { sSearch: a + "", bRegex: null === b ? !1 : b, bSmart: null === c ? !0 : c, bCaseInsensitive: null === d ? !0 : d }), aa(e, e.oPreviousSearch, 1)) }) }); p.versionCheck = p.fnVersionCheck = function (a) {
            for (var b =
            p.version.split("."), a = a.split("."), c, d, e = 0, f = a.length; e < f; e++) if (c = parseInt(b[e], 10) || 0, d = parseInt(a[e], 10) || 0, c !== d) return c > d; return !0
        }; p.isDataTable = p.fnIsDataTable = function (a) { var b = g(a).get(0), c = !1; g.each(p.settings, function (a, e) { if (e.nTable === b || e.nScrollHead === b || e.nScrollFoot === b) c = !0 }); return c }; p.tables = p.fnTables = function (a) { return jQuery.map(p.settings, function (b) { if (!a || a && g(b.nTable).is(":visible")) return b.nTable }) }; p.camelToHungarian = G; r("$()", function (a, b) {
            var c = this.rows(b).nodes(),
            c = g(c); return g([].concat(c.filter(a).toArray(), c.find(a).toArray()))
        }); g.each(["on", "one", "off"], function (a, b) { r(b + "()", function () { var a = Array.prototype.slice.call(arguments); -1 === a[0].indexOf(".dt") && (a[0] += ".dt"); var d = g(this.tables().nodes()); d[b].apply(d, a); return this }) }); r("clear()", function () { return this.iterator("table", function (a) { ja(a) }) }); r("settings()", function () { return new q(this.context, this.context) }); r("data()", function () {
            return this.iterator("table", function (a) {
                return B(a.aoData,
                "_aData")
            }).flatten()
        }); r("destroy()", function (a) {
            a = a || !1; return this.iterator("table", function (b) {
                var c = b.nTableWrapper.parentNode, d = b.oClasses, e = b.nTable, f = b.nTBody, h = b.nTHead, i = b.nTFoot, j = g(e), f = g(f), n = g(b.nTableWrapper), m = g.map(b.aoData, function (a) { return a.nTr }), l; b.bDestroying = !0; t(b, "aoDestroyCallback", "destroy", [b]); a || (new q(b)).columns().visible(!0); n.unbind(".DT").find(":not(tbody *)").unbind(".DT"); g(za).unbind(".DT-" + b.sInstance); e != h.parentNode && (j.children("thead").detach(), j.append(h));
                i && e != i.parentNode && (j.children("tfoot").detach(), j.append(i)); j.detach(); n.detach(); b.aaSorting = []; b.aaSortingFixed = []; sa(b); g(m).removeClass(b.asStripeClasses.join(" ")); g("th, td", h).removeClass(d.sSortable + " " + d.sSortableAsc + " " + d.sSortableDesc + " " + d.sSortableNone); b.bJUI && (g("th span." + d.sSortIcon + ", td span." + d.sSortIcon, h).detach(), g("th, td", h).each(function () { var a = g("div." + d.sSortJUIWrapper, this); g(this).append(a.contents()); a.detach() })); !a && c && c.insertBefore(e, b.nTableReinsertBefore);
                f.children().detach(); f.append(m); j.css("width", b.sDestroyWidth).removeClass(d.sTable); (l = b.asDestroyStripes.length) && f.children().each(function (a) { g(this).addClass(b.asDestroyStripes[a % l]) }); c = g.inArray(b, p.settings); -1 !== c && p.settings.splice(c, 1)
            })
        }); p.version = "1.10.0"; p.settings = []; p.models = {}; p.models.oSearch = { bCaseInsensitive: !0, sSearch: "", bRegex: !1, bSmart: !0 }; p.models.oRow = { nTr: null, anCells: null, _aData: [], _aSortData: null, _aFilterData: null, _sFilterRow: null, _sRowStripe: "", src: null }; p.models.oColumn =
        { idx: null, aDataSort: null, asSorting: null, bSearchable: null, bSortable: null, bVisible: null, _sManualType: null, _bAttrSrc: !1, fnCreatedCell: null, fnGetData: null, fnSetData: null, mData: null, mRender: null, nTh: null, nTf: null, sClass: null, sContentPadding: null, sDefaultContent: null, sName: null, sSortDataType: "std", sSortingClass: null, sSortingClassJUI: null, sTitle: null, sType: null, sWidth: null, sWidthOrig: null }; p.defaults = {
            aaData: null, aaSorting: [[0, "asc"]], aaSortingFixed: [], ajax: null, aLengthMenu: [10, 25, 50, 100], aoColumns: null,
            aoColumnDefs: null, aoSearchCols: [], asStripeClasses: null, bAutoWidth: !0, bDeferRender: !1, bDestroy: !1, bFilter: !0, bInfo: !0, bJQueryUI: !1, bLengthChange: !0, bPaginate: !0, bProcessing: !1, bRetrieve: !1, bScrollCollapse: !1, bServerSide: !1, bSort: !0, bSortMulti: !0, bSortCellsTop: !1, bSortClasses: !0, bStateSave: !1, fnCreatedRow: null, fnDrawCallback: null, fnFooterCallback: null, fnFormatNumber: function (a) { return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g, this.oLanguage.sThousands) }, fnHeaderCallback: null, fnInfoCallback: null,
            fnInitComplete: null, fnPreDrawCallback: null, fnRowCallback: null, fnServerData: null, fnServerParams: null, fnStateLoadCallback: function (a) { try { return JSON.parse((-1 === a.iStateDuration ? sessionStorage : localStorage).getItem("DataTables_" + a.sInstance + "_" + location.pathname)) } catch (b) { } }, fnStateLoadParams: null, fnStateLoaded: null, fnStateSaveCallback: function (a, b) { try { (-1 === a.iStateDuration ? sessionStorage : localStorage).setItem("DataTables_" + a.sInstance + "_" + location.pathname, JSON.stringify(b)) } catch (c) { } }, fnStateSaveParams: null,
            iStateDuration: 7200, iDeferLoading: null, iDisplayLength: 10, iDisplayStart: 0, iTabIndex: 0, oClasses: {}, oLanguage: {
                oAria: { sSortAscending: ": activate to sort column ascending", sSortDescending: ": activate to sort column descending" }, oPaginate: { sFirst: "First", sLast: "Last", sNext: "Next", sPrevious: "Previous" }, sEmptyTable: "No data available in table", sInfo: "Showing _START_ to _END_ of _TOTAL_ entries", sInfoEmpty: "Showing 0 to 0 of 0 entries", sInfoFiltered: "(filtered from _MAX_ total entries)", sInfoPostFix: "", sDecimal: "",
                sThousands: ",", sLengthMenu: "Show _MENU_ entries", sLoadingRecords: "Loading...", sProcessing: "Processing...", sSearch: "Search:", sUrl: "", sZeroRecords: "No matching records found"
            }, oSearch: g.extend({}, p.models.oSearch), sAjaxDataProp: "data", sAjaxSource: null, sDom: "lfrtip", sPaginationType: "simple_numbers", sScrollX: "", sScrollXInner: "", sScrollY: "", sServerMethod: "GET", renderer: null
        }; S(p.defaults); p.defaults.column = {
            aDataSort: null, iDataSort: -1, asSorting: ["asc", "desc"], bSearchable: !0, bSortable: !0, bVisible: !0, fnCreatedCell: null,
            mData: null, mRender: null, sCellType: "td", sClass: "", sContentPadding: "", sDefaultContent: null, sName: "", sSortDataType: "std", sTitle: null, sType: null, sWidth: null
        }; S(p.defaults.column); p.models.oSettings = {
            oFeatures: { bAutoWidth: null, bDeferRender: null, bFilter: null, bInfo: null, bLengthChange: null, bPaginate: null, bProcessing: null, bServerSide: null, bSort: null, bSortMulti: null, bSortClasses: null, bStateSave: null }, oScroll: { bCollapse: null, iBarWidth: 0, sX: null, sXInner: null, sY: null }, oLanguage: { fnInfoCallback: null }, oBrowser: {
                bScrollOversize: !1,
                bScrollbarLeft: !1
            }, ajax: null, aanFeatures: [], aoData: [], aiDisplay: [], aiDisplayMaster: [], aoColumns: [], aoHeader: [], aoFooter: [], oPreviousSearch: {}, aoPreSearchCols: [], aaSorting: null, aaSortingFixed: [], asStripeClasses: null, asDestroyStripes: [], sDestroyWidth: 0, aoRowCallback: [], aoHeaderCallback: [], aoFooterCallback: [], aoDrawCallback: [], aoRowCreatedCallback: [], aoPreDrawCallback: [], aoInitComplete: [], aoStateSaveParams: [], aoStateLoadParams: [], aoStateLoaded: [], sTableId: "", nTable: null, nTHead: null, nTFoot: null, nTBody: null,
            nTableWrapper: null, bDeferLoading: !1, bInitialised: !1, aoOpenRows: [], sDom: null, sPaginationType: "two_button", iStateDuration: 0, aoStateSave: [], aoStateLoad: [], oLoadedState: null, sAjaxSource: null, sAjaxDataProp: null, bAjaxDataGet: !0, jqXHR: null, json: l, oAjaxData: l, fnServerData: null, aoServerParams: [], sServerMethod: null, fnFormatNumber: null, aLengthMenu: null, iDraw: 0, bDrawing: !1, iDrawError: -1, _iDisplayLength: 10, _iDisplayStart: 0, _iRecordsTotal: 0, _iRecordsDisplay: 0, bJUI: null, oClasses: {}, bFiltered: !1, bSorted: !1, bSortCellsTop: null,
            oInit: null, aoDestroyCallback: [], fnRecordsTotal: function () { return "ssp" == z(this) ? 1 * this._iRecordsTotal : this.aiDisplayMaster.length }, fnRecordsDisplay: function () { return "ssp" == z(this) ? 1 * this._iRecordsDisplay : this.aiDisplay.length }, fnDisplayEnd: function () { var a = this._iDisplayLength, b = this._iDisplayStart, c = b + a, d = this.aiDisplay.length, e = this.oFeatures, f = e.bPaginate; return e.bServerSide ? !1 === f || -1 === a ? b + d : Math.min(b + a, this._iRecordsDisplay) : !f || c > d || -1 === a ? d : c }, oInstance: null, sInstance: null, iTabIndex: 0, nScrollHead: null,
            nScrollFoot: null, aLastSort: [], oPlugins: {}
        }; p.ext = u = { classes: {}, errMode: "alert", feature: [], search: [], internal: {}, legacy: { ajax: null }, pager: {}, renderer: { pageButton: {}, header: {} }, order: {}, type: { detect: [], search: {}, order: {} }, _unique: 0, fnVersionCheck: p.fnVersionCheck, iApiIndex: 0, oJUIClasses: {}, sVersion: p.version }; g.extend(u, { afnFiltering: u.search, aTypes: u.type.detect, ofnSearch: u.type.search, oSort: u.type.order, afnSortData: u.order, aoFeatures: u.feature, oApi: u.internal, oStdClasses: u.classes, oPagination: u.pager });
        g.extend(p.ext.classes, {
            sTable: "dataTable", sNoFooter: "no-footer", sPageButton: "paginate_button", sPageButtonActive: "current", sPageButtonDisabled: "disabled", sStripeOdd: "odd", sStripeEven: "even", sRowEmpty: "dataTables_empty", sWrapper: "dataTables_wrapper", sFilter: "dataTables_filter", sInfo: "dataTables_info", sPaging: "dataTables_paginate paging_", sLength: "dataTables_length", sProcessing: "dataTables_processing", sSortAsc: "sorting_asc", sSortDesc: "sorting_desc", sSortable: "sorting", sSortableAsc: "sorting_asc_disabled",
            sSortableDesc: "sorting_desc_disabled", sSortableNone: "sorting_disabled", sSortColumn: "sorting_", sFilterInput: "", sLengthSelect: "", sScrollWrapper: "dataTables_scroll", sScrollHead: "dataTables_scrollHead", sScrollHeadInner: "dataTables_scrollHeadInner", sScrollBody: "dataTables_scrollBody", sScrollFoot: "dataTables_scrollFoot", sScrollFootInner: "dataTables_scrollFootInner", sHeaderTH: "", sFooterTH: "", sSortJUIAsc: "", sSortJUIDesc: "", sSortJUI: "", sSortJUIAscAllowed: "", sSortJUIDescAllowed: "", sSortJUIWrapper: "", sSortIcon: "",
            sJUIHeader: "", sJUIFooter: ""
        }); var ya = "", ya = "", E = ya + "ui-state-default", ea = ya + "css_right ui-icon ui-icon-", Rb = ya + "fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix"; g.extend(p.ext.oJUIClasses, p.ext.classes, {
            sPageButton: "fg-button ui-button " + E, sPageButtonActive: "ui-state-disabled", sPageButtonDisabled: "ui-state-disabled", sPaging: "dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_", sSortAsc: E + " sorting_asc", sSortDesc: E + " sorting_desc", sSortable: E + " sorting",
            sSortableAsc: E + " sorting_asc_disabled", sSortableDesc: E + " sorting_desc_disabled", sSortableNone: E + " sorting_disabled", sSortJUIAsc: ea + "triangle-1-n", sSortJUIDesc: ea + "triangle-1-s", sSortJUI: ea + "carat-2-n-s", sSortJUIAscAllowed: ea + "carat-1-n", sSortJUIDescAllowed: ea + "carat-1-s", sSortJUIWrapper: "DataTables_sort_wrapper", sSortIcon: "DataTables_sort_icon", sScrollHead: "dataTables_scrollHead " + E, sScrollFoot: "dataTables_scrollFoot " + E, sHeaderTH: E, sFooterTH: E, sJUIHeader: Rb + " ui-corner-tl ui-corner-tr", sJUIFooter: Rb +
            " ui-corner-bl ui-corner-br"
        }); var Ib = p.ext.pager; g.extend(Ib, { simple: function () { return ["previous", "next"] }, full: function () { return ["first", "previous", "next", "last"] }, simple_numbers: function (a, b) { return ["previous", Ua(a, b), "next"] }, full_numbers: function (a, b) { return ["first", "previous", Ua(a, b), "next", "last"] }, _numbers: Ua, numbers_length: 7 }); g.extend(!0, p.ext.renderer, {
            pageButton: {
                _: function (a, b, c, d, e, f) {
                    var h = a.oClasses, i = a.oLanguage.oPaginate, j, l, m = 0, o = function (b, d) {
                        var k, p, r, q, s = function (b) {
                            Ra(a, b.data.action,
                            true)
                        }; k = 0; for (p = d.length; k < p; k++) {
                            q = d[k]; if (g.isArray(q)) { r = g("<" + (q.DT_el || "div") + "/>").appendTo(b); o(r, q) } else {
                                l = j = ""; switch (q) {
                                    case "ellipsis": b.append("<span>&hellip;</span>"); break; case "first": j = i.sFirst; l = q + (e > 0 ? "" : " " + h.sPageButtonDisabled); break; case "previous": j = i.sPrevious; l = q + (e > 0 ? "" : " " + h.sPageButtonDisabled); break; case "next": j = i.sNext; l = q + (e < f - 1 ? "" : " " + h.sPageButtonDisabled); break; case "last": j = i.sLast; l = q + (e < f - 1 ? "" : " " + h.sPageButtonDisabled); break; default: j = q + 1; l = e === q ? h.sPageButtonActive :
                                    ""
                                } if (j) { r = g("<a>", { "class": h.sPageButton + " " + l, "aria-controls": a.sTableId, "data-dt-idx": m, tabindex: a.iTabIndex, id: c === 0 && typeof q === "string" ? a.sTableId + "_" + q : null }).html(j).appendTo(b); Ta(r, { action: q }, s); m++ }
                            }
                        }
                    }, k = g(N.activeElement).data("dt-idx"); o(g(b).empty(), d); k !== null && g(b).find("[data-dt-idx=" + k + "]").focus()
                }
            }
        }); var va = function (a, b, c, d) { if (!a || "-" === a) return -Infinity; b && (a = Mb(a, b)); a.replace && (c && (a = a.replace(c, "")), d && (a = a.replace(d, ""))); return 1 * a }; g.extend(u.type.order, {
            "date-pre": function (a) {
                return Date.parse(a) ||
                0
            }, "html-pre": function (a) { return !a ? "" : a.replace ? a.replace(/<.*?>/g, "").toLowerCase() : a + "" }, "string-pre": function (a) { return "string" === typeof a ? a.toLowerCase() : !a || !a.toString ? "" : a.toString() }, "string-asc": function (a, b) { return a < b ? -1 : a > b ? 1 : 0 }, "string-desc": function (a, b) { return a < b ? 1 : a > b ? -1 : 0 }
        }); bb(""); g.extend(p.ext.type.detect, [function (a, b) { var c = b.oLanguage.sDecimal; return Xa(a, c) ? "num" + c : null }, function (a) {
            if (a && !Vb.test(a)) return null; var b = Date.parse(a); return null !== b && !isNaN(b) || da(a) ? "date" :
            null
        }, function (a, b) { var c = b.oLanguage.sDecimal; return Xa(a, c, !0) ? "num-fmt" + c : null }, function (a, b) { var c = b.oLanguage.sDecimal; return Nb(a, c) ? "html-num" + c : null }, function (a, b) { var c = b.oLanguage.sDecimal; return Nb(a, c, !0) ? "html-num-fmt" + c : null }, function (a) { return da(a) || "string" === typeof a && -1 !== a.indexOf("<") ? "html" : null }]); g.extend(p.ext.type.search, {
            html: function (a) { return da(a) ? "" : "string" === typeof a ? a.replace(Kb, " ").replace(wa, "") : "" }, string: function (a) {
                return da(a) ? "" : "string" === typeof a ? a.replace(Kb,
                " ") : a
            }
        }); g.extend(!0, p.ext.renderer, {
            header: {
                _: function (a, b, c, d) { g(a.nTable).on("order.dt.DT", function (a, f, g, i) { a = c.idx; b.removeClass(c.sSortingClass + " " + d.sSortAsc + " " + d.sSortDesc).addClass(i[a] == "asc" ? d.sSortAsc : i[a] == "desc" ? d.sSortDesc : c.sSortingClass) }) }, jqueryui: function (a, b, c, d) {
                    var e = c.idx; g("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(g("<span/>").addClass(d.sSortIcon + " " + c.sSortingClassJUI)).appendTo(b); g(a.nTable).on("order.dt.DT", function (a, g, i, j) {
                        b.removeClass(d.sSortAsc +
                        " " + d.sSortDesc).addClass(j[e] == "asc" ? d.sSortAsc : j[e] == "desc" ? d.sSortDesc : c.sSortingClass); b.find("span." + d.sSortIcon).removeClass(d.sSortJUIAsc + " " + d.sSortJUIDesc + " " + d.sSortJUI + " " + d.sSortJUIAscAllowed + " " + d.sSortJUIDescAllowed).addClass(j[e] == "asc" ? d.sSortJUIAsc : j[e] == "desc" ? d.sSortJUIDesc : c.sSortingClassJUI)
                    })
                }
            }
        }); p.render = {
            number: function (a, b, c, d) {
                return {
                    display: function (e) {
                        var e = parseFloat(e), f = parseInt(e, 10), e = c ? (b + (e - f).toFixed(c)).substring(2) : ""; return (d || "") + f.toString().replace(/\B(?=(\d{3})+(?!\d))/g,
                        a) + e
                    }
                }
            }
        }; g.extend(p.ext.internal, {
            _fnExternApiFunc: Jb, _fnBuildAjax: na, _fnAjaxUpdate: ib, _fnAjaxParameters: rb, _fnAjaxUpdateDraw: sb, _fnAjaxDataSrc: oa, _fnAddColumn: Aa, _fnColumnOptions: fa, _fnAdjustColumnSizing: U, _fnVisibleToColumnIndex: ga, _fnColumnIndexToVisible: X, _fnVisbleColumns: Y, _fnGetColumns: W, _fnColumnTypes: Da, _fnApplyColumnDefs: gb, _fnHungarianMap: S, _fnCamelToHungarian: G, _fnLanguageCompat: M, _fnBrowserDetect: eb, _fnAddData: H, _fnAddTr: ha, _fnNodeToDataIndex: function (a, b) {
                return b._DT_RowIndex !== l ? b._DT_RowIndex :
                null
            }, _fnNodeToColumnIndex: function (a, b, c) { return g.inArray(c, a.aoData[b].anCells) }, _fnGetCellData: A, _fnSetCellData: Ea, _fnSplitObjNotation: Ga, _fnGetObjectDataFn: T, _fnSetObjectDataFn: Ba, _fnGetDataMaster: Ha, _fnClearTable: ja, _fnDeleteIndex: ka, _fnInvalidateRow: la, _fnGetRowElements: ia, _fnCreateTr: Fa, _fnBuildHead: hb, _fnDrawHead: I, _fnDraw: J, _fnReDraw: K, _fnAddOptionsHtml: kb, _fnDetectHeader: $, _fnGetUniqueThs: ma, _fnFeatureHtmlFilter: mb, _fnFilterComplete: aa, _fnFilterCustom: vb, _fnFilterColumn: ub, _fnFilter: tb,
            _fnFilterCreateSearch: Na, _fnEscapeRegex: Oa, _fnFilterData: wb, _fnFeatureHtmlInfo: pb, _fnUpdateInfo: xb, _fnInfoMacros: yb, _fnInitialise: ra, _fnInitComplete: pa, _fnLengthChange: Pa, _fnFeatureHtmlLength: lb, _fnFeatureHtmlPaginate: qb, _fnPageChange: Ra, _fnFeatureHtmlProcessing: nb, _fnProcessingDisplay: C, _fnFeatureHtmlTable: ob, _fnScrollDraw: V, _fnApplyToChildren: F, _fnCalculateColumnWidths: Ca, _fnThrottle: Ma, _fnConvertToWidth: zb, _fnScrollingWidthAdjust: Bb, _fnGetWidestNode: Ab, _fnGetMaxLenString: Cb, _fnStringToCss: s, _fnScrollBarWidth: Db,
            _fnSortFlatten: Q, _fnSort: jb, _fnSortAria: Fb, _fnSortListener: Sa, _fnSortAttachListener: Ka, _fnSortingClasses: sa, _fnSortData: Eb, _fnSaveState: ta, _fnLoadState: Gb, _fnSettingsFromNode: ua, _fnLog: O, _fnMap: D, _fnBindAction: Ta, _fnCallbackReg: y, _fnCallbackFire: t, _fnLengthOverflow: Qa, _fnRenderer: La, _fnDataSource: z, _fnRowAttributes: Ia, _fnCalculateEnd: function () { }
        }); g.fn.dataTable = p; g.fn.dataTableSettings = p.settings; g.fn.dataTableExt = p.ext; g.fn.DataTable = function (a) { return g(this).dataTable(a).api() }; g.each(p, function (a,
        b) { g.fn.DataTable[a] = b }); return g.fn.dataTable
    }; "function" === typeof define && define.amd ? define("datatables", ["jquery"], M) : "object" === typeof exports ? M(require("jquery")) : jQuery && !jQuery.fn.dataTable && M(jQuery)
})(window, document);
var TableTools; (function (c, b, a) { TableTools = function (d, e) { if (!this instanceof TableTools) {  } this.s = { that: this, dt: d.fnSettings(), print: { saveStart: -1, saveLength: -1, saveScroll: -1, funcEnd: function () { } }, buttonCounter: 0, select: { type: "", selected: [], preRowSelect: null, postSelected: null, postDeselected: null, all: false, selectedClass: "" }, custom: {}, swfPath: "", buttonSet: [], master: false, tags: {} }; this.dom = { container: null, table: null, print: { hidden: [], message: null }, collection: { collection: null, background: null } }; this.classes = c.extend(true, {}, TableTools.classes); if (this.s.dt.bJUI) { c.extend(true, this.classes, TableTools.classes_themeroller) } this.fnSettings = function () { return this.s }; if (typeof e == "undefined") { e = {} } this._fnConstruct(e); return this }; TableTools.prototype = { fnGetSelected: function (f) { var e = [], j = this.s.dt.aoData, h = this.s.dt.aiDisplay, g, d; if (f) { for (g = 0, d = h.length; g < d; g++) { if (j[h[g]]._DTTT_selected) { e.push(j[h[g]].nTr) } } } else { for (g = 0, d = j.length; g < d; g++) { if (j[g]._DTTT_selected) { e.push(j[g].nTr) } } } return e }, fnGetSelectedData: function () { var e = []; var g = this.s.dt.aoData; var f, d; for (f = 0, d = g.length; f < d; f++) { if (g[f]._DTTT_selected) { e.push(this.s.dt.oInstance.fnGetData(f)) } } return e }, fnIsSelected: function (e) { var d = this.s.dt.oInstance.fnGetPosition(e); return (this.s.dt.aoData[d]._DTTT_selected === true) ? true : false }, fnSelectAll: function (d) { var e = this._fnGetMasterSettings(); this._fnRowSelect((d === true) ? e.dt.aiDisplay : e.dt.aoData) }, fnSelectNone: function (d) { var e = this._fnGetMasterSettings(); this._fnRowDeselect(this.fnGetSelected(d)) }, fnSelect: function (d) { if (this.s.select.type == "single") { this.fnSelectNone(); this._fnRowSelect(d) } else { if (this.s.select.type == "multi") { this._fnRowSelect(d) } } }, fnDeselect: function (d) { this._fnRowDeselect(d) }, fnGetTitle: function (f) { var d = ""; if (typeof f.sTitle != "undefined" && f.sTitle !== "") { d = f.sTitle } else { var e = a.getElementsByTagName("title"); if (e.length > 0) { d = e[0].innerHTML } } if ("\u00A1".toString().length < 4) { return d.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g, "") } else { return d.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g, "") } }, fnCalcColRatios: function (j) { var h = this.s.dt.aoColumns, e = this._fnColumnTargets(j.mColumns), g = [], k = 0, l = 0, f, d; for (f = 0, d = e.length; f < d; f++) { if (e[f]) { k = h[f].nTh.offsetWidth; l += k; g.push(k) } } for (f = 0, d = g.length; f < d; f++) { g[f] = g[f] / l } return g.join("\t") }, fnGetTableData: function (d) { if (this.s.dt) { return this._fnGetDataTablesData(d) } }, fnSetText: function (d, e) { this._fnFlashSetText(d, e) }, fnResizeButtons: function () { for (var d in ZeroClipboard_TableTools.clients) { if (d) { var e = ZeroClipboard_TableTools.clients[d]; if (typeof e.domElement != "undefined" && e.domElement.parentNode) { e.positionElement() } } } }, fnResizeRequired: function () { for (var d in ZeroClipboard_TableTools.clients) { if (d) { var e = ZeroClipboard_TableTools.clients[d]; if (typeof e.domElement != "undefined" && e.domElement.parentNode == this.dom.container && e.sized === false) { return true } } } return false }, fnPrint: function (d, e) { if (e === undefined) { e = {} } if (d === undefined || d) { this._fnPrintStart(e) } else { this._fnPrintEnd() } }, fnInfo: function (e, f) { var d = a.createElement("div"); d.className = this.classes.print.info; d.innerHTML = e; a.body.appendChild(d); setTimeout(function () { c(d).fadeOut("normal", function () { a.body.removeChild(d) }) }, f) }, _fnConstruct: function (e) { var d = this; this._fnCustomiseSettings(e); this.dom.container = a.createElement(this.s.tags.container); this.dom.container.className = this.classes.container; if (this.s.select.type != "none") { this._fnRowSelectConfig() } this._fnButtonDefinations(this.s.buttonSet, this.dom.container); this.s.dt.aoDestroyCallback.push({ sName: "TableTools", fn: function () { d.dom.container.innerHTML = "" } }) }, _fnCustomiseSettings: function (d) { if (typeof this.s.dt._TableToolsInit == "undefined") { this.s.master = true; this.s.dt._TableToolsInit = true } this.dom.table = this.s.dt.nTable; this.s.custom = c.extend({}, TableTools.DEFAULTS, d); this.s.swfPath = this.s.custom.sSwfPath; if (typeof ZeroClipboard_TableTools != "undefined") { ZeroClipboard_TableTools.moviePath = this.s.swfPath } this.s.select.type = this.s.custom.sRowSelect; this.s.select.preRowSelect = this.s.custom.fnPreRowSelect; this.s.select.postSelected = this.s.custom.fnRowSelected; this.s.select.postDeselected = this.s.custom.fnRowDeselected; if (this.s.custom.sSelectedClass) { this.classes.select.row = this.s.custom.sSelectedClass } this.s.tags = this.s.custom.oTags; this.s.buttonSet = this.s.custom.aButtons }, _fnButtonDefinations: function (g, j) { var e; for (var f = 0, d = g.length; f < d; f++) { if (typeof g[f] == "string") { if (typeof TableTools.BUTTONS[g[f]] == "undefined") { alert("TableTools: Warning - unknown button type: " + g[f]); continue } e = c.extend({}, TableTools.BUTTONS[g[f]], true) } else { if (typeof TableTools.BUTTONS[g[f].sExtends] == "undefined") { alert("TableTools: Warning - unknown button type: " + g[f].sExtends); continue } var h = c.extend({}, TableTools.BUTTONS[g[f].sExtends], true); e = c.extend(h, g[f], true) } j.appendChild(this._fnCreateButton(e, c(j).hasClass(this.classes.collection.container))) } }, _fnCreateButton: function (f, d) { var e = this._fnButtonBase(f, d); if (f.sAction.match(/flash/)) { this._fnFlashConfig(e, f) } else { if (f.sAction == "text") { this._fnTextConfig(e, f) } else { if (f.sAction == "div") { this._fnTextConfig(e, f) } else { if (f.sAction == "collection") { this._fnTextConfig(e, f); this._fnCollectionConfig(e, f) } } } } return e }, _fnButtonBase: function (k, e) { var f, h, l; if (e) { f = k.sTag !== "default" ? k.sTag : this.s.tags.collection.button; h = k.sLinerTag !== "default" ? k.sLiner : this.s.tags.collection.liner; l = this.classes.collection.buttons.normal } else { f = k.sTag !== "default" ? k.sTag : this.s.tags.button; h = k.sLinerTag !== "default" ? k.sLiner : this.s.tags.liner; l = this.classes.buttons.normal } var g = a.createElement(f), d = a.createElement(h), j = this._fnGetMasterSettings(); g.className = l + " " + k.sButtonClass; g.setAttribute("id", "ToolTables_" + this.s.dt.sInstance + "_" + j.buttonCounter); g.appendChild(d); d.innerHTML = k.sButtonText; j.buttonCounter++; return g }, _fnGetMasterSettings: function () { if (this.s.master) { return this.s } else { var f = TableTools._aInstances; for (var e = 0, d = f.length; e < d; e++) { if (this.dom.table == f[e].s.dt.nTable) { return f[e].s } } } }, _fnCollectionConfig: function (d, e) { var f = a.createElement(this.s.tags.collection.container); f.style.display = "none"; f.className = this.classes.collection.container; e._collection = f; a.body.appendChild(f); this._fnButtonDefinations(e.aButtons, f) }, _fnCollectionShow: function (h, l) { var o = this, q = c(h).offset(), j = l._collection, e = q.left, d = q.top + c(h).outerHeight(), n = c(b).height(), k = c(a).height(), m = c(b).width(), p = c(a).width(); j.style.position = "absolute"; j.style.left = e + "px"; j.style.top = d + "px"; j.style.display = "block"; c(j).css("opacity", 0); var f = a.createElement("div"); f.style.position = "absolute"; f.style.left = "0px"; f.style.top = "0px"; f.style.height = ((n > k) ? n : k) + "px"; f.style.width = ((m > p) ? m : p) + "px"; f.className = this.classes.collection.background; c(f).css("opacity", 0); a.body.appendChild(f); a.body.appendChild(j); var g = c(j).outerWidth(); var r = c(j).outerHeight(); if (e + g > p) { j.style.left = (p - g) + "px" } if (d + r > k) { j.style.top = (d - r - c(h).outerHeight()) + "px" } this.dom.collection.collection = j; this.dom.collection.background = f; setTimeout(function () { c(j).animate({ opacity: 1 }, 500); c(f).animate({ opacity: 0.25 }, 500) }, 10); this.fnResizeButtons(); c(f).click(function () { o._fnCollectionHide.call(o, null, null) }) }, _fnCollectionHide: function (d, e) { if (e !== null && e.sExtends == "collection") { return } if (this.dom.collection.collection !== null) { c(this.dom.collection.collection).animate({ opacity: 0 }, 500, function (f) { this.style.display = "none" }); c(this.dom.collection.background).animate({ opacity: 0 }, 500, function (f) { this.parentNode.removeChild(this) }); this.dom.collection.collection = null; this.dom.collection.background = null } }, _fnRowSelectConfig: function () { if (this.s.master) { var g = this, e, d, f = this.s.dt, h = this.s.dt.aoOpenRows; c(f.nTable).addClass(this.classes.select.table); c("tr", f.nTBody).live("click", function (j) { if (this.parentNode != f.nTBody) { return } if (f.oInstance.fnGetData(this) === null) { return } if (g.fnIsSelected(this)) { g._fnRowDeselect(this, j) } else { if (g.s.select.type == "single") { g.fnSelectNone(); g._fnRowSelect(this, j) } else { if (g.s.select.type == "multi") { g._fnRowSelect(this, j) } } } }); f.oApi._fnCallbackReg(f, "aoRowCreatedCallback", function (l, k, j) { if (f.aoData[j]._DTTT_selected) { c(l).addClass(g.classes.select.row) } }, "TableTools-SelectAll") } }, _fnRowSelect: function (m, l) { var j = this, k = this._fnSelectData(m), g = k.length === 0 ? null : k[0].nTr, f = [], h, d; for (h = 0, d = k.length; h < d; h++) { if (k[h].nTr) { f.push(k[h].nTr) } } if (this.s.select.preRowSelect !== null && !this.s.select.preRowSelect.call(this, l, f, true)) { return } for (h = 0, d = k.length; h < d; h++) { k[h]._DTTT_selected = true; if (k[h].nTr) { c(k[h].nTr).addClass(j.classes.select.row) } } if (this.s.select.postSelected !== null) { this.s.select.postSelected.call(this, f) } TableTools._fnEventDispatch(this, "select", f, true) }, _fnRowDeselect: function (m, l) { var h = this, j = this._fnSelectData(m), f = j.length === 0 ? null : j[0].nTr, k = [], g, d; for (g = 0, d = j.length; g < d; g++) { if (j[g].nTr) { k.push(j[g].nTr) } } if (this.s.select.preRowSelect !== null && !this.s.select.preRowSelect.call(this, l, k, false)) { return } for (g = 0, d = j.length; g < d; g++) { j[g]._DTTT_selected = false; if (j[g].nTr) { c(j[g].nTr).removeClass(h.classes.select.row) } } if (this.s.select.postDeselected !== null) { this.s.select.postDeselected.call(this, k) } TableTools._fnEventDispatch(this, "select", k, false) }, _fnSelectData: function (g) { var e = [], h, f, d; if (g.nodeName) { h = this.s.dt.oInstance.fnGetPosition(g); e.push(this.s.dt.aoData[h]) } else { if (typeof g.length !== "undefined") { for (f = 0, d = g.length; f < d; f++) { if (g[f].nodeName) { h = this.s.dt.oInstance.fnGetPosition(g[f]); e.push(this.s.dt.aoData[h]) } else { if (typeof g[f] === "number") { e.push(this.s.dt.aoData[g[f]]) } else { e.push(g[f]) } } } return e } else { e.push(g) } } return e }, _fnTextConfig: function (d, f) { var e = this; if (f.fnInit !== null) { f.fnInit.call(this, d, f) } if (f.sToolTip !== "") { d.title = f.sToolTip } c(d).hover(function () { if (f.fnMouseover !== null) { f.fnMouseover.call(this, d, f, null) } }, function () { if (f.fnMouseout !== null) { f.fnMouseout.call(this, d, f, null) } }); if (f.fnSelect !== null) { TableTools._fnEventListen(this, "select", function (g) { f.fnSelect.call(e, d, f, g) }) } c(d).click(function (g) { if (f.fnClick !== null) { f.fnClick.call(e, d, f, null) } if (f.fnComplete !== null) { f.fnComplete.call(e, d, f, null, null) } e._fnCollectionHide(d, f) }) }, _fnFlashConfig: function (e, g) { var f = this; var d = new ZeroClipboard_TableTools.Client(); if (g.fnInit !== null) { g.fnInit.call(this, e, g) } d.setHandCursor(true); if (g.sAction == "flash_save") { d.setAction("save"); d.setCharSet((g.sCharSet == "utf16le") ? "UTF16LE" : "UTF8"); d.setBomInc(g.bBomInc); d.setFileName(g.sFileName.replace("*", this.fnGetTitle(g))) } else { if (g.sAction == "flash_pdf") { d.setAction("pdf"); d.setFileName(g.sFileName.replace("*", this.fnGetTitle(g))) } else { d.setAction("copy") } } d.addEventListener("mouseOver", function (h) { if (g.fnMouseover !== null) { g.fnMouseover.call(f, e, g, d) } }); d.addEventListener("mouseOut", function (h) { if (g.fnMouseout !== null) { g.fnMouseout.call(f, e, g, d) } }); d.addEventListener("mouseDown", function (h) { if (g.fnClick !== null) { g.fnClick.call(f, e, g, d) } }); d.addEventListener("complete", function (h, j) { if (g.fnComplete !== null) { g.fnComplete.call(f, e, g, d, j) } f._fnCollectionHide(e, g) }); this._fnFlashGlue(d, e, g.sToolTip) }, _fnFlashGlue: function (d, f, g) { var e = this; var h = f.getAttribute("id"); if (a.getElementById(h)) { d.glue(f, g) } else { setTimeout(function () { e._fnFlashGlue(d, f, g) }, 100) } }, _fnFlashSetText: function (h, e) { var g = this._fnChunkData(e, 8192); h.clearText(); for (var f = 0, d = g.length; f < d; f++) { h.appendText(g[f]) } }, _fnColumnTargets: function (d) { var f = []; var e = this.s.dt; if (typeof d == "object") { for (i = 0, iLen = e.aoColumns.length; i < iLen; i++) { f.push(false) } for (i = 0, iLen = d.length; i < iLen; i++) { f[d[i]] = true } } else { if (d == "visible") { for (i = 0, iLen = e.aoColumns.length; i < iLen; i++) { f.push(e.aoColumns[i].bVisible ? true : false) } } else { if (d == "hidden") { for (i = 0, iLen = e.aoColumns.length; i < iLen; i++) { f.push(e.aoColumns[i].bVisible ? false : true) } } else { if (d == "sortable") { for (i = 0, iLen = e.aoColumns.length; i < iLen; i++) { f.push(e.aoColumns[i].bSortable ? true : false) } } else { for (i = 0, iLen = e.aoColumns.length; i < iLen; i++) { f.push(true) } } } } } return f }, _fnNewline: function (d) { if (d.sNewLine == "auto") { return navigator.userAgent.match(/Windows/) ? "\r\n" : "\n" } else { return d.sNewLine } }, _fnGetDataTablesData: function (l) { var t, r, s, w; var f, h = [], d = "", e; var q = this.s.dt, g, n; var k = new RegExp(l.sFieldBoundary, "g"); var p = this._fnColumnTargets(l.mColumns); var u = (typeof l.bSelectedOnly != "undefined") ? l.bSelectedOnly : false; if (l.bHeader) { f = []; for (t = 0, r = q.aoColumns.length; t < r; t++) { if (p[t]) { d = q.aoColumns[t].sTitle.replace(/\n/g, " ").replace(/<.*?>/g, "").replace(/^\s+|\s+$/g, ""); d = this._fnHtmlDecode(d); f.push(this._fnBoundData(d, l.sFieldBoundary, k)) } } h.push(f.join(l.sFieldSeperator)) } var m = q.aiDisplay; var v = this.fnGetSelected(); if (this.s.select.type !== "none" && u && v.length !== 0) { m = []; for (t = 0, r = v.length; t < r; t++) { m.push(q.oInstance.fnGetPosition(v[t])) } } for (s = 0, w = m.length; s < w; s++) { g = q.aoData[m[s]].nTr; f = []; for (t = 0, r = q.aoColumns.length; t < r; t++) { if (p[t]) { var o = q.oApi._fnGetCellData(q, m[s], t, "display"); if (l.fnCellRender) { d = l.fnCellRender(o, t, g, m[s]) + "" } else { if (typeof o == "string") { d = o.replace(/\n/g, " "); d = d.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi, "$1$2$3"); d = d.replace(/<.*?>/g, "") } else { d = o + "" } } d = d.replace(/^\s+/, "").replace(/\s+$/, ""); d = this._fnHtmlDecode(d); f.push(this._fnBoundData(d, l.sFieldBoundary, k)) } } h.push(f.join(l.sFieldSeperator)); if (l.bOpenRows) { e = c.grep(q.aoOpenRows, function (j) { return j.nParent === g }); if (e.length === 1) { d = this._fnBoundData(c("td", e[0].nTr).html(), l.sFieldBoundary, k); h.push(d) } } } if (l.bFooter && q.nTFoot !== null) { f = []; for (t = 0, r = q.aoColumns.length; t < r; t++) { if (p[t] && q.aoColumns[t].nTf !== null) { d = q.aoColumns[t].nTf.innerHTML.replace(/\n/g, " ").replace(/<.*?>/g, ""); d = this._fnHtmlDecode(d); f.push(this._fnBoundData(d, l.sFieldBoundary, k)) } } h.push(f.join(l.sFieldSeperator)) } _sLastData = h.join(this._fnNewline(l)); return _sLastData }, _fnBoundData: function (d, f, e) { if (f === "") { return d } else { return f + d.replace(e, f + f) + f } }, _fnChunkData: function (d, f) { var g = []; var h = d.length; for (var e = 0; e < h; e += f) { if (e + f < h) { g.push(d.substring(e, e + f)) } else { g.push(d.substring(e, h)) } } return g }, _fnHtmlDecode: function (d) { if (d.indexOf("&") === -1) { return d } var e = a.createElement("div"); return d.replace(/&([^\s]*);/g, function (f, g) { if (f.substr(1, 1) === "#") { return String.fromCharCode(Number(g.substr(1))) } else { e.innerHTML = f; return e.childNodes[0].nodeValue } }) }, _fnPrintStart: function (j) { var h = this; var f = this.s.dt; this._fnPrintHideNodes(f.nTable); this.s.print.saveStart = f._iDisplayStart; this.s.print.saveLength = f._iDisplayLength; if (j.bShowAll) { f._iDisplayStart = 0; f._iDisplayLength = -1; f.oApi._fnCalculateEnd(f); f.oApi._fnDraw(f) } if (f.oScroll.sX !== "" || f.oScroll.sY !== "") { this._fnPrintScrollStart(f); c(this.s.dt.nTable).bind("draw.DTTT_Print", function () { h._fnPrintScrollStart(f) }) } var e = f.aanFeatures; for (var k in e) { if (k != "i" && k != "t" && k.length == 1) { for (var g = 0, d = e[k].length; g < d; g++) { this.dom.print.hidden.push({ node: e[k][g], display: "_blank" }); e[k][g].style.display = "none" } } } c(a.body).addClass(this.classes.print.body); if (j.sInfo !== "") { this.fnInfo(j.sInfo, 3000) } if (j.sMessage) { this.dom.print.message = a.createElement("div"); this.dom.print.message.className = this.classes.print.message; this.dom.print.message.innerHTML = j.sMessage; a.body.insertBefore(this.dom.print.message, a.body.childNodes[0]) } this.s.print.saveScroll = c(b).scrollTop(); b.scrollTo(0, 0); c(a).bind("keydown.DTTT", function (l) { if (l.keyCode == 27) { l.preventDefault(); h._fnPrintEnd.call(h, l) } }) }, _fnPrintEnd: function (j) { var g = this; var d = this.s.dt; var h = this.s.print; var f = this.dom.print; this._fnPrintShowNodes(); if (d.oScroll.sX !== "" || d.oScroll.sY !== "") { c(this.s.dt.nTable).unbind("draw.DTTT_Print"); this._fnPrintScrollEnd() } b.scrollTo(0, h.saveScroll); if (f.message !== null) { a.body.removeChild(f.message); f.message = null } c(a.body).removeClass("DTTT_Print"); d._iDisplayStart = h.saveStart; d._iDisplayLength = h.saveLength; d.oApi._fnCalculateEnd(d); d.oApi._fnDraw(d); c(a).unbind("keydown.DTTT") }, _fnPrintScrollStart: function () { var f = this.s.dt, h = f.nScrollHead.getElementsByTagName("div")[0], d = h.getElementsByTagName("table")[0], j = f.nTable.parentNode; var e = f.nTable.getElementsByTagName("thead"); if (e.length > 0) { f.nTable.removeChild(e[0]) } if (f.nTFoot !== null) { var g = f.nTable.getElementsByTagName("tfoot"); if (g.length > 0) { f.nTable.removeChild(g[0]) } } e = f.nTHead.cloneNode(true); f.nTable.insertBefore(e, f.nTable.childNodes[0]); if (f.nTFoot !== null) { g = f.nTFoot.cloneNode(true); f.nTable.insertBefore(g, f.nTable.childNodes[1]) } if (f.oScroll.sX !== "") { f.nTable.style.width = c(f.nTable).outerWidth() + "px"; j.style.width = c(f.nTable).outerWidth() + "px"; j.style.overflow = "visible" } if (f.oScroll.sY !== "") { j.style.height = c(f.nTable).outerHeight() + "px"; j.style.overflow = "visible" } }, _fnPrintScrollEnd: function () { var d = this.s.dt, e = d.nTable.parentNode; if (d.oScroll.sX !== "") { e.style.width = d.oApi._fnStringToCss(d.oScroll.sX); e.style.overflow = "auto" } if (d.oScroll.sY !== "") { e.style.height = d.oApi._fnStringToCss(d.oScroll.sY); e.style.overflow = "auto" } }, _fnPrintShowNodes: function () { var f = this.dom.print.hidden; for (var e = 0, d = f.length; e < d; e++) { f[e].node.style.display = f[e].display } f.splice(0, f.length) }, _fnPrintHideNodes: function (e) { var g = this.dom.print.hidden; var j = e.parentNode; var k = j.childNodes; for (var f = 0, d = k.length; f < d; f++) { if (k[f] != e && k[f].nodeType == 1) { var h = c(k[f]).css("display"); if (h != "none") { g.push({ node: k[f], display: h }); k[f].style.display = "none" } } } if (j.nodeName != "BODY") { this._fnPrintHideNodes(j) } } }; TableTools._aInstances = []; TableTools._aListeners = []; TableTools.fnGetMasters = function () { var e = []; for (var f = 0, d = TableTools._aInstances.length; f < d; f++) { if (TableTools._aInstances[f].s.master) { e.push(TableTools._aInstances[f]) } } return e }; TableTools.fnGetInstance = function (f) { if (typeof f != "object") { f = a.getElementById(f) } for (var e = 0, d = TableTools._aInstances.length; e < d; e++) { if (TableTools._aInstances[e].s.master && TableTools._aInstances[e].dom.table == f) { return TableTools._aInstances[e] } } return null }; TableTools._fnEventListen = function (f, e, d) { TableTools._aListeners.push({ that: f, type: e, fn: d }) }; TableTools._fnEventDispatch = function (k, h, j, g) { var f = TableTools._aListeners; for (var e = 0, d = f.length; e < d; e++) { if (k.dom.table == f[e].that.dom.table && f[e].type == h) { f[e].fn(j, g) } } }; TableTools.buttonBase = { sAction: "text", sTag: "default", sLinerTag: "default", sButtonClass: "DTTT_button_text", sButtonText: "Button text", sTitle: "", sToolTip: "", sCharSet: "utf8", bBomInc: false, sFileName: "*.xls", sFieldBoundary: "", sFieldSeperator: "\t", sNewLine: "auto", mColumns: "all", bHeader: true, bFooter: true, bOpenRows: false, bSelectedOnly: false, fnMouseover: null, fnMouseout: null, fnClick: null, fnSelect: null, fnComplete: null, fnInit: null, fnCellRender: null }; TableTools.BUTTONS = { csv: c.extend({}, TableTools.buttonBase, { sAction: "flash_save", sButtonClass: "DTTT_button_csv", sButtonText: "<img src='/_LAYOUTS/Riyadh.EServices/Images/xslico.png' width='22px' height='22px' />", sFieldBoundary: '"', sFieldSeperator: ",", fnClick: function (e, f, d) { this.fnSetText(d, this.fnGetTableData(f)) } }), xls: c.extend({}, TableTools.buttonBase, { sAction: "flash_save", sCharSet: "utf16le", bBomInc: true, sButtonClass: "DTTT_button_xls", sButtonText: "<img src='/_LAYOUTS/Riyadh.EServices/Images/xslico.png' width='22px' height='22px' />", fnClick: function (e, f, d) { this.fnSetText(d, this.fnGetTableData(f)) } }), copy: c.extend({}, TableTools.buttonBase, { sAction: "flash_copy", sButtonClass: "DTTT_button_copy", sButtonText: "<img src='/_LAYOUTS/Riyadh.EServices/Images/copyico.png' width='22px' height='22px' />", fnClick: function (e, f, d) { this.fnSetText(d, this.fnGetTableData(f)) }, fnComplete: function (h, j, g, k) { var e = k.split("\n").length, d = this.s.dt.nTFoot === null ? e - 1 : e - 2, f = (d == 1) ? "" : "s"; this.fnInfo("<h6>Table copied</h6><p>Copied " + d + " row" + f + " to the clipboard.</p>", 1500) } }), pdf: c.extend({}, TableTools.buttonBase, { sAction: "flash_pdf", sNewLine: "\n", sFileName: "*.pdf", sCharSet: "utf8", sButtonClass: "DTTT_button_pdf", sButtonText: "pdf", sPdfOrientation: "portrait", sPdfSize: "A4", sPdfMessage: "", fnClick: function (e, f, d) { this.fnSetText(d, "title:" + this.fnGetTitle(f) + "\nmessage:" + f.sPdfMessage + "\ncolWidth:" + this.fnCalcColRatios(f) + "\norientation:" + f.sPdfOrientation + "\nsize:" + f.sPdfSize + "\n--/TableToolsOpts--\n" + this.fnGetTableData(f)) } }), print: c.extend({}, TableTools.buttonBase, { sInfo: "<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.", sMessage: null, bShowAll: true, sToolTip: "View print view", sButtonClass: "DTTT_button_print", sButtonText: "<img src='/_LAYOUTS/Riyadh.EServices/Images/printico.png' width='22px' height='22px' />", fnClick: function (d, e) { this.fnPrint(true, e) } }), text: c.extend({}, TableTools.buttonBase), select: c.extend({}, TableTools.buttonBase, { sButtonText: "Select button", fnSelect: function (d, e) { if (this.fnGetSelected().length !== 0) { c(d).removeClass(this.classes.buttons.disabled) } else { c(d).addClass(this.classes.buttons.disabled) } }, fnInit: function (d, e) { c(d).addClass(this.classes.buttons.disabled) } }), select_single: c.extend({}, TableTools.buttonBase, { sButtonText: "Select button", fnSelect: function (e, f) { var d = this.fnGetSelected().length; if (d == 1) { c(e).removeClass(this.classes.buttons.disabled) } else { c(e).addClass(this.classes.buttons.disabled) } }, fnInit: function (d, e) { c(d).addClass(this.classes.buttons.disabled) } }), select_all: c.extend({}, TableTools.buttonBase, { sButtonText: "Select all", fnClick: function (d, e) { this.fnSelectAll() }, fnSelect: function (d, e) { if (this.fnGetSelected().length == this.s.dt.fnRecordsDisplay()) { c(d).addClass(this.classes.buttons.disabled) } else { c(d).removeClass(this.classes.buttons.disabled) } } }), select_none: c.extend({}, TableTools.buttonBase, { sButtonText: "Deselect all", fnClick: function (d, e) { this.fnSelectNone() }, fnSelect: function (d, e) { if (this.fnGetSelected().length !== 0) { c(d).removeClass(this.classes.buttons.disabled) } else { c(d).addClass(this.classes.buttons.disabled) } }, fnInit: function (d, e) { c(d).addClass(this.classes.buttons.disabled) } }), ajax: c.extend({}, TableTools.buttonBase, { sAjaxUrl: "/xhr.php", sButtonText: "Ajax button", fnClick: function (e, f) { var d = this.fnGetTableData(f); c.ajax({ url: f.sAjaxUrl, data: [{ name: "tableData", value: d }], success: f.fnAjaxComplete, dataType: "json", type: "POST", cache: false, error: function () { alert("Error detected when sending table data to server") } }) }, fnAjaxComplete: function (d) { alert("Ajax complete") } }), div: c.extend({}, TableTools.buttonBase, { sAction: "div", sTag: "div", sButtonClass: "DTTT_nonbutton", sButtonText: "Text button" }), collection: c.extend({}, TableTools.buttonBase, { sAction: "collection", sButtonClass: "DTTT_button_collection", sButtonText: "Collection", fnClick: function (d, e) { this._fnCollectionShow(d, e) } }) }; TableTools.classes = { container: "DTTT_container", buttons: { normal: "DTTT_button", disabled: "DTTT_disabled" }, collection: { container: "DTTT_collection", background: "DTTT_collection_background", buttons: { normal: "DTTT_button", disabled: "DTTT_disabled" } }, select: { table: "DTTT_selectable", row: "DTTT_selected" }, print: { body: "DTTT_Print", info: "DTTT_print_info", message: "DTTT_PrintMessage" } }; TableTools.classes_themeroller = { container: "DTTT_container ui-buttonset ui-buttonset-multi", buttons: { normal: "DTTT_button ui-button ui-state-default" }, collection: { container: "DTTT_collection ui-buttonset ui-buttonset-multi" } }; TableTools.DEFAULTS = { sSwfPath: "/_LAYOUTS/Riyadh.EServices/Images/copy_csv_xls_pdf.swf", sRowSelect: "none", sSelectedClass: null, fnPreRowSelect: null, fnRowSelected: null, fnRowDeselected: null, aButtons: ["copy", "xls", "print"], oTags: { container: "div", button: "a", liner: "span", collection: { container: "div", button: "a", liner: "span" } } }; TableTools.prototype.CLASS = "TableTools"; TableTools.VERSION = "2.1.4"; TableTools.prototype.VERSION = TableTools.VERSION; if (typeof c.fn.dataTable == "function" && typeof c.fn.dataTableExt.fnVersionCheck == "function" && c.fn.dataTableExt.fnVersionCheck("1.9.0")) { c.fn.dataTableExt.aoFeatures.push({ fnInit: function (f) { var e = typeof f.oInit.oTableTools != "undefined" ? f.oInit.oTableTools : {}; var d = new TableTools(f.oInstance, e); TableTools._aInstances.push(d); return d.dom.container }, cFeature: "T", sFeature: "TableTools" }) } else { } c.fn.DataTable.TableTools = TableTools })(jQuery, window, document);
var ZeroClipboard_TableTools = { version: "1.0.4-TableTools2", clients: {}, moviePath: "", nextId: 1, $: function (a) { if (typeof (a) == "string") { a = document.getElementById(a) } if (!a.addClass) { a.hide = function () { this.style.display = "none" }; a.show = function () { this.style.display = "" }; a.addClass = function (b) { this.removeClass(b); this.className += " " + b }; a.removeClass = function (b) { this.className = this.className.replace(new RegExp("\\s*" + b + "\\s*"), " ").replace(/^\s+/, "").replace(/\s+$/, "") }; a.hasClass = function (b) { return !!this.className.match(new RegExp("\\s*" + b + "\\s*")) } } return a }, setMoviePath: function (a) { this.moviePath = a }, dispatch: function (d, b, c) { var a = this.clients[d]; if (a) { a.receiveEvent(b, c) } }, register: function (b, a) { this.clients[b] = a }, getDOMObjectPosition: function (b) { var a = { left: 0, top: 0, width: b.width ? b.width : b.offsetWidth, height: b.height ? b.height : b.offsetHeight }; if (b.style.width != "") { a.width = b.style.width.replace("px", "") } if (b.style.height != "") { a.height = b.style.height.replace("px", "") } while (b) { a.left += b.offsetLeft; a.top += b.offsetTop; b = b.offsetParent } return a }, Client: function (a) { this.handlers = {}; this.id = ZeroClipboard_TableTools.nextId++; this.movieId = "ZeroClipboard_TableToolsMovie_" + this.id; ZeroClipboard_TableTools.register(this.id, this); if (a) { this.glue(a) } } }; ZeroClipboard_TableTools.Client.prototype = { id: 0, ready: false, movie: null, clipText: "", fileName: "", action: "copy", handCursorEnabled: true, cssEffects: true, handlers: null, sized: false, glue: function (c, d) { this.domElement = ZeroClipboard_TableTools.$(c); var e = 99; if (this.domElement.style.zIndex) { e = parseInt(this.domElement.style.zIndex) + 1 } var b = ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement); this.div = document.createElement("div"); var a = this.div.style; a.position = "absolute"; a.left = "0px"; a.top = "0px"; a.width = (b.width) + "px"; a.height = b.height + "px"; a.zIndex = e; if (typeof d != "undefined" && d != "") { this.div.title = d } if (b.width != 0 && b.height != 0) { this.sized = true } if (this.domElement) { this.domElement.appendChild(this.div); this.div.innerHTML = this.getHTML(b.width, b.height) } }, positionElement: function () { var c = ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement); var b = this.div.style; b.position = "absolute"; b.width = c.width + "px"; b.height = c.height + "px"; if (c.width != 0 && c.height != 0) { this.sized = true } else { return } var a = this.div.childNodes[0]; a.width = c.width; a.height = c.height }, getHTML: function (d, a) { var c = ""; var b = "id=" + this.id + "&width=" + d + "&height=" + a; if (navigator.userAgent.match(/MSIE/)) { var e = location.href.match(/^https/i) ? "https://" : "http://"; c += '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="' + e + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="' + d + '" height="' + a + '" id="' + this.movieId + '" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="' + ZeroClipboard_TableTools.moviePath + '" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="' + b + '"/><param name="wmode" value="transparent"/></object>' } else { c += '<embed id="' + this.movieId + '" src="' + ZeroClipboard_TableTools.moviePath + '" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="' + d + '" height="' + a + '" name="' + this.movieId + '" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="' + b + '" wmode="transparent" />' } return c }, hide: function () { if (this.div) { this.div.style.left = "-2000px" } }, show: function () { this.reposition() }, destroy: function () { if (this.domElement && this.div) { this.hide(); this.div.innerHTML = ""; var a = document.getElementsByTagName("body")[0]; try { a.removeChild(this.div) } catch (b) { } this.domElement = null; this.div = null } }, reposition: function (c) { if (c) { this.domElement = ZeroClipboard_TableTools.$(c); if (!this.domElement) { this.hide() } } if (this.domElement && this.div) { var b = ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement); var a = this.div.style; a.left = "" + b.left + "px"; a.top = "" + b.top + "px" } }, clearText: function () { this.clipText = ""; if (this.ready) { this.movie.clearText() } }, appendText: function (a) { this.clipText += a; if (this.ready) { this.movie.appendText(a) } }, setText: function (a) { this.clipText = a; if (this.ready) { this.movie.setText(a) } }, setCharSet: function (a) { this.charSet = a; if (this.ready) { this.movie.setCharSet(a) } }, setBomInc: function (a) { this.incBom = a; if (this.ready) { this.movie.setBomInc(a) } }, setFileName: function (a) { this.fileName = a; if (this.ready) { this.movie.setFileName(a) } }, setAction: function (a) { this.action = a; if (this.ready) { this.movie.setAction(a) } }, addEventListener: function (a, b) { a = a.toString().toLowerCase().replace(/^on/, ""); if (!this.handlers[a]) { this.handlers[a] = [] } this.handlers[a].push(b) }, setHandCursor: function (a) { this.handCursorEnabled = a; if (this.ready) { this.movie.setHandCursor(a) } }, setCSSEffects: function (a) { this.cssEffects = !!a }, receiveEvent: function (d, e) { d = d.toString().toLowerCase().replace(/^on/, ""); switch (d) { case "load": this.movie = document.getElementById(this.movieId); if (!this.movie) { var c = this; setTimeout(function () { c.receiveEvent("load", null) }, 1); return } if (!this.ready && navigator.userAgent.match(/Firefox/) && navigator.userAgent.match(/Windows/)) { var c = this; setTimeout(function () { c.receiveEvent("load", null) }, 100); this.ready = true; return } this.ready = true; this.movie.clearText(); this.movie.appendText(this.clipText); this.movie.setFileName(this.fileName); this.movie.setAction(this.action); this.movie.setCharSet(this.charSet); this.movie.setBomInc(this.incBom); this.movie.setHandCursor(this.handCursorEnabled); break; case "mouseover": if (this.domElement && this.cssEffects) { if (this.recoverActive) { this.domElement.addClass("active") } } break; case "mouseout": if (this.domElement && this.cssEffects) { this.recoverActive = false; if (this.domElement.hasClass("active")) { this.domElement.removeClass("active"); this.recoverActive = true } } break; case "mousedown": if (this.domElement && this.cssEffects) { this.domElement.addClass("active") } break; case "mouseup": if (this.domElement && this.cssEffects) { this.domElement.removeClass("active"); this.recoverActive = false } break } if (this.handlers[d]) { for (var b = 0, a = this.handlers[d].length; b < a; b++) { var f = this.handlers[d][b]; if (typeof (f) == "function") { f(this, e) } else { if ((typeof (f) == "object") && (f.length == 2)) { f[0][f[1]](this, e) } else { if (typeof (f) == "string") { window[f](this, e) } } } } } } };


(function (b) { function a() { var c = this; c.defaults = { hideMode: "fadeToggle", defaultSearchMode: "parent", defaultTarget: ".content", throwOnMissingTarget: true, keepStateInCookie: false, cookieName: "simple-expand" }; c.settings = {}; b.extend(c.settings, c.defaults); c.findLevelOneDeep = function (e, f, d) { return e.find(f).filter(function () { return !b(this).parentsUntil(e, d).length }) }; c.setInitialState = function (f, d) { var e = c.readState(f); if (e) { f.removeClass("collapsed").addClass("expanded"); c.show(d) } else { f.removeClass("expanded").addClass("collapsed"); c.hide(d) } }; c.hide = function (d) { if (c.settings.hideMode === "fadeToggle") { d.hide() } else { if (c.settings.hideMode === "basic") { d.hide() } } }; c.show = function (d) { if (c.settings.hideMode === "fadeToggle") { d.show() } else { if (c.settings.hideMode === "basic") { d.show() } } }; c.checkKeepStateInCookiePreconditions = function () { if (c.settings.keepStateInCookie && b.cookie === undefined) { throw new Error("simple-expand: keepStateInCookie option requires $.cookie to be defined.") } }; c.readCookie = function () { var d = b.cookie(c.settings.cookieName); if (d === null || d === "") { return {} } else { return JSON.parse(d) } }; c.readState = function (g) { if (!c.settings.keepStateInCookie) { return g.hasClass("expanded") } var f = g.attr("Id"); if (f === undefined) { return } var d = c.readCookie(); var e = d[f]; if (typeof e !== "undefined") { return d[f] === true } else { return g.hasClass("expanded") } }; c.saveState = function (g, e) { if (!c.settings.keepStateInCookie) { return } var f = g.attr("Id"); if (f === undefined) { return } var d = c.readCookie(); d[f] = e; b.cookie(c.settings.cookieName, JSON.stringify(d), { raw: true, path: window.location.pathname }) }; c.toggle = function (f, d) { var e = c.toggleCss(f); if (c.settings.hideMode === "fadeToggle") { d.fadeToggle(150) } else { if (c.settings.hideMode === "basic") { d.toggle() } else { if (b.isFunction(c.settings.hideMode)) { c.settings.hideMode(f, d, e) } } } c.saveState(f, e); return false }; c.toggleCss = function (d) { if (d.hasClass("expanded")) { d.toggleClass("collapsed expanded"); return false } else { d.toggleClass("expanded collapsed"); return true } }; c.findTargets = function (h, g, f) { var d = []; if (g === "absolute") { d = b(f) } else { if (g === "relative") { d = c.findLevelOneDeep(h, f, f) } else { if (g === "parent") { var e = h.parent(); do { d = c.findLevelOneDeep(e, f, f); if (d.length === 0) { e = e.parent() } } while (d.length === 0 && e.length !== 0) } } } return d }; c.activate = function (d, e) { b.extend(c.settings, e); c.checkKeepStateInCookiePreconditions(); d.each(function () { var i = b(this); var g = i.attr("data-expander-target") || c.settings.defaultTarget; var h = i.attr("data-expander-target-search") || c.settings.defaultSearchMode; var f = c.findTargets(i, h, g); if (f.length === 0) { if (c.settings.throwOnMissingTarget) { throw "simple-expand: Targets not found" } return this } c.setInitialState(i, f); i.click(function () { return c.toggle(i, f) }) }) } } window.SimpleExpand = a; b.fn.simpleexpand = function (d) { var c = new a(); c.activate(this, d); return this } }(jQuery));
!function (t, i, n, e) { "use strict"; var o, r, s, a, h, l, c, u, p, d, f, m, w, y, v, g, b, x, S, P, N, k, C, H, T, A, M, j = [].indexOf || function (t) { for (var i = 0, n = this.length; n > i; i++) if (i in this && this[i] === t) return i; return -1 }; N = "notify", P = N + "js", s = N + "!blank", C = { t: "top", m: "middle", b: "bottom", l: "left", c: "center", r: "right" }, w = ["l", "c", "r"], M = ["t", "m", "b"], b = ["t", "b", "l", "r"], x = { t: "b", m: null, b: "t", l: "r", c: null, r: "l" }, S = function (t) { var i; return i = [], n.each(t.split(/\W+/), function (t, n) { var e; return e = n.toLowerCase().charAt(0), C[e] ? i.push(e) : void 0 }), i }, A = {}, a = { name: "core", html: '<div class="' + P + '-wrapper">\n  <div class="' + P + '-arrow"></div>\n  <div class="' + P + '-container"></div>\n</div>', css: "." + P + "-corner {\n  position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n." + P + "-corner ." + P + "-wrapper,\n." + P + "-corner ." + P + "-container {\n  position: relative;\n  display: block;\n  height: inherit;\n  width: 100%;\n  margin: 3px;\n}\n\n." + P + "-wrapper {\n  z-index: 1;\n  position: absolute;\n  display: inline-block;\n  height: 0;\n  width: 100%;\n}\n\n." + P + "-container {\n  display: none;\n  z-index: 1;\n  position: absolute;\n  cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n  position: relative;\n}\n\n." + P + "-arrow {\n  position: absolute;\n  z-index: 2;\n  width: 0;\n  height: 0;\n}" }, T = { "border-radius": ["-webkit-", "-moz-"] }, f = function (t) { return A[t] }, r = function (i, e) { var o, r, s, a; if (!i) throw "Missing Style name"; if (!e) throw "Missing Style definition"; if (!e.html) throw "Missing Style HTML"; return (null != (a = A[i]) ? a.cssElem : void 0) && (t.console && console.warn("" + N + ": overwriting style '" + i + "'"), A[i].cssElem.remove()), e.name = i, A[i] = e, o = "", e.classes && n.each(e.classes, function (t, i) { return o += "." + P + "-" + e.name + "-" + t + " {\n", n.each(i, function (t, i) { return T[t] && n.each(T[t], function (n, e) { return o += "  " + e + t + ": " + i + ";\n" }), o += "  " + t + ": " + i + ";\n" }), o += "}\n" }), e.css && (o += "/* styles for " + e.name + " */\n" + e.css), o && (e.cssElem = g(o), e.cssElem.attr("id", "notify-" + e.name)), s = {}, r = n(e.html), p("html", r, s), p("text", r, s), e.fields = s }, g = function (t) { var i; i = h("style"), i.attr("type", "text/css"), n("head").append(i); try { i.html(t) } catch (e) { i[0].styleSheet.cssText = t } return i }, p = function (t, i, e) { var o; return "html" !== t && (t = "text"), o = "data-notify-" + t, u(i, "[" + o + "]").each(function () { var i; return i = n(this).attr(o), i || (i = s), e[i] = t }) }, u = function (t, i) { return t.is(i) ? t : t.find(i) }, k = { clickToHide: !0, autoHide: !0, autoHideDelay: 5e3, arrowShow: !0, arrowSize: 5, breakNewLines: !0, elementPosition: "bottom", globalPosition: "top right", style: "bootstrap", className: "error", showAnimation: "slideDown", showDuration: 400, hideAnimation: "slideUp", hideDuration: 200, gap: 5 }, v = function (t, i) { var e; return e = function () { }, e.prototype = t, n.extend(!0, new e, i) }, l = function (t) { return n.extend(k, t) }, h = function (t) { return n("<" + t + "></" + t + ">") }, m = {}, d = function (t) { var i; return t.is("[type=radio]") && (i = t.parents("form:first").find("[type=radio]").filter(function (i, e) { return n(e).attr("name") === t.attr("name") }), t = i.first()), t }, y = function (t, i, n) { var o, r; if ("string" == typeof n) n = parseInt(n, 10); else if ("number" != typeof n) return; if (!isNaN(n)) return o = C[x[i.charAt(0)]], r = i, t[o] !== e && (i = C[o.charAt(0)], n = -n), t[i] === e ? t[i] = n : t[i] += n, null }, H = function (t, i, n) { if ("l" === t || "t" === t) return 0; if ("c" === t || "m" === t) return n / 2 - i / 2; if ("r" === t || "b" === t) return n - i; throw "Invalid alignment" }, c = function (t) { return c.e = c.e || h("div"), c.e.text(t).html() }, o = function () { function t(t, i, e) { "string" == typeof e && (e = { className: e }), this.options = v(k, n.isPlainObject(e) ? e : {}), this.loadHTML(), this.wrapper = n(a.html), this.wrapper.data(P, this), this.arrow = this.wrapper.find("." + P + "-arrow"), this.container = this.wrapper.find("." + P + "-container"), this.container.append(this.userContainer), t && t.length && (this.elementType = t.attr("type"), this.originalElement = t, this.elem = d(t), this.elem.data(P, this), this.elem.before(this.wrapper)), this.container.hide(), this.run(i) } return t.prototype.loadHTML = function () { var t; return t = this.getStyle(), this.userContainer = n(t.html), this.userFields = t.fields }, t.prototype.show = function (t, i) { var n, e, o, r, s, a = this; if (e = function () { return t || a.elem || a.destroy(), i ? i() : void 0 }, s = this.container.parent().parents(":hidden").length > 0, o = this.container.add(this.arrow), n = [], s && t) r = "show"; else if (s && !t) r = "hide"; else if (!s && t) r = this.options.showAnimation, n.push(this.options.showDuration); else { if (s || t) return e(); r = this.options.hideAnimation, n.push(this.options.hideDuration) } return n.push(e), o[r].apply(o, n) }, t.prototype.setGlobalPosition = function () { var t, i, e, o, r, s, a, l; return l = this.getPosition(), a = l[0], s = l[1], r = C[a], t = C[s], o = a + "|" + s, i = m[o], i || (i = m[o] = h("div"), e = {}, e[r] = 0, "middle" === t ? e.top = "45%" : "center" === t ? e.left = "45%" : e[t] = 0, i.css(e).addClass("" + P + "-corner"), n("body").append(i)), i.prepend(this.wrapper) }, t.prototype.setElementPosition = function () { var t, i, e, o, r, s, a, h, l, c, u, p, d, f, m, v, g, S, P, N, k, T, A, z, D, E, L, O, I; for (A = this.getPosition(), N = A[0], S = A[1], P = A[2], u = this.elem.position(), h = this.elem.outerHeight(), p = this.elem.outerWidth(), l = this.elem.innerHeight(), c = this.elem.innerWidth(), z = this.wrapper.position(), r = this.container.height(), s = this.container.width(), f = C[N], v = x[N], g = C[v], a = {}, a[g] = "b" === N ? h : "r" === N ? p : 0, y(a, "top", u.top - z.top), y(a, "left", u.left - z.left), I = ["top", "left"], D = 0, L = I.length; L > D; D++) k = I[D], m = parseInt(this.elem.css("margin-" + k), 10), m && y(a, k, m); if (d = Math.max(0, this.options.gap - (this.options.arrowShow ? e : 0)), y(a, g, d), this.options.arrowShow) { for (e = this.options.arrowSize, i = n.extend({}, a), t = this.userContainer.css("border-color") || this.userContainer.css("background-color") || "white", E = 0, O = b.length; O > E; E++) k = b[E], T = C[k], k !== v && (o = T === f ? t : "transparent", i["border-" + T] = "" + e + "px solid " + o); y(a, C[v], e), j.call(b, S) >= 0 && y(i, C[S], 2 * e) } else this.arrow.hide(); return j.call(M, N) >= 0 ? (y(a, "left", H(S, s, p)), i && y(i, "left", H(S, e, c))) : j.call(w, N) >= 0 && (y(a, "top", H(S, r, h)), i && y(i, "top", H(S, e, l))), this.container.is(":visible") && (a.display = "block"), this.container.removeAttr("style").css(a), i ? this.arrow.removeAttr("style").css(i) : void 0 }, t.prototype.getPosition = function () { var t, i, n, e, o, r, s, a; if (i = this.options.position || (this.elem ? this.options.elementPosition : this.options.globalPosition), t = S(i), 0 === t.length && (t[0] = "b"), n = t[0], j.call(b, n) < 0) throw "Must be one of [" + b + "]"; return (1 === t.length || (e = t[0], j.call(M, e) >= 0 && (o = t[1], j.call(w, o) < 0)) || (r = t[0], j.call(w, r) >= 0 && (s = t[1], j.call(M, s) < 0))) && (t[1] = (a = t[0], j.call(w, a) >= 0 ? "m" : "l")), 2 === t.length && (t[2] = t[1]), t }, t.prototype.getStyle = function (t) { var i; if (t || (t = this.options.style), t || (t = "default"), i = A[t], !i) throw "Missing style: " + t; return i }, t.prototype.updateClasses = function () { var t, i; return t = ["base"], n.isArray(this.options.className) ? t = t.concat(this.options.className) : this.options.className && t.push(this.options.className), i = this.getStyle(), t = n.map(t, function (t) { return "" + P + "-" + i.name + "-" + t }).join(" "), this.userContainer.attr("class", t) }, t.prototype.run = function (t, i) { var e, o, r, a, h, l = this; if (n.isPlainObject(i) ? n.extend(this.options, i) : "string" === n.type(i) && (this.options.className = i), this.container && !t) return void this.show(!1); if (this.container || t) { o = {}, n.isPlainObject(t) ? o = t : o[s] = t; for (r in o) e = o[r], a = this.userFields[r], a && ("text" === a && (e = c(e), this.options.breakNewLines && (e = e.replace(/\n/g, "<br/>"))), h = r === s ? "" : "=" + r, u(this.userContainer, "[data-notify-" + a + h + "]").html(e)); return this.updateClasses(), this.elem ? this.setElementPosition() : this.setGlobalPosition(), this.show(!0), this.options.autoHide ? (clearTimeout(this.autohideTimer), this.autohideTimer = setTimeout(function () { return l.show(!1) }, this.options.autoHideDelay)) : void 0 } }, t.prototype.destroy = function () { return this.wrapper.remove() }, t }(), n[N] = function (t, i, e) { return t && t.nodeName || t.jquery ? n(t)[N](i, e) : (e = i, i = t, new o(null, i, e)), t }, n.fn[N] = function (t, i) { return n(this).each(function () { var e; return e = d(n(this)).data(P), e ? e.run(t, i) : new o(n(this), t, i) }), this }, n.extend(n[N], { defaults: l, addStyle: r, pluginOptions: k, getStyle: f, insertCSS: g }), n(function () { return g(a.css).attr("id", "core-notify"), n(i).on("click notify-hide", "." + P + "-wrapper", function (t) { var i; return i = n(this).data(P), i && (i.options.clickToHide || "notify-hide" === t.type) ? i.show(!1) : void 0 }) }) }(window, document, jQuery);
$(document).ready(function () { var c = 100; var d; var b = false; var a = $('<div id="TipContainer"><table border="0" cellspacing="0" cellpadding="0" align="center" class="JTip"><tr><td><div id="TipContent"></div></td></tr></table></div>'); $("body").append(a); $(".JQTip").bind("mouseover", function () { var f = getParameterByName(document.URL, "subServiceCode"); if (b) { clearTimeout(b) } var g = $(this).offset(); var e = $(this).width(); a.css({ left: (g.left + 25) + "px", top: g.top - 12 + "px" }); $("#TipContent").html("&nbsp;"); $.ajax({ type: "GET", contentType: "text/xml", dataType: "xml", async: true, url: "/Handler/ServiceInstructions.ashx?ServiceCode=" + f, data: "", success: function (h) { if (h != null && $(h).find("Instructions").length > 0) { $(h).find("Instruction").each(function () { if ($(this).text() != "") { $("#TipContent").html($(this).text()) } else { $("#TipContent").html("<span > لا يوجد ارشادات استخدام </span>") } }) } }, error: function (i, j, h) { $("#TipContent").html("<span > لا يوجد ارشادات استخدام </span>") } }); a.css("display", "block") }); $(".JQTip").bind("mouseout", function () { if (b) { clearTimeout(b) } b = setTimeout(function () { a.css("display", "none") }, c) }); $("#TipContainer").mouseover(function () { if (b) { clearTimeout(b) } }); $("#TipContainer").mouseout(function () { if (b) { clearTimeout(b) } b = setTimeout(function () { a.css("display", "none") }, c) }) });

(function (a) { if (typeof define === 'function' && define.amd) { define(['jquery'], a) } else { a(jQuery) } }(function ($) { var j = $.scrollTo = function (a, b, c) { return $(window).scrollTo(a, b, c) }; j.defaults = { axis: 'xy', duration: parseFloat($.fn.jquery) >= 1.3 ? 0 : 1, limit: true }; j.window = function (a) { return $(window)._scrollable() }; $.fn._scrollable = function () { return this.map(function () { var a = this, isWin = !a.nodeName || $.inArray(a.nodeName.toLowerCase(), ['iframe', '#document', 'html', 'body']) != -1; if (!isWin) return a; var b = (a.contentWindow || a).document || a.ownerDocument || a; return /webkit/i.test(navigator.userAgent) || b.compatMode == 'BackCompat' ? b.body : b.documentElement }) }; $.fn.scrollTo = function (f, g, h) { if (typeof g == 'object') { h = g; g = 0 } if (typeof h == 'function') h = { onAfter: h }; if (f == 'max') f = 9e9; h = $.extend({}, j.defaults, h); g = g || h.duration; h.queue = h.queue && h.axis.length > 1; if (h.queue) g /= 2; h.offset = both(h.offset); h.over = both(h.over); return this._scrollable().each(function () { if (f == null) return; var d = this, $elem = $(d), targ = f, toff, attr = {}, win = $elem.is('html,body'); switch (typeof targ) { case 'number': case 'string': if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)) { targ = both(targ); break } targ = win ? $(targ) : $(targ, this); if (!targ.length) return; case 'object': if (targ.is || targ.style) toff = (targ = $(targ)).offset() } var e = $.isFunction(h.offset) && h.offset(d, targ) || h.offset; $.each(h.axis.split(''), function (i, a) { var b = a == 'x' ? 'Left' : 'Top', pos = b.toLowerCase(), key = 'scroll' + b, old = d[key], max = j.max(d, a); if (toff) { attr[key] = toff[pos] + (win ? 0 : old - $elem.offset()[pos]); if (h.margin) { attr[key] -= parseInt(targ.css('margin' + b)) || 0; attr[key] -= parseInt(targ.css('border' + b + 'Width')) || 0 } attr[key] += e[pos] || 0; if (h.over[pos]) attr[key] += targ[a == 'x' ? 'width' : 'height']() * h.over[pos] } else { var c = targ[pos]; attr[key] = c.slice && c.slice(-1) == '%' ? parseFloat(c) / 100 * max : c } if (h.limit && /^\d+$/.test(attr[key])) attr[key] = attr[key] <= 0 ? 0 : Math.min(attr[key], max); if (!i && h.queue) { if (old != attr[key]) animate(h.onAfterFirst); delete attr[key] } }); animate(h.onAfter); function animate(a) { $elem.animate(attr, g, h.easing, a && function () { a.call(this, targ, h) }) } }).end() }; j.max = function (a, b) { var c = b == 'x' ? 'Width' : 'Height', scroll = 'scroll' + c; if (!$(a).is('html,body')) return a[scroll] - $(a)[c.toLowerCase()](); var d = 'client' + c, html = a.ownerDocument.documentElement, body = a.ownerDocument.body; return Math.max(html[scroll], body[scroll]) - Math.min(html[d], body[d]) }; function both(a) { return $.isFunction(a) || typeof a == 'object' ? a : { top: a, left: a } }; return j }));
jQuery.easyNotification = function (j) { var b = { id: "easyNotification", text: "Notification!", parent: "body", prepend: true, sibling: "", before: true, closeClassName: "close", closeText: "Close", cookieEnable: false, cookieName: "notification", cookieValue: "123425", cookieDays: 30, delay: 0, autoClose: false, duration: 5000, callback: function () { } }; if (typeof j == "string") { b.text = j } var j = jQuery.extend(b, j); var d, g; function i(m, n, o) { if (o) { var l = new Date(); l.setTime(l.getTime() + (o * 24 * 60 * 60 * 1000)); var k = "; expires=" + l.toGMTString() } else { var k = "" } document.cookie = m + "=" + n + k + "; path=/" } function f(l) { var n = l + "="; var k = document.cookie.split(";"); for (var m = 0; m < k.length; m++) { var o = k[m]; while (o.charAt(0) == " ") { o = o.substring(1, o.length) } if (o.indexOf(n) == 0) { return o.substring(n.length, o.length) } } return null } function c(k) { i(k, "", -1) } function a() { var l = false; if (j.cookieEnable) { var k = f(j.cookieName); if (k == j.cookieValue) { l = true } } return l } function e() { $(d).slideUp("fast"); if (j.cookieEnable) { i(j.cookieName, j.cookieValue, j.cookieDays) } j.callback(); clearTimeout(g) } function h() { $("#" + j.id).remove(); clearTimeout(g); d = $('<div id="' + j.id + '">' + j.text + "</div>"); $('<span class="' + j.closeClassName + '">' + j.closeText + "</span>").click(function () { e() }).appendTo(d); if (j.sibling != "") { if (j.before) { $(d).hide().insertBefore(j.sibling).fadeIn("fast") } else { $(d).hide().insertAfter(j.sibling).fadeIn("fast") } } else { if (j.prepend) { $(d).hide().prependTo(j.parent).fadeIn("fast") } else { $(d).hide().appendTo(j.parent).fadeIn("fast") } } if (j.autoClose) { g = setTimeout(e, j.duration) } } if (!a()) { g = setTimeout(h, j.delay) } };
var mapURls = [];
var enableMap;
$.ajax({
    type: "GET",
    url: "/_layouts/Riyadh.EServices/Scripts/Map/Cnf.xml?v=1003",
    dataType: "xml",
    cache: false,
    success: function (xml) {
        $(xml).find("Map").each(function () {
            var $url = $(this);
            var mapUrl = {};
            mapUrl.key = $url.attr("id");
            mapUrl.url = $url.text();
            mapURls.push(mapUrl);
        });
    enableMap=$(xml).find("settings").find("EnableMap").text();
    }
});
function GetParcelData(xCoordinate, yCoordinate, operationType) {
    var result = null;
    $.ajax({
        url: `/Handler/LandInfo.ashx?AllowAnonymous=1&lat=${xCoordinate}&long=${yCoordinate}&operation=${operationType}`,
        type: "POST",
        async: false,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            result= data;
        },
        error: function (jqXHR, textStatus, errorThrown) {
            result = null;
        }
    });
    return result;
}
function QueryStringToJSON() {
    var pairs = location.search.slice(1).split('&');

    var result = {};
    pairs.forEach(function (pair) {
        pair = pair.split('=');
        result[pair[0]] = decodeURIComponent(pair[1] || '');
    });

    return JSON.parse(JSON.stringify(result));
}
function checkTextAreaMaxLength(textBox, e, length) {

    var mLen = textBox["MaxLength"];
    if (null == mLen)
        mLen = length;

    var maxLength = parseInt(mLen);
    if (!checkSpecialKeys(e)) {
        if (textBox.value.length > maxLength - 1) {
            if (window.event)//IE
                e.returnValue = false;
            else//Firefox
                e.preventDefault();
        }
    }
}

function checkSpecialKeys(e) {
    if (e.keyCode != 8 && e.keyCode != 46 && e.keyCode != 37 && e.keyCode != 38 && e.keyCode != 39 && e.keyCode != 40)
        return false;
    else
        return true;
}
function AlertBox(title ,text ,messageType)
{
    $.alert.open({
        type: messageType, title: title,
        cancel: true, icon: messageType,
        content: text,
        align: 'right',
        buttons: { ok: 'موافق' },
        width: 'auto',
        maxHeight: 160,
        pie: '/_LAYOUTS/Riyadh.EServices/PIE.htc'
    });
}
function isNumberKey(evt) {
    var charCode = (evt.which) ? evt.which : event.keyCode
    if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;

    return true;
}
function getParameterByName(param) {
    var decodedUrl = decodeURIComponent(window.location.href);
    var url = decodedUrl.slice(decodedUrl.indexOf('?') + 1).split('&');
    for (var i = 0; i < url.length; i++) {
        var urlparam = url[i].split('=');
        if (urlparam[0] == param) {
            return urlparam[1];
        }
    }
}
function DeleteConfirm() {
    return confirm('هل تريد بالتأكيد الحذف ؟');
}

function AddToFavorite() {
    var url = window.document.URL;
    var title = 'البوابة الالكترونية للخدمات البلدية لأمانة منطقة الرياض - ' + window.document.title;

    if (window.sidebar) {
        // Mozilla Firefox Bookmark         
        window.sidebar.addPanel(title, url, "");
    }
    else if (window.opera && window.print) {
        alert('لاضافة الصفحة إلى المفضلة (Ctrl +D) اضغط على');
    }
    else if (window.external) { // IE Favorite
        if (window.ActiveXObject) {
            //ie
            window.external.AddFavorite(url, title);
        } else {
            //chrome
            alert('لاضافة الصفحة إلى المفضلة (Ctrl +D) اضغط على');
        }
    }
    else { //safri
        alert('لاضافة الصفحة إلى المفضلة (Ctrl +D) اضغط على');
    }
}
function PrintContentPage() {
    $(document).ready(function () {
        html = '<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><html>\n<head>';
        html = '<style>body{padding: 0; margin: 0;min-height:750px;direction:rtl}table{margin:auto !important}li{ width: 650px;}h1{font-size:20px !important}</style>';
        html += '<title>السيرة الذاتية</title>';


        $('link[rel=stylesheet]').each(function () {
            html += '<link rel="stylesheet" href="' + $(this).attr('href') + '" />';
        });


        html += '</head>';
        html += '<body>';
        html += '<table width="640" border="0" cellspacing="0" cellpadding="0" align="center"><tr><td>';
        html += '<div style="height:122px;width: 690px; margin-top: 30px;margin-bottom: 10px;">';

        html += '<img src="/_Layouts/Riyadh.EServices/NewTheme/images/logo/logo-dark.png"  />';

        html += '</div>';

        html += '<table width="690" border="0" cellspacing="0" cellpadding="0">';

        var innHtml = $(".printOut").html() + "";

        html += innHtml;
        html += '</table>';

        html += '</td></tr></table>';

        html += '</body>';
        html += '</html>';

        var printWin = window;
        printWin.document.open("", "_blank", "width=900, height=500");
        printWin.document.write(html);
        printWin.document.close();
        printWin.print();

        return false;

    });
}
function PrintPage() {
    $(document).ready(function () {
        html = '<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><html>\n<head>';
        html = '<style>body{padding: 0; margin: 0;min-height:750px;direction:rtl}table{margin:auto !important}li{ width: 650px;}h1{font-size:20px !important}</style>';
        html += '<title>' + 'البوابة الالكترونية للخدمات البلدية لأمانة منطقة الرياض - ' + window.document.title + '</title>';


        $('link[rel=stylesheet]').each(function () {
            html += '<link rel="stylesheet" href="' + $(this).attr('href') + '" />';
        });


        html += '</head>';
        html += '<body>';
        html += '<table width="640" border="0" cellspacing="0" cellpadding="0" align="center"><tr><td>';
        html += '<div style="height:122px;width: 690px; margin-top: 30px;margin-bottom: 10px;">';

        html += '<img src="/_Layouts/Riyadh.EServices/NewTheme/images/logo/logo-dark.png"  />';

        html += '</div>';

        html += '<table width="690" border="0" cellspacing="0" cellpadding="0">';

        var innHtml = $("#above").html() + "";

        html += innHtml;
        html += '</table>';

        html += '</td></tr></table>';

        html += '</body>';
        html += '</html>';

        var printWin = window;
        printWin.document.open("", "_blank", "width=900, height=500");
        printWin.document.write(html);
        printWin.document.close();
        printWin.print();

        return false;

    });
}
function PrintBill() {
    $(document).ready(function () {
        html = '<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><html>\n<head>';
        html = '<style>body{padding: 0; margin: 0;min-height:750px;direction:rtl}table{margin:auto !important}li{ width: 650px;}h1{font-size:20px !important}</style>';
        html += '<title>' + 'البوابة الالكترونية للخدمات البلدية لأمانة منطقة الرياض - ' + window.document.title + '</title>';


        $('link[rel=stylesheet]').each(function () {
            html += '<link rel="stylesheet" href="' + $(this).attr('href') + '" />';
        });


        html += '</head>';
        html += '<body>';
        html += '<table width="640" border="0" cellspacing="0" cellpadding="0" align="center"><tr><td>';
           html += '<div style="height:122px;width: 690px; margin-top: 30px;margin-bottom: 10px;">';

        html += '<img src="/_Layouts/Riyadh.EServices/NewTheme/images/logo/logo-dark.png"  />';

        html += '</div>';

        html += '<table width="690" border="0" cellspacing="0" cellpadding="0"><tr><td>';

        html += $("#PrintArea").html();

        html += '<tr><td></table>';

        html += '</td></tr></table>';

        html += '</body>';
        html += '</html>';




        var printWin = window;
        printWin.document.open("", "_blank", "width=900, height=500");
        printWin.document.write(html);
        printWin.document.close();
        printWin.print();

        return false;

    });
}

$(function () {

    $('form').find('[watermark]').each(function (index) {
        var watermark = $(this).attr("watermark");
        $(this).val(watermark).addClass('watermark');

        $(this).blur(function () {
            if ($(this).val().length == 0) {

                $(this).val(watermark).addClass('watermark');
            }
        });
        $(this).focus(function () {
            if ($(this).val() == watermark) {
                $(this).val('').removeClass('watermark');
            }
        });
    });
    $('form').find('[number]').each(function (index) {
        $(this).on("keypress", function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;
            return true;
        });

        $(this).on("focusout", function () {
            if (isNaN($(this).val())) {
                $(this).val("");
            }
        });
    });
    $('form').find('[charct]').each(function (index) {
        $(this).on("keypress", function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;
            return true;
        });

        $(this).on("focusout", function () {
            if (isNaN($(this).val())) {
                $(this).val("");
            }
        });
    });
    $('form').find('[decimal]').each(function () {
        $(this).on("keypress keyup", function () {

            if (this.value !== this.value.replace(/[^0-9\.]/g, '')) {
                this.value = this.value.replace(/[^0-9\.]/g, '');
                return false;
            }
            else
                return true;
        });

        $(this).on("focusout", function () {
            if (isNaN($(this).val())) {
                $(this).val("");
            }
        });
    });
    $('form').find('[recurrencepattern]').each(function (index) {
        $(this).bind("change", function () {
            var displayPattern = "recurrencePattern_" + $(this).val();

            $("[id^='recurrencePattern']").css("display", "none");
            $("#" + displayPattern).css("display", "");
        });
    });
    $('form').find('[checkBoxRequired]').each(function (index) {
        var message = $(this).attr("data-errormessage-range-underflow");
        var minReqired = $(this).attr("checkBoxRequired");
        var id = $(this).attr("id");
        $(this).find(":checkbox").each(function () {
            $(this).attr("class", "validate[minCheckbox[" + minReqired + "]]");
            $(this).attr("name", id); $(this).attr("data-errormessage-range-underflow", message);
        });
    });
});
String.format = function () { var theString = arguments[0]; for (var i = 1; i < arguments.length; i++) { var regEx = new RegExp("\\{" + (i - 1) + "\\}", "gm"); theString = theString.replace(regEx, arguments[i]); } return theString; }
function ValidateCr(ctl, crNo, crDataPlacholder) {
    var handlerUrl = "/Handler/CrValidation.ashx?CrNo=" + crNo;
    jQuery.support.cors = true;
    $.ajax({
        url: handlerUrl,
        type: "GET",
        async: false,
        beforeSend: function () { ctl.after($("<span class='loading'>جاري التحقق من الرقم الموحد للمنشأة...</span>").fadeIn("slow")).data("loading", true); },
        success: function (data) {
            var item = jQuery.parseJSON(data);
            if (item != null) {
                if (item !== -1) {
                    $(".loading").fadeOut("fast", function () { $(this).remove() });
                    crDataPlacholder.val(String.format("{0}#{1}#{2}#{3}#{4}", crNo, item.EstablishmentOwnerName, item.ExpirationDate, item.ActivityName, item.CommercialName));
                    $("#crValid").remove();
                    $("#crError").remove();
                    ctl.after("<span class='fa fa-check' id='crValid' style='color:green'></span>");
                }
                else {
                    ctl.html("");
                    $("#crValid").remove();
                    $("#crError").remove();
                    ctl.after("<span class='fa fa-times-circle' id='crError' style='color:red'></span>");
                    crDataPlacholder.val("");
                }
            }

        },
        error: function (a, b, c) {
            $(".loading").fadeOut("fast", function () {
                $(this).remove()
            });
            ctl.append("<span class='loading'>حدث خطأ اثناء التحقق من الرقم الموحد للمنشأة</span>").fadeIn("slow");
            $("#crValid").remove();
            crDataPlacholder.val("");
            crDataPlacholder.html("");
        }
    });
}

var Handlers = [{ 'key': "1", 'Value': "/Handler/Lookups.ashx" }, { 'key': "2", 'Value': "/Handler/Bls.ashx" }];


function BindLookups(handler, serviceUrl, ctl, placeHolder, firstItemText, isCodeBinding, isIdBinding, enableSelectedValue) {
    var handlerVal;
    $.each(Handlers, function (index, item) {
        if (item["key"] == handler) {
            handlerVal = item["Value"];
        }
    });
    var handlerUrl = String.format("{0}?{1}", handlerVal, serviceUrl);
    jQuery.support.cors = true;
    $.ajax({
        url: handlerUrl,
        type: "GET",
        async: false,
        beforeSend: function () { ctl.html(""); ctl.after($("<span class='loading'>جاري التحميل...</span>").fadeIn("slow")).data("loading", true); },
        success: function (data) {
            var items = jQuery.parseJSON(data);
            if (null != items) {
                $(".loading").fadeOut("fast", function () { $(this).remove() });
                ctl.html("");
                $.each(items, function (n, item) {

                    if ("" !== item.Code) {

                        if (n === 0)
                            ctl.append("<option>--" + firstItemText + "--</option>");

                        if (item.Name !== null || item.Description !== null) {
                            var desc, code, id;
                            if (item.Name == null) { desc = item.Description }
                            else desc = item.Name;
                            if (isCodeBinding == true && isIdBinding == true) {
                                code = item.id;
                                id = item.Code;
                            }
                            if (isCodeBinding) {
                                code = item.Code
                            }
                            if (isIdBinding) {
                                code = item.Id;
                            }
                            if (handlerUrl.indexOf("getGisdirectrates") > 0) {
                               
                                if (item.Id == "48") {

                                   
                                    ctl.append($("<option data-gis-Code='" + id + "'></option>").attr("value", code).text(desc));
                                  
                                }
                            }
                            else ctl.append($("<option data-gis-Code='" + id + "'></option>").attr("value", code).text(desc));
                        }

                    }
                });
                if (enableSelectedValue) {
                    ctl.change(function () {
                        placeHolder.val($(this).val())
                    });
                }

            }
            else { ctl.html(""); ctl.append("<span class='loading'>لا يوجد بيانات</span>"); }
        },
        error: function (a, b, c) {
            $(".loading").fadeOut("fast", function () { $(this).remove() });
            ctl.append("<span class='loading'>حدث خطأ اثناء عرض البيانات</span>").fadeIn("slow");
        }
    });
}
function BindDirectorates(ctl, placeHolder) { BindLookups(1, String.format("op={0}&dirCode={1}", "getdirectrates", ""), ctl, placeHolder, "-- اختر البلدية --", true, false, true); }
function BindGisDirectorates(ctl, placeHolder) { BindLookups(1, String.format("op={0}&dirCode={1}", "getGisdirectrates", ""), ctl, placeHolder, "-- اختر البلدية --", true, true, true); }
function BindQuarters(ctl, dirCode, placeHolder) { BindLookups(1, String.format("op={0}&dirCode={1}&quarterCode={2}", "getquarters", dirCode, ""), ctl, placeHolder, "-- اختر الحي --", true, false, true); }
function BindGisQuarters(ctl, dirCode, placeHolder) { BindLookups(1, String.format("op={0}&dirCode={1}&quarterCode={2}", "getgisquarters", dirCode, ""), ctl, placeHolder, "-- اختر الحي --", true, true, true); }
function BindStreets(ctl, quarterCode, placeHolder) { BindLookups(1, String.format("op={0}&quarterCode={1}", "getstreets", quarterCode), ctl, placeHolder, "-- اختر الشارع --", true, false, true); }
function BindCities(ctl, countryCode, placeHolder) { BindLookups(String.format("op={0}&countryCode={1}", "getcities", countryCode), ctl, placeHolder, "-- اختر المدينة --", true, false, true); }
function BindCountries(ctl, placeHolder) { BindLookups(1, String.format("op={0}", "getcountries"), ctl, placeHolder, "-- اختر الدولة --", true, false, true); }
function BindMinClassifications(ctl, placeHolder) { BindLookups(2, String.format("op={0}", "getmainclassifications"), ctl, placeHolder, "-- اختر التصنيف الرئيسي --", true, false, true); }
function BindSubClassifications(ctl, mainClassificationCode, placeHolder) { BindLookups(2, String.format("op={0}&mainclassification={1}", "getsubclassifications", mainClassificationCode), ctl, placeHolder, "-- اختر التصنيف الفرعي --", true, false, true); }
function BindObjectiveMinClassifications(ctl, objectiveNo, placeHolder) { BindLookups(2, String.format("op={0}&objectiveno={1}", "getojectivemainclassifications", objectiveNo), ctl, placeHolder, "-- اختر التصنيف الرئيسي --", true, false, true); }

function BindBuildingComponents(ctl, objective, placeHolder) { BindLookups(2, String.format("op={0}&objectiveno={1}", "getbuildingcomponent", objective), ctl, placeHolder, "-- اختر مكون البناء --", false, true, false); }

$(document).ready(function () {
    $('body').append('<a class="back-top-btn" />')
    $('.back-top-btn').click(function () {
        $('html,body').animate({ scrollTop: '0' }, '500');
    });
	if($('.orion-menu-wrapper').length)
	{
	var topPos = $('.orion-menu-wrapper').offset().top;
$(window).scroll(function () {
    var scrolled = $(window).scrollTop();

    if (scrolled > topPos && $('.orion-menu-wrapper').hasClass('docked') == false) {
        $('.orion-menu-wrapper').addClass('docked');
        $('.innerbox').css('padding-top', '50px');

    }
    if (scrolled < topPos && $('.orion-menu-wrapper').hasClass('docked') == true) {
        $('.orion-menu-wrapper').removeClass('docked');
        $('.innerbox').css('padding-top', '0px');
    }
    if (scrolled > 1) {
        $('.back-top-btn').addClass('show');
    }
    if (scrolled < 1) {
        $('.back-top-btn.show').removeClass('show');
    }
});
	}
});
function CheckForIDDublication(idNo, idType, callback) {
    var a = String.format("/Handler/User.ashx?op=IsIDExist&ValueToCompare={0}&IdType={1}", idNo, idType);
    jQuery.support.core = true;
    var validateStatus = {};
    $.ajax({
        url: a,
        type: "Get",
        beforeSend: function () { },
        success: function (b) {
            if (b != null && b === "true") {
                validateStatus.ValidationStatus = false;
                validateStatus.ValidationMessage = "رقم الاثبات مستخدم من قبل";
                callback(validateStatus);
            } else {
                validateStatus.ValidationStatus = true;
            }
        },
        error: function () {
            validateStatus.ValidationStatus = true;
            validateStatus(dataObject)
        }
    })
};
function AlertBox(title, text, messageType) {
    $.alert.open({
        type: messageType, title: title,
        cancel: true, icon: messageType,
        content: text,
        align: 'right',
        buttons: { ok: 'موافق' },
        width: 'auto',
        maxHeight: 160,
        pie: '/_LAYOUTS/Riyadh.EServices/PIE.htc'
    });
}
function confirmDeliveryChannel(btn) {
    if ($("[id$='hfDeliveryMethod']").val() == "") {
        var rwconfirm = GetRadWindowManager(); rwconfirm.radconfirm('هل انت متأكد من اعتماد البلدية الفرعية لاستلام الرخصة ؟', function (arg) {
            if (arg) {
               __doPostBack(btn.name, "");
                return true;
            }
            else
                return false;
        }, 600, null, null, 'طريقة استلام الرخصة', '/_Layouts/Riyadh.EServices/Images/info.png');
    }
    else
    {
        __doPostBack(btn.name, "");
        return true;
    }
        
}
function CheckUserSession(callback) {
    jQuery.support.cors = true;
    $.ajax({
        url: "/Handler/Common.ashx?op=checkUserSession",
        type: "GET",
        async: false,
        success: function (data) {
            callback(data);
        },
        error: function () {
            callback("0");
        }
    })
}
function CheckUserAddreess(callback) {
    var isInservice = getParameterByName("ServiceCode")!==undefined?1:0;
    console.log(getParameterByName("ServiceCode"));
    jQuery.support.cors = true;
    $.ajax({
        url: "/Handler/Common.ashx?op=checkhasaddress&InService="+isInservice,
        type: "GET",
        async: false,
        success: function (data) {
            callback(data);
        },
        error: function () {
            callback("0");
        }
    })
}
function startTimer(duration, displayElement) {
    var stopCounting = false;
    var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        displayElement.text(minutes + ":" + seconds);

        if (--timer < 0) {
            seconds = "00";
            minutes = "00";
            if (stopCounting != true) {

                displayElement.hide();
            }
        } else {
            if (stopCounting != true) {

                displayElement.show();
            }
        }
        var duratuion = parseInt(seconds) + parseInt(minutes * 60);
        localStorage.setItem("Duration", duratuion);
    }, 1000);
}
function CalculateTabWidth() {
    var tabWidth = (parseInt($(".rtsUL").width()) / parseInt($(".rtsLI").length)) + "px";
    $(".rtsLI").each(function (index) {
        $(this).css("width", tabWidth);
        if ($(this).find(".step-no").length == 1) return;
        $(this).find('.rtsOut').prepend("<span class=\"step-no\">" + (parseInt(index) + 1) + "</span>");
    });
}


function setStatusMessage(a, b) {
    if (b != "" && b != undefined) {
        a.show();
        a.html("");
        a.html(b);
    } else {
        a.hide();
    }
}

function SetIDTypeVisibility(b, c, d) {
    c.hide();
    switch (b) {
        case "1":
            d.html("رقم الاثبات");
            c.show();
            break;
        case "2":
            d.html("رقم الحفيظة");
            c.hide();
            break;
        case "3":
            d.html("رقم الاثبات");
            c.show();
            break;
        case "4":
            d.html("رقم جواز السفر");
            c.hide();
            break;
        case "5":
            d.html("الرقم الموحد للمنشأة");
            c.hide();
            break;
        case "6":
            d.html("رقم مرجعى للمنشأة");
            c.hide();
            break;
        case "7":
            d.html("رقم هوية خليجى");
            c.hide();
            break;
        case "8":
            d.html(" هوية زائر");
            c.hide();
            break;
    }
}

function CheckIdLength(d, c, f) {
    var e = {};
    e.ValidationStatus = true;
    e.ValidationMessage = "";
    switch (c) {
        case "1":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال رقم الاثبات";
            }
            else if (d.length > 0 && d.length < 10) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى رقم الهوية. يجيب ان لايقل عن 10 أرقام.";
            }
            break;
        case "3":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال رقم الاثبات";
            }
            else if (d.length > 0 && d.length < 10) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى رقم الاقامة. يجيب ان لايقل عن 10 أرقام.";
            }
            break;
        case "2":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال رقم الحفيظة";
            }
            else if (d.length > 0 && d.length < 3) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى رقم الحفيظة. يجيب ان لايقل عن 3 أرقام.";
            }
            break;
        case "4":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال رقم جواز السفر";
            }
            else if (d.length > 0 && d.length < 6) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى رقم جواز السفر. يجيب ان لايقل عن 6 أرقام.";
            }
            break;
        case "5":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال الرقم الموحد للمنشأة";
            }
            else if (d.length > 0 && d.length < 10) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى الرقم الموحد للمنشأة. يجيب ان لايقل عن 10 أرقام.";
            }
            else if (!d.startsWith('7')) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى الرقم الموحد للمنشأة. يجيب ان يبدأ برقم 7.";
            }
            break;
        case "7":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال رقم البطاقة الخليجى";
            }
            else if (d.length > 0 && d.length < 7) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى رقم بطاقة خليجى. يجب ان لا يقل عن 7 أرقام.";
            }
            break;
        case "6":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال الرقم المرجعى للمنشأة";
            }
            else if (d.length > 0 && d.length < 3) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى الرقم المرجعى للمنشأة. يجيب ان لايقل عن 3 أرقام.";
            }
            break;
        case "8":
            if (d.length == 0) {
                e.ValidationStatus = false;
                e.ValidationMessage = "يجب ادخال رقم هوية الزائر";
            }
            else if (d.length > 0 && d.length < 10) {
                e.ValidationStatus = false;
                e.ValidationMessage = "خطأ فى رقم هوية الزائر. يجيب ان لايقل عن 10 أرقام.";
            }
            break;
    }
    f(e);
}

function SetIDValidationRoles(c, b) {
    switch (b) {
        case "1":
        case "2":
        case "3":
        case "5":
        case "8":
        case "6":
            c.attr("maxlength", "10").attr('number');
            break;
        case "4":
            c.attr("maxlength", "15").attr('type', 'text');
            break;
        case "7":
            c.attr("maxlength", "15").attr('number');
            break;
    }
}
function AlertBoxV2(title, text, type) {
    swal({
        title: title,
        text: text,
        icon: type,
        buttons: {
            confirm: { text: 'موافق', value: true, visible: true, closeModal: true }
        },
        closeOnClickOutside: false,
        closeOnEsc: false
    });
}
function ConfirmationBox(title, text, type, afterCloseCallback) {
    swal({
        title: title,
        text: text, icon: type, buttons: {
            confirm: { text: 'موافق', value: true, visible: true, closeModal: true },
            cancel: { text: 'الغاء', value: false, visible: true, closeModal: true }
        }, closeOnClickOutside: false, closeOnEsc: false
    }).then((value) => { { if (value) { { afterCloseCallback(); return true; } } } });

}

function ValidateInputs() {
    $('form').find('[number]').each(function (index) {
        $(this).on("keypress keyup", function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;
            return true;
        });

        $(this).on("focusout", function () {
            if (isNaN($(this).val())) {
                $(this).val("");
            }
        });
    });
    $('form').find('[numberslash]').each(function (index) {
        $(this).on("keypress keyup", function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if ((charCode >= 48 && charCode <= 57) || (charCode === 47 || charCode === 191))
                return true;
            return false;
        });

        $(this).on("focusout", function () {
            var reg = new RegExp(/[0-9//]/);
            if ((reg.test($(this).val())) !== true) {
                $(this).val("");
            }
        });
    });
    $('form').find('[charct]').each(function (index) {
        $(this).on("keypress keyup", function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;
            return true;
        });

        $(this).on("focusout", function () {
            if (isNaN($(this).val())) {
                $(this).val("");
            }
        });
    });
    $('form').find('[decimal]').each(function () {
        $(this).on("keypress keyup", function () {

            if (this.value !== this.value.replace(/[^0-9\.]/g, '')) {
                this.value = this.value.replace(/[^0-9\.]/g, '');
                return false;
            } else
                return true;
        });

        $(this).on("focusout", function () {
            if (isNaN($(this).val())) {
                $(this).val("");
            }
        });
    });
}
